å®ŒæˆV1, ç„¶åçœ‹æ‡‚å…¨éƒ¨ä»£ç ï¼Œé‡è¦çš„éƒ¨åˆ†è‡ªå·±å†™ä¸€éï¼Œç„¶åå»æ‰¾å‰ç«¯å®ä¹ 

Smoke test æ˜¯"å†’çƒŸæµ‹è¯•"ï¼ˆç‚¹ç«åä¸å†’çƒŸå°±ç®—è¿‡ï¼‰ï¼Œä½†è¦ä¿è¯è´¨é‡ï¼Œå¿…é¡»é€æ¨¡å—æ·±å…¥éªŒè¯ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ `doc/06_learning_path.md` ä¸­å»ºè®®åšæ¨¡å—çº§ä»¿çœŸçš„åŸå› ã€‚

**å‚æ•°å£å¾„**ï¼šé»˜è®¤å‚æ•°ä¸æ—¶åºå¸¸é‡ä»¥ `rtl/top/snn_soc_pkg.sv` ä¸ºå‡†ï¼Œæœ¬æ–‡æ•°å€¼ä»…ä½œè¯´æ˜ï¼Œè‹¥ä¸ä¸€è‡´ä»¥ pkg ä¸ºå‡†ã€‚

1. RTL
2. TB + ä»¿çœŸå›å½’
3. Lint
4. DCï¼ˆç»¼åˆï¼‰
5. LECï¼ˆRTL â†” Netlistï¼‰
6. P&R
7. PTï¼ˆåç«¯æ—¶åºï¼Œå«å¤šè§’ï¼‰
8. LECï¼ˆNetlist â†” P&R netlistï¼Œå¯é€‰ä½†å¸¸åšï¼‰
9. DRC / LVSï¼ˆç­¾æ ¸ï¼‰

è¦ç‚¹

- LEC é€šå¸¸åšä¸¤æ¬¡ï¼šç»¼åˆåä¸€æ¬¡ã€å¸ƒå±€å¸ƒçº¿åä¸€æ¬¡ã€‚
- PT ä¸€èˆ¬åœ¨ P&R ååšï¼ˆæˆ–åœ¨ P&R è¿‡ç¨‹ä¸­åå¤è·‘ï¼‰ã€‚
- DRC/LVS æ”¾æœ€åã€‚ 
## å‰è¨€ï¼šå…ˆå®ŒæˆV1åŸºç¡€åŠŸèƒ½ï¼Œå†åŠ åˆ›æ–°ç‚¹

```
é˜¶æ®µ1 (2å‘¨)ï¼šè·‘é€šsmoke test + å­¦ä¹ 06æ–‡æ¡£ âœ…
é˜¶æ®µ2 (3å‘¨)ï¼šæ·»åŠ UART + SPIæ§åˆ¶å™¨
é˜¶æ®µ3 (3å‘¨)ï¼šDMAæ‰©å±•ï¼ˆå¤šç›®æ ‡æ”¯æŒï¼‰
é˜¶æ®µ4 (3å‘¨)ï¼šAXI-Liteæ€»çº¿å‡çº§
é˜¶æ®µ5 (4å‘¨)ï¼šE203é›†æˆ + bootloader + å›ºä»¶éªŒè¯  â† è¿™é‡Œæ˜¯V1æœ€ä½å¯æµç‰‡ç‰ˆæœ¬
é˜¶æ®µ6a (2å‘¨)ï¼šæŒ‘é€‰ä½é£é™©åˆ›æ–°ç‚¹é€ä¸ªæ·»åŠ ï¼ˆ64Ã—16æ˜ å°„ã€æ´»åŠ¨æ£€æµ‹ã€æ—¶é’Ÿé—¨æ§ï¼‰- æ¯ä¸ªåˆ›æ–°ç‚¹éƒ½è¦æœ‰å¯¹æ¯”æµ‹è¯•ï¼ˆåŠ å‰ vs åŠ åï¼‰
é˜¶æ®µ6b (4å‘¨)ï¼šç»¼åˆ + æ—¶åºä¼˜åŒ– + æ•°å­—åç«¯ + æµç‰‡
```

**ä¼˜åŠ¿**ï¼š

- âœ… ç¡®ä¿6.30å‰æœ‰**å¯æµç‰‡çš„å®Œæ•´V1**ï¼ˆå³ä½¿åˆ›æ–°ç‚¹æ¥ä¸åŠä¹Ÿèƒ½æµç‰‡ï¼‰
- âœ… E203é›†æˆåï¼Œåˆ›æ–°ç‚¹çš„è½¯ä»¶éªŒè¯ç¯å¢ƒå·²å…·å¤‡
- âœ… æ¯ä¸ªé˜¶æ®µç‹¬ç«‹ï¼Œé—®é¢˜éš”ç¦»æ€§å¥½
- âœ… ç¬¦åˆå·¥ç¨‹ç•Œ"å…ˆè·‘é€šã€å†ä¼˜åŒ–"çš„æœ€ä½³å®è·µ
- æ¯ä¸ªåˆ›æ–°ç‚¹éƒ½è¦æœ‰å¯¹æ¯”æµ‹è¯•ï¼ˆåŠ å‰ vs åŠ åï¼‰
### ä¸ºä»€ä¹ˆè¿™äº›åˆ›æ–°ç‚¹å¯ä»¥åç½®ï¼Ÿ

#### æ ¸å¿ƒåŸå› ï¼š**æ¨¡å—åŒ–è®¾è®¡ + éä¾µå…¥å¼ä¼˜åŒ–**

|åˆ›æ–°ç‚¹|ç±»å‹|å¯¹æ ¸å¿ƒæ¶æ„å½±å“|å¯å¦ç‹¬ç«‹å¼€å…³|
|---|---|---|---|
|64Ã—16æ˜ å°„|æ•°æ®é‡æ’|ä»…DMAå–æ•°é¡ºåº|âœ… å¯ç”¨å‚æ•°æ§åˆ¶|
|Shadow Buffer|ä¾§æŒ‚æ¨¡å—|é›¶å½±å“|âœ… å¯é€‰ä¾‹åŒ–|
|ç¨€ç–æ£€æµ‹|FSMåˆ†æ”¯|FSMåŠ åˆ¤æ–­|âœ… å¯ç”¨ifdefæ§åˆ¶|
|æ´»åŠ¨æ£€æµ‹|FSMåˆ†æ”¯|FSMåŠ è®¡æ•°å™¨|âœ… å¯ç”¨ifdefæ§åˆ¶|
|æ—¶é’Ÿé—¨æ§|åŠŸè€—ä¼˜åŒ–|é›¶åŠŸèƒ½å½±å“|âœ… ç»¼åˆæ—¶å¯é€‰|

#### è®¾è®¡ä¼˜åŠ¿

1. **é£é™©éš”ç¦»**ï¼šæ¯ä¸ªåˆ›æ–°ç‚¹ç‹¬ç«‹ï¼Œä¸ä¼šç›¸äº’å¹²æ‰°
2. **A/Bæµ‹è¯•**ï¼šå¯ä»¥ç”¨å‚æ•°æ§åˆ¶å¼€å…³ï¼Œå¯¹æ¯”æœ‰æ— ä¼˜åŒ–çš„æ€§èƒ½å·®å¼‚
3. **æ¸è¿›å¼éªŒè¯**ï¼šå…ˆè·‘é€šåŸºç¡€åŠŸèƒ½ï¼Œå†é€ä¸ªåŠ ä¼˜åŒ–ï¼Œæ¯æ¬¡éƒ½èƒ½å›é€€
4. **æ—¶é—´çµæ´»**ï¼šåŸºç¡€åŠŸèƒ½æ˜¯ç¡¬deadlineï¼Œåˆ›æ–°ç‚¹æ˜¯åŠ åˆ†é¡¹

#### åˆ†æ”¯ç®¡ç†ç­–ç•¥

```bash
main                    # ä¸»åˆ†æ”¯ï¼šå§‹ç»ˆä¿æŒå¯æµç‰‡çŠ¶æ€
â”œâ”€â”€ feature/64x16       # åŠŸèƒ½åˆ†æ”¯ï¼š64Ã—16æ˜ å°„
â”œâ”€â”€ feature/shadow-buf  # åŠŸèƒ½åˆ†æ”¯ï¼šShadow Buffer
â””â”€â”€ feature/sparsity    # åŠŸèƒ½åˆ†æ”¯ï¼šç¨€ç–æ£€æµ‹
```

æ¯ä¸ªåˆ›æ–°ç‚¹åœ¨è‡ªå·±çš„åˆ†æ”¯å¼€å‘ï¼ŒéªŒè¯é€šè¿‡ååˆå…¥mainï¼Œ**mainåˆ†æ”¯éšæ—¶å¯æµç‰‡**ã€‚

#### ä¸æ¨¡æ‹Ÿå›¢é˜Ÿçš„åè°ƒæµç¨‹

1. **ç°åœ¨ï¼ˆæ•°å­—ä¾§ï¼‰**ï¼š
    
    - æŒ‰ç…§ä¼°ç®—å€¼ï¼ˆ5/10/5ï¼‰å®Œæˆæ•°å­—è®¾è®¡
    - æ¥å£ä¿¡å·å®šä¹‰å·²å†»ç»“ âœ…
    - æ¥å£åè®®ï¼ˆæ¡æ‰‹æ—¶åºï¼‰å·²å†»ç»“ âœ…
2. **æ¨¡æ‹Ÿä¾§å¼€å‘**ï¼š
    
    - æŒ‰ç…§doc/08çš„**ä¿¡å·å®šä¹‰**å’Œ**æ¡æ‰‹åè®®**è®¾è®¡CIM macro
    - æ—¶åºå‚æ•°ï¼ˆå»¶è¿Ÿå‘¨æœŸï¼‰å¯ä»¥æš‚æ—¶å‚è€ƒä¼°ç®—å€¼
3. **è”è°ƒé˜¶æ®µ**ï¼ˆæ¨¡æ‹Ÿè®¾è®¡å®Œæˆåï¼‰ï¼š
    
    - æ¨¡æ‹Ÿå›¢é˜Ÿæä¾›å®é™…æ—¶åºï¼š
        - DACå®é™…éœ€è¦Xå‘¨æœŸå»ºç«‹
        - CIMå®é™…è®¡ç®—éœ€è¦Yå‘¨æœŸ
        - ADCå®é™…è½¬æ¢éœ€è¦Zå‘¨æœŸ
    - æ•°å­—ä¾§**åªéœ€ä¿®æ”¹3ä¸ªå‚æ•°**ï¼Œé‡æ–°ä»¿çœŸéªŒè¯
    - **ä¸éœ€è¦æ”¹ä»»ä½•æ¥å£ä¿¡å·å®šä¹‰**Â âœ…
## ä¸€ã€ç‰ˆæœ¬è¿­ä»£å®‰æ’

### âœ… æ¨èè·¯çº¿ï¼ˆV1 â†’ V2 â†’ V3ï¼‰

### **V1ï¼ˆ6/30 è¿™æ¬¡ï¼‰**

- **æ•°å­— SoC å•ç‹¬æµç‰‡**
- ç›®æ ‡ï¼šæ—¶åºæ­£ç¡®ã€åŠŸèƒ½è·‘é€šã€E203 + DMA + FIFO + æ§åˆ¶å™¨å…¨ç¨³å®š
- è¿™ä¸€æ­¥é£é™©æœ€å°ã€æœ€å®¹æ˜“æˆåŠŸ

### ä¸æ­¤åŒæ—¶ï¼Œä¸æ•°å­—SoC V1åŒæ—¶è¿›è¡Œï¼Œå…¶ä»–åŒå­¦è´Ÿè´£ï¼šæ¨¡æ‹ŸCIM MACROçš„è®¾è®¡ä¸æµç‰‡ï¼ˆé˜µåˆ—é‡‡ç”¨äºŒç»´ææ–™RRAMï¼‰

å•ç‹¬TAPE OUT: æ¨¡æ‹Ÿå® + RRAMåé“é›†æˆï¼ˆäºŒç»´ææ–™RRAMä½œä¸ºCIM MACROçš„é˜µåˆ—ï¼‰

- ç›®æ ‡ï¼šéªŒè¯å™¨ä»¶ç¨³å®šæ€§ã€å†™è¯»ä¸€è‡´æ€§ã€ADC/DAC å¯é æ€§
- ä¸ç‰µæ‰¯æ•´ä¸ª SoCï¼Œä¾¿äºå®šä½é—®é¢˜

### **æ•°å­—å’Œæ¨¡æ‹Ÿéƒ¨åˆ†åˆ†åˆ«æµ‹è¯•æˆåŠŸåï¼Œè¿›è¡Œï¼šç‰‡å¤–æ•°æ¨¡æ··åˆé›†æˆ**

- åœ¨å‰ä¸¤æ­¥éƒ½æˆç†Ÿçš„å‰æä¸‹ï¼ŒåšÂ **ç³»ç»Ÿçº§æ··åˆé›†æˆ**
- è¿™ä¸€æ­¥æˆåŠŸç‡æœ€é«˜ï¼Œé£é™©æœ€å¯æ§

### **è¿™æ¬¡ V1ï¼ˆ6/30ï¼‰**

- åªåš**éš¾åº¦ä½ã€é£é™©å°**çš„æ•°å­—åˆ›æ–°ç‚¹
- ç›®æ ‡ï¼š**èƒ½ç¨³å®šè·‘é€šã€èƒ½è§£é‡Šæ¸…æ¥šã€å¯å¤ç°**

### **V2 / V3ç­‰**

- ç­‰æ•°å­—å’Œæ¨¡æ‹Ÿéƒ½éªŒè¯æˆåŠŸå
- å†ä¸Š**å¤æ‚åˆ›æ–°ç‚¹**ï¼ˆæ¯”å¦‚äº‹ä»¶é©±åŠ¨ã€è‡ªåŠ¨æ ¡å‡†ã€æ™ºèƒ½æ¬è¿ç­‰ï¼‰
- æ•°å­—éƒ¨åˆ†å’Œæ¨¡æ‹Ÿéƒ¨åˆ†åˆ†åˆ«å†æµä¸€æ¬¡éªŒè¯-----V2
- æœ€ååšæ•°æ¨¡ç‰‡ä¸Šæ··åˆé›†æˆ----V3

---
## äºŒã€åˆ›æ–°ç‚¹è§„åˆ’
### âœ… åŸºäº Excel ç»Ÿè®¡â€œå…±æ€§ç—›ç‚¹â€çš„æ€»ä½“åˆ¤æ–­

ï¼ˆæ”¾åœ¨è¿™é‡Œï¼Œä½œä¸ºåç»­åˆ›æ–°ç‚¹çš„ä¾æ®ï¼‰

- **æ•°æ®æ¬è¿ä¸å­˜å‚¨è®¿é—®æ˜¯ç³»ç»Ÿçº§ä¸»è¦ç“¶é¢ˆ**  
    å¤šç¯‡è®ºæ–‡æ˜ç¡®æŒ‡å‡º L2/L1/SRAM è®¿é—®é¢‘ç¹ã€æ¬è¿èƒ½è€—å æ¯”é«˜ï¼ˆDIANAã€SENECAã€Câ€‘DNNã€ODINï¼‰ã€‚
- **CPU å‚ä¸åº¦è¿‡é«˜æ˜¯ååä¸èƒ½æ•ˆé—®é¢˜çš„æ ¹æºä¹‹ä¸€**  
    vMCU ç±»è®ºæ–‡æŒ‡å‡ºä¸­æ–­/è½®è¯¢é€ æˆç“¶é¢ˆï¼Œäº‹ä»¶ FIFO é¢‘ç¹æ‰“æ–­ CPUã€‚
- **ç³»ç»Ÿçº§æŒ‡æ ‡ç»å¸¸ä¸å®Œæ•´**  
    åªç»™å³°å€¼èƒ½æ•ˆä½†ç¼ºå°‘ç«¯åˆ°ç«¯æ•°æ®æµç“¶é¢ˆåˆ†æã€‚
- **æ¨¡æ‹Ÿ CIM å¯é æ€§ä¸æ¼‚ç§»æ˜¯æ ¸å¿ƒç—›ç‚¹**  
    RRAM è¯¯ç ã€æ¼‚ç§»ã€æ¸©åº¦æ•æ„Ÿï¼Œåœ¨ ISSCC 2023 ç­‰æ–‡ç« ä¸­æ˜¯ç³»ç»Ÿçº§é—®é¢˜ã€‚
- **å¯æ‰©å±•æ€§å—å­˜å‚¨å®¹é‡/äº’è¿å¸¦å®½é™åˆ¶**  
    Darwin/SENECA ç­‰å¼ºè°ƒ NoC/SRAM æˆä¸ºè§„æ¨¡ç“¶é¢ˆã€‚

### âœ… V1ï¼ˆè¿™æ¬¡ 6/30 æ•°å­—å•ç‹¬æµç‰‡ï¼‰

**åŸåˆ™ï¼šä½é£é™©ã€æ˜“éªŒè¯ã€èƒ½åœ¨è®ºæ–‡é‡Œè¯´æ¸…æ¥š**

å·²ç»åšçš„ï¼š1. âœ…Â **å•å¼ å›¾å¤šæ¬¡å‘ˆç°**ï¼ˆå¤šå¸§é‡å¤è¾“å…¥ï¼‰- é€šè¿‡ TIMESTEPS/THRESHOLD è°ƒèŠ‚
2. âœ…Â **å•å¼ å›¾å•æ¬¡æ¨ç†**Â - æœ€å¿«ï¼Œä½†éœ€é™ä½é˜ˆå€¼ï¼ˆå¦‚50-100ï¼‰
3. âœ…Â **è§†é¢‘/æ—¶åºè¯†åˆ«**Â - åˆ©ç”¨LIFç´¯ç§¯ç‰¹æ€§ï¼Œè®°ä½æ—¶åºä¿¡æ¯

**åªéœ€è°ƒæ•´**ï¼š

- `TIMESTEPS`Â å¯„å­˜å™¨å€¼
- `THRESHOLD`Â å¯„å­˜å™¨å€¼
- testbenchä¸­çš„è¾“å…¥æ•°æ®

**ç¡¬ä»¶å®Œå…¨é€šç”¨ï¼Œæ— éœ€ä¿®æ”¹RTLä»£ç ã€‚**

---

### 1) é€»è¾‘ 64Ã—16ï¼Œç‰©ç† 64Ã—20ï¼ˆScheme B å·®åˆ†çª—å£ï¼‰çš„æ˜ å°„
**æ·»åŠ æ—¶æœº**ï¼šV1 ä»»æ„é˜¶æ®µï¼ˆä¸ä¾èµ– CPU/AXIï¼Œæœ€æ—©å³å¯åŠ ï¼‰

**ä¸ºä»€ä¹ˆå€¼å¾—åšï¼Ÿ**

- é€»è¾‘ç»´åº¦ç”¨ 2 çš„å¹‚æ¬¡æ–¹ï¼ˆ64Ã—16ï¼‰åï¼Œåœ°å€æ˜ å°„å¯ä»¥ç”¨ç®€å•ä½ç§»å®Œæˆ
- è½¯ä»¶å†™å›ºä»¶æ—¶çœæ‰å¤§é‡ `if (col >= 64)` åˆ¤æ–­
- æ€»çº¿è®¿é—®æ•ˆç‡æ›´é«˜ï¼Œè°ƒè¯•æˆæœ¬æ›´ä½

**ä½ åšäº†ä»€ä¹ˆåˆ›æ–°ï¼Ÿ**

- æå‡ºâ€œ**é€»è¾‘åœ°å€ç©ºé—´å¯¹é½ + è¶Šç•Œè¿‡æ»¤**â€ç­–ç•¥
- è¿™å±äº SoC æ•°å­—æ¥å£å±‚é¢çš„å·¥ç¨‹ä¼˜åŒ–åˆ›æ–°

**è§£å†³çš„ç—›ç‚¹ï¼ˆæ¥è‡ª Excel ç»Ÿè®¡ï¼‰**

- å¤šç¯‡è®ºæ–‡æŒ‡å‡ºÂ **æ•°æ®æ¬è¿ä¸åœ°å€ç®¡ç†å¤æ‚**Â æ˜¯ç³»ç»Ÿç“¶é¢ˆ
- ä½ æŠŠå¤æ‚åœ°å€å¤„ç†å˜æˆå›ºå®šæ˜ å°„ï¼Œä»æºå¤´é™ä½å‡ºé”™ç‡

âœ…Â **æœ¬æ¬¡å¿…åš**ï¼ˆé£é™©æä½ï¼Œæ”¶ç›Šå¾ˆå¤§ï¼‰

---

### 2) è½»é‡ç‰ˆ Shadow Bufferï¼ˆåªåšå¯„å­˜å™¨ç¼“å†² + done æ ‡å¿—ï¼‰
**æ·»åŠ æ—¶æœº**ï¼šV1 æ—©æœŸå¯åšç¼“å†²æœ¬ä½“ï¼›è‹¥è¦â€œä¸­æ–­é€šçŸ¥/CPU ååŒâ€ï¼Œæ”¾åˆ° V1 åæœŸï¼ˆE203 é›†æˆåï¼‰

**æ³¨æ„ï¼šè¿™é‡Œä¸æ˜¯â€œåš DMAâ€ï¼Œè€Œæ˜¯â€œç»“æœé›†ä¸­è¯»â€**

**ä¸ºä»€ä¹ˆå€¼å¾—åšï¼Ÿ**

- å½“å‰ ADC æ˜¯å•é€šé“æ—¶åˆ†å¤ç”¨
- ç»“æœäº§ç”Ÿåœ¨å¤šä¸ªæ—¶åˆ»ï¼Œå¦‚æœ CPU è½®è¯¢ï¼Œä¼šæµªè´¹å¤§é‡å‘¨æœŸ
- Shadow Buffer æŠŠ 10 ä¸ªç»“æœé›†ä¸­å­˜èµ·æ¥ï¼ŒCPU åªè¯»ä¸€æ¬¡

**ä½ åšäº†ä»€ä¹ˆåˆ›æ–°ï¼Ÿ**

- **â€œé›†ä¸­ç»“æœç¼“å†² + ä¸€æ¬¡æ€§è¯»å–â€**
- å±äº SoC çº§æ•°æ®æ•´ç†ä¼˜åŒ–

**è§£å†³çš„ç—›ç‚¹ï¼ˆæ¥è‡ª Excel ç»Ÿè®¡ï¼‰**

- vMCU ç±»è®ºæ–‡ç—›ç‚¹ï¼š**CPU è½®è¯¢/ä¸­æ–­è´Ÿæ‹…å¤§**
- ä½ çš„æ–¹æ¡ˆç›´æ¥å‡è½» CPU è¯»å¯„å­˜å™¨æ¬¡æ•°

âœ…Â **æœ¬æ¬¡å¯ä»¥åšï¼ˆéš¾åº¦ä¸­ã€æ”¶ç›Šæ˜æ˜¾ï¼‰**

---

### 3) ç¨€ç–æ€§æ£€æµ‹
**æ·»åŠ æ—¶æœº**ï¼šV1 ä»»æ„é˜¶æ®µå³å¯ï¼ˆç»Ÿè®¡åŠŸèƒ½ä¸ CPU æ— å…³ï¼›ç­–ç•¥æ§åˆ¶æ”¾ V2ï¼‰

**ç¨€ç–æ€§ç»Ÿè®¡ / ç›‘æ§**

- åœ¨ DMA/è¾“å…¥ FIFO æ—åšä¸€ä¸ª**â€œéé›¶è®¡æ•°å™¨â€**
- ç»Ÿè®¡è¾“å…¥æ˜¯å¦ç¨€ç–
- ä½œä¸ºç³»ç»Ÿèƒ½è€—ç›‘æ§çš„é‡åŒ–æŒ‡æ ‡
- **V1 å¯åšï¼ˆå¾ˆè½»ï¼‰**ï¼Œä½†â€œç”¨äºç­–ç•¥æ§åˆ¶â€æ”¾åˆ° V2

**å¯¹åº”ç—›ç‚¹ï¼ˆæ¥è‡ª Excel ç»Ÿè®¡ï¼‰**

- å¤šç¯‡è®ºæ–‡å¼ºè°ƒÂ **ç³»ç»Ÿçº§èƒ½è€—ç¼ºå°‘æ•°æ®è¯æ®**
- ä½ é€šè¿‡ç¨€ç–ç»Ÿè®¡æä¾›â€œç³»ç»Ÿçº§è¯æ®â€

âœ…Â **æœ¬æ¬¡æ¨è**

---

### 4) æ´»åŠ¨æ£€æµ‹ + è®¡ç®—è·³è¿‡
**æ·»åŠ æ—¶æœº**ï¼šV1 ä»»æ„é˜¶æ®µå³å¯ï¼ˆæ”¹ FSM é€»è¾‘ï¼Œä¸ä¾èµ– CPU/AXIï¼‰

**åšæ³•**  
å½“ input_fifo ä¸ºç©ºã€æˆ–æŸä¸ª bitâ€‘plane å…¨ 0 æ—¶ï¼Œ**ä¸è§¦å‘ CIM/ADC/LIF**ã€‚  
è¿™å°±æ˜¯â€œåŒæ­¥ç‰ˆ HUSï¼ˆè·³è¿‡æ— æ•ˆè®¡ç®—ï¼‰â€ã€‚

**å¯¹åº”ç—›ç‚¹ï¼ˆæ¥è‡ª Excel ç»Ÿè®¡ï¼‰**

- å¤šç¯‡è®ºæ–‡æåˆ°Â **æ— æ•ˆè®¡ç®—å¯¼è‡´èƒ½è€—é«˜**
- ä½ çš„æ–¹æ¡ˆæ˜¯æœ€ç®€å•ã€æœ€å¯è§£é‡Šçš„èƒ½æ•ˆä¼˜åŒ–ä¹‹ä¸€

âœ…Â **æœ¬æ¬¡æ¨è**

---

### 5) å±‚çº§ä½¿èƒ½é—¨æ§ï¼ˆç®€åŒ–ç‰ˆï¼‰
**æ·»åŠ æ—¶æœº**ï¼šV1 ä»»æ„é˜¶æ®µå³å¯ï¼ˆåŒæ­¥ enable/clockâ€‘enableï¼Œä¸ä¾èµ– CPUï¼‰

**åšæ³•**  
ä¸æ˜¯å¼‚æ­¥ç”µè·¯ï¼Œåªæ˜¯åŒæ­¥ä¸‹çš„ enable/clock-enableã€‚  
ç©ºé—²æ—¶å…³é—­ CIM/ADC/LIF çš„æ—¶é’Ÿæˆ–ä½¿èƒ½ï¼ŒèŠ‚èƒ½å¥½è®²æ•…äº‹ã€‚

**å¯¹åº”ç—›ç‚¹ï¼ˆæ¥è‡ª Excel ç»Ÿè®¡ï¼‰**

- å¤šç¯‡è®ºæ–‡æŒ‡å‡ºç©ºé—²åŠŸè€—é«˜ã€æ§åˆ¶é€»è¾‘å¤æ‚
- ä½ çš„é—¨æ§ç­–ç•¥æ˜¯ä½é£é™©çš„èŠ‚èƒ½äº®ç‚¹

âœ…Â **æœ¬æ¬¡æ¨è**

---

### âœ… V2 & V3ï¼ˆç­‰æ¨¡æ‹Ÿå® + RRAM æˆç†Ÿåå†ä¸Šï¼‰

**åŸåˆ™ï¼šä»·å€¼é«˜ï¼Œä½†é£é™©é«˜ã€å¼ºä¾èµ–æ¨¡æ‹Ÿ**

---

### 1) Programâ€‘andâ€‘Verify FSMï¼ˆè‡ªåŠ¨å†™â€‘è¯»â€‘éªŒï¼‰
**æ·»åŠ æ—¶æœº**ï¼šV2ï¼ˆæ¨¡æ‹Ÿå® + ADC ç¨³å®šä¹‹åï¼‰

**ä¸ºä»€ä¹ˆè¿™æ¡ä¸è¦æœ¬æ¬¡åšï¼Ÿ**

- 2D RRAM ä¸ç¨³å®šï¼Œéœ€è¦å†™å…¥åå†è¯»å‡ºéªŒè¯
- è¯¥æµç¨‹å¿…é¡»ä¾èµ–æ¨¡æ‹Ÿå® + ADC æ”¯æŒ
- æ¨¡æ‹Ÿå®æ²¡ç¨³å®šæ—¶åšä¼šå¢åŠ ç³»ç»Ÿé£é™©

**ä½ åšäº†ä»€ä¹ˆåˆ›æ–°ï¼Ÿ**

- **æŠŠå†™â€‘è¯»â€‘éªŒå¾ªç¯ä» CPU å¸è½½åˆ°ç¡¬ä»¶ FSM**
- è¿™æ˜¯ SoC å±‚é¢çš„ç³»ç»Ÿçº§åˆ›æ–°ç‚¹

**è§£å†³çš„ç—›ç‚¹ï¼ˆæ¥è‡ª Excel ç»Ÿè®¡ï¼‰**

- RRAM è¯¯ç ä¸æ¼‚ç§»æ˜¯å¤šä¸ªè®ºæ–‡çš„ç³»ç»Ÿçº§é—®é¢˜
- ä½ çš„ FSM ç›´æ¥å¯¹åº”â€œå¯é æ€§æ§åˆ¶è·¯å¾„â€

âœ…Â **å»ºè®®ä¸‹æ¬¡åš**

---

### 2) Reference Column + åŠ¨æ€æ ¡å‡†
**æ·»åŠ æ—¶æœº**ï¼šV2/V3ï¼ˆéœ€è¦å®ç‰©ç†ç»“æ„æ”¯æŒï¼Œå»ºè®®åœ¨æ··åˆé›†æˆå‰å®Œæˆï¼‰

**ä¸ºä»€ä¹ˆä¸è¦æœ¬æ¬¡åšï¼Ÿ**

- éœ€è¦æ¨¡æ‹Ÿå®ç‰©ç†ç»“æ„æ”¯æŒï¼ˆå¤š 1â€“2 åˆ—ï¼‰
- æ ¡å‡†æ¨¡å‹ä¸æ¨¡æ‹Ÿåç§»ç´§å¯†è€¦åˆ
- åˆæ¬¡æµç‰‡é£é™©æé«˜

**ä½ åšäº†ä»€ä¹ˆåˆ›æ–°ï¼Ÿ**

- **æ•°å­—ä¾§è‡ªåŠ¨åŠ¨æ€è¡¥å¿**
- ä½œä¸ºç³»ç»Ÿçº§é²æ£’æ€§åˆ›æ–°ç‚¹

**è§£å†³çš„ç—›ç‚¹ï¼ˆæ¥è‡ª Excel ç»Ÿè®¡ï¼‰**

- RRAM æ¼‚ç§»ä¸æ¸©æ¼‚å¯¼è‡´è¾“å‡ºä¸ç¨³å®š
- ä½ çš„æ–¹æ¡ˆç”¨äºé•¿æœŸå¯é æ€§

âœ…Â **å»ºè®®ä¸‹æ¬¡åš**

---

### 3) CPU å±‚é¢çš„åˆ›æ–°

#### âœ… åˆ›æ–°ç‚¹ Aï¼šä¿æŒæ—  FPUï¼Œç¦æ­¢æµ®ç‚¹è§£ç è·¯å¾„
**æ·»åŠ æ—¶æœº**ï¼šV1ï¼ˆE203 é›†æˆé˜¶æ®µå³å¯é…ç½®ï¼‰

**ç—›ç‚¹**ï¼šSNN/TinyML ä¸ç”¨æµ®ç‚¹ï¼Œä½†é€šç”¨ CPU çš„æµ®ç‚¹å•å…ƒé¢ç§¯å’ŒåŠŸè€—é«˜  
**åˆ›æ–°ç‚¹**ï¼šæ˜ç¡®é…ç½®ç¦ç”¨ FPUï¼Œå¹¶åœ¨èƒ½æ•ˆåˆ†æé‡Œè¯´æ˜â€œæ— æµ®ç‚¹ CPU è·¯çº¿â€  
**ä»·å€¼**ï¼šé¢ç§¯ä¸é™æ€åŠŸè€—é™ä½ï¼Œæ§åˆ¶è·¯å¾„æ›´ç®€å•  
**å¤‡æ³¨**ï¼šä½ å½“å‰é…ç½®å·²ç»æ—  FPUï¼Œå¯ä»¥ä½œä¸ºè®¾è®¡é€‰æ‹©å†™è¿›è®ºæ–‡ã€‚

---

#### âœ… åˆ›æ–°ç‚¹ Bï¼šåŸºäº NICE çš„ SNN ä¸“ç”¨ç®—æœ¯æŒ‡ä»¤
**æ·»åŠ æ—¶æœº**ï¼šV1 åæœŸæˆ– V2ï¼ˆE203 é›†æˆåå†åšï¼Œå·¥ä½œé‡è¾ƒå¤§ï¼‰

**ç—›ç‚¹**ï¼šSNN åœ¨ CPU ä¸Šåš bitâ€‘plane / popcount / threshold å¾ˆæ…¢  
**åˆ›æ–°ç‚¹**ï¼šåœ¨ E203 çš„ NICE æ¥å£åŠ ä¸“ç”¨ç®—æœ¯å•å…ƒ  
**ä»·å€¼**ï¼šé™ä½è½¯ä»¶å¼€é”€ï¼Œæé«˜åå/èƒ½æ•ˆ

---

#### âœ… åˆ›æ–°ç‚¹ Cï¼šè½»é‡ SIMD / packed æ“ä½œ
**æ·»åŠ æ—¶æœº**ï¼šV2ï¼ˆE203 é›†æˆåï¼Œä½œä¸ºæ‰©å±•æ‰§è¡Œå•å…ƒï¼‰

**ç—›ç‚¹**ï¼šå¤§é‡ä½æ¯”ç‰¹è¿ç®—ï¼Œæ™®é€š 32â€‘bit ALU æ•ˆç‡ä½  
**åˆ›æ–°ç‚¹**ï¼šæ”¯æŒ 8bit/4bit packed è¿ç®—  
**ä»·å€¼**ï¼šåŒé¢‘ååæ›´é«˜

---

#### âœ… åˆ›æ–°ç‚¹ Dï¼šç»“æœ buffer + ä¸­æ–­æœºåˆ¶
**æ·»åŠ æ—¶æœº**ï¼šV1 åæœŸæˆ– V2ï¼ˆE203 é›†æˆä¸”ä¸­æ–­é€šè·¯æ‰“é€šåï¼‰

**ç—›ç‚¹**ï¼šCPU è½®è¯¢ ADC/FIFO æµªè´¹èƒ½é‡  
**åˆ›æ–°ç‚¹**ï¼šç»“æœç¼“å†²åŒº + å®Œæˆä¸­æ–­  
**ä»·å€¼**ï¼šé™ä½æ§åˆ¶èƒ½è€—ï¼Œæé«˜ç³»ç»Ÿæ•ˆç‡

---

#### âœ… åˆ›æ–°ç‚¹ Eï¼šå…³é—­ä¸å¿…è¦çš„å¤šå‘¨æœŸå•å…ƒ
**æ·»åŠ æ—¶æœº**ï¼šV1ï¼ˆE203 é›†æˆé˜¶æ®µå¯ç›´æ¥é…ç½®è£å‰ªï¼‰

**ç—›ç‚¹**ï¼šMul/Div å¯¹ SNN ä»·å€¼ä¸å¤§  
**åˆ›æ–°ç‚¹**ï¼šå…³æ‰ MULDIV æˆ–å…±äº«æ¨¡å¼  
**ä»·å€¼**ï¼šå‡å°‘é¢ç§¯ä¸åŠ¨æ€åŠŸè€—

---

### 4) æƒé‡å¤ç”¨ï¼ˆè¿ç§»æ€è·¯ï¼‰
**æ·»åŠ æ—¶æœº**ï¼šV2ï¼ˆDMA/æƒé‡ Buffer è·¯å¾„ç¨³å®šåå†åšç¼“å­˜ä¼˜åŒ–ï¼‰

**åŸå§‹æ¥æºï¼ˆCâ€‘DNNï¼‰ï¼š**Â å¯„å­˜å™¨ç¼“å­˜æƒé‡çª—å£ï¼ŒèŠ‚çœ SRAM è®¿é—®èƒ½è€—  
**ä½ çš„è¿ç§»æ–¹å¼ï¼š**

- CIM æƒé‡åœ¨å®é‡Œï¼Œä¸é€‚åˆç…§æ¬
- ä½†ä½ å¯ä»¥åš **ç¥ç»å…ƒçŠ¶æ€/é˜ˆå€¼çš„å¯„å­˜å™¨ç¼“å­˜**
- **V2 å¯åš**ï¼ŒV1 åªå†™â€œå¯å‘æ¥æºâ€å³å¯

---

### 5) æ•°é”ç›¸ï¼ˆæ•°å­—PLLï¼‰
**æ·»åŠ æ—¶æœº**ï¼šV2/V3ï¼ˆå¤šæ—¶é’ŸåŸŸæˆ–ä½åŠŸè€—åŠ¨æ€è°ƒé¢‘éœ€æ±‚å‡ºç°åå†åšï¼‰

**ç—›ç‚¹**ï¼šå›ºå®šæ—¶é’Ÿå¯¼è‡´ç©ºé—²åŠŸè€—æµªè´¹ï¼ŒADC/æ§åˆ¶é€»è¾‘å¯¹æ—¶é’Ÿé¢‘ç‡éœ€æ±‚ä¸ä¸€è‡´  
**åˆ›æ–°ç‚¹**ï¼šå¼•å…¥æ•°å­—PLLï¼Œå®ç°å·¥ä½œ/ç©ºé—²åŒé¢‘æˆ–å¤šæ—¶é’ŸåŸŸååŒ  
**ä»·å€¼**ï¼šé™ä½åŠ¨æ€åŠŸè€—ï¼Œæå‡ç³»ç»Ÿé¢‘ç‡çµæ´»æ€§ä¸å¯æ‰©å±•æ€§

## ä¸‰ã€å½“å‰V1ç‰ˆæœ¬çš„å†…éƒ¨è¿­ä»£æ€è·¯

### V1 æ”¹è¿›è·¯çº¿

  

> **æ³¨æ„**ï¼šæœ¬æ–‡ä»¶ä¸ºæ—©æœŸè§„åˆ’è‰ç¨¿ã€‚æ­£å¼çš„æ—¶é—´è§„åˆ’å’Œå­¦ä¹ è·¯å¾„è¯·å‚è§ï¼š

> - [doc/07_tapeout_schedule.md](doc/07_tapeout_schedule.md) - **æµç‰‡æ—¶é—´è§„åˆ’ï¼ˆV1å®Œæ•´è·¯çº¿å›¾ï¼‰**

> - [doc/06_learning_path.md](doc/06_learning_path.md) - **å­¦ä¹ è·¯å¾„ï¼ˆæ–°æ‰‹å¿…è¯»ï¼‰**

### ğŸ“Š å½“å‰ MVP vs V1 è®¾è®¡æ–‡æ¡£å¯¹æ¯”

  

| æ¨¡å—ç¼–å· | V1 è®¾è®¡è¦æ±‚ | å½“å‰ MVP çŠ¶æ€ | å·®è· |

|---------|-------------|---------------|------|

| â‘  | RISC-V Core (èœ‚é¸Ÿ E203) | âŒ æ— ï¼ŒTBæ¨¡æ‹Ÿ | ğŸ”´ æ–°å¢ |

| â‘¡ | æŒ‡ä»¤ SRAM 16KB | âœ… æœ‰ (16384B) | âœ… åŒ¹é… |

| â‘¢ | æ•°æ® SRAM 16KB | âœ… æœ‰ (16384B) | âœ… åŒ¹é… |

| â‘£ | æƒé‡ Buffer 16KB | âš ï¸ æœ‰ weight_sramï¼Œä½†éç‹¬ç«‹ Buffer | ğŸŸ¡ æ”¹é€  |

| â‘¤ | DMA å¼•æ“ | âœ… æœ‰ | ğŸŸ¡ éœ€æ‰©å±•ç›®æ ‡ |

| â‘¥ | å¯„å­˜å™¨ Bank | âœ… æœ‰ | âœ… åŸºæœ¬åŒ¹é… |

| â‘¦ | SPI æ§åˆ¶å™¨ (è¿Flash) | âŒ ä»… stub | ğŸ”´ æ–°å¢ |

| â‘§ | UART æ§åˆ¶å™¨ (ä¸PCé€šä¿¡) | âŒ ä»… stub | ğŸ”´ æ–°å¢ |

| â‘¨ | JTAG æ¥å£ | âŒ ä»… stub | ğŸŸ¡ å¯åæœŸ |

| â‘© | è¾“å…¥ Spike FIFO 256Ã—64bit | âœ… æœ‰ | âœ… åŒ¹é… |

| â‘ª | è¾“å‡º Spike FIFO 256Ã—4bit | âœ… æœ‰ | âœ… åŒ¹é… |

| â‘« | CIM é˜µåˆ—æ§åˆ¶å™¨ | âœ… æœ‰ | âœ… åŒ¹é… |

| â‘¬ | DAC æ§åˆ¶å™¨ | âœ… æœ‰ | âœ… åŒ¹é… |

| â‘­ | ADC æ§åˆ¶å™¨ | âœ… æœ‰ | âœ… åŒ¹é… |

| â‘® | CIM Macro é»‘ç›’ | âœ… æœ‰ | âœ… åŒ¹é… |

| â‘¯ | æ•°å­—ç¥ç»å…ƒ (10Ã—LIF) | âœ… æœ‰ | âœ… åŒ¹é… |

| - | ç³»ç»Ÿæ€»çº¿ | bus_simple_if | ğŸ”´ éœ€å‡çº§ AXI |

  

---

  

### ğŸ¯ éœ€è¦æ”¹è¿›çš„ 6 ä¸ªæ–¹é¢ï¼ˆæŒ‰ä¼˜å…ˆçº§æ’åºï¼‰

  

### **æ”¹è¿› 1ï¼šUART æ§åˆ¶å™¨** ğŸŸ¢ ä¼˜å…ˆçº§æœ€é«˜

**åŸå› **ï¼šV1 çš„æ ¸å¿ƒæ•°æ®æµæ˜¯ `PC â†’ UART â†’ CPU â†’ SRAM`ï¼Œæ²¡æœ‰ UART å°±æ— æ³•ä¸å¤–éƒ¨é€šä¿¡

**å½“å‰çŠ¶æ€**ï¼š`uart_stub.sv` åªæ˜¯ç©ºå£³

**æ·»åŠ æ—¶æœº**ï¼šé˜¶æ®µ 1ï¼ˆç°åœ¨å°±å¯ä»¥åšï¼Œä¸ä¾èµ– CPU/AXIï¼›å¯å…ˆç”¨ TB éªŒè¯æ”¶å‘ï¼‰


**éœ€è¦å®ç°**ï¼š

```

rtl/periph/uart_ctrl.sv Â â† æ›¿æ¢ uart_stub.sv

â”œâ”€â”€ æ³¢ç‰¹ç‡é…ç½® (115200 default)

â”œâ”€â”€ TX FIFO + å‘é€FSM

â”œâ”€â”€ RX FIFO + æ¥æ”¶FSM

â””â”€â”€ å¯„å­˜å™¨æ¥å£ (DATA, STATUS, CTRL)

```

  

**å·¥ä½œé‡**ï¼š~200 è¡Œï¼Œéš¾åº¦ â­â­

  

---

  

### **æ”¹è¿› 2ï¼šSPI æ§åˆ¶å™¨** ğŸŸ¢ ä¼˜å…ˆçº§é«˜

**åŸå› **ï¼šå¯åŠ¨è·¯å¾„æ˜¯ `Flash â†’ SPI â†’ DMA â†’ æŒ‡ä»¤SRAM`ï¼Œæ²¡æœ‰ SPI æ— æ³•åŠ è½½å›ºä»¶

  

**å½“å‰çŠ¶æ€**ï¼š`spi_stub.sv` åªæ˜¯ç©ºå£³

**æ·»åŠ æ—¶æœº**ï¼šé˜¶æ®µ 2ï¼ˆç°åœ¨å°±å¯ä»¥åšï¼Œä¸ä¾èµ– CPU/AXIï¼›ä¸ UART å¯å¹¶è¡Œï¼‰

  

**éœ€è¦å®ç°**ï¼š

```

rtl/periph/spi_ctrl.sv Â â† æ›¿æ¢ spi_stub.sv

â”œâ”€â”€ SPI Master æ¨¡å¼

â”œâ”€â”€ æ”¯æŒ Mode 0/3

â”œâ”€â”€ CS/CLK/MOSI/MISO æ§åˆ¶

â”œâ”€â”€ TX/RX FIFO

â””â”€â”€ å¯„å­˜å™¨æ¥å£

```

  

**å·¥ä½œé‡**ï¼š~250 è¡Œï¼Œéš¾åº¦ â­â­

  

---

  

### **æ”¹è¿› 3ï¼šDMA å¼•æ“æ‰©å±•** ğŸŸ¡ ä¼˜å…ˆçº§ä¸­

**åŸå› **ï¼šV2 éœ€è¦ DMA æ”¯æŒå¤šä¸ªç›®æ ‡ï¼ˆInput FIFO / æƒé‡ Buffer / SRAMï¼‰

  

**å½“å‰çŠ¶æ€**ï¼šåªæ”¯æŒ `data_sram â†’ input_fifo`

**æ·»åŠ æ—¶æœº**ï¼šé˜¶æ®µ 3ï¼ˆä¾èµ– SPI ä½œä¸ºæ•°æ®æºï¼›ä¸ä¾èµ– CPUï¼‰

  

**éœ€è¦æ‰©å±•**ï¼š

```systemverilog

// dma_engine.sv ä¿®æ”¹

// æ–°å¢ DMA_DST_SEL å¯„å­˜å™¨

localparam DST_INPUT_FIFO Â = 2'b00; Â // å½“å‰å·²æœ‰

localparam DST_WEIGHT_BUF Â = 2'b01; Â // æ–°å¢

localparam DST_INSTR_SRAM Â = 2'b10; Â // æ–°å¢ (ä»SPIåŠ è½½å›ºä»¶)

```

  

**å·¥ä½œé‡**ï¼š~100 è¡Œä¿®æ”¹ï¼Œéš¾åº¦ â­â­

  

---

  

### **æ”¹è¿› 4ï¼šæ€»çº¿å‡çº§ (AXI-Lite)** ğŸ”´ ä¼˜å…ˆçº§ä¸­

**åŸå› **ï¼šE203 ä½¿ç”¨ AXI æ¥å£ï¼Œå½“å‰ `bus_simple_if` ä¸å…¼å®¹

  

**å½“å‰çŠ¶æ€**ï¼šè‡ªå®šä¹‰ç®€åŒ–æ€»çº¿

**æ·»åŠ æ—¶æœº**ï¼šé˜¶æ®µ 4ï¼ˆå¿…é¡»åœ¨ E203 é›†æˆä¹‹å‰å®Œæˆï¼‰

  

**éœ€è¦å®ç°**ï¼š

```

rtl/bus/axi_lite_if.sv Â  Â  Â  â† æ–°å¢ AXI-Lite æ¥å£å®šä¹‰

rtl/bus/axi_interconnect.sv Â â† æ›¿æ¢ bus_interconnect.sv

rtl/bus/axi2simple_bridge.sv â† å¯é€‰ï¼šæ¡¥æ¥ç°æœ‰slave

```

  

**ç­–ç•¥é€‰æ‹©**ï¼š

- **æ–¹æ¡ˆA**ï¼šå…¨éƒ¨ slave æ”¹æˆ AXI æ¥å£ï¼ˆå·¥ä½œé‡å¤§ï¼‰

- **æ–¹æ¡ˆB**ï¼šinterconnect å†…éƒ¨è½¬æ¢ï¼Œslave ä¿æŒ simple æ¥å£ï¼ˆæ¨èï¼‰

  

**å·¥ä½œé‡**ï¼š~400 è¡Œï¼Œéš¾åº¦ â­â­â­

  

---

  

### **æ”¹è¿› 5ï¼šRISC-V Core é›†æˆ (E203)** ğŸ”´ ä¼˜å…ˆçº§ä½ï¼ˆæœ€ååšï¼‰ï¼ˆè¦å¯¹é¢ç§¯è¿›è¡Œå‹ç¼©ï¼‰

**åŸå› **ï¼šéœ€è¦å…ˆå®Œæˆæ€»çº¿å‡çº§ï¼Œå¦åˆ™æ— æ³•è¿æ¥

**æ·»åŠ æ—¶æœº**ï¼šé˜¶æ®µ 5ï¼ˆAXI-Lite å®Œæˆä¹‹åï¼›ä¾èµ–å‰é¢ 1â€“4 é˜¶æ®µæ‰“åº•ï¼‰

é…ç½®ç²¾ç®€
|å…³ cache / MULDIV / debug / optional CSR
âœ… è¿™ä¹Ÿæ˜¯â€œå‡å®ä½“â€çš„æ ¸å¿ƒæ‰‹æ®µ

**æ­¥éª¤**ï¼š

```

1. ä¸‹è½½ E203 RTLï¼šhttps://github.com/SI-RISCV/e200_opensource

2. é›†æˆåˆ°é¡¶å±‚ï¼Œè¿æ¥ AXI æ€»çº¿

3. ç¼–å†™å¯åŠ¨ä»£ç  (bootloader)

4. ç¼–å†™é©±åŠ¨ç¨‹åº (Cä»£ç æ§åˆ¶DMAã€è¯»å†™å¯„å­˜å™¨)

```

  

**å·¥ä½œé‡**ï¼š~500 è¡Œé›†æˆ + å›ºä»¶å¼€å‘ï¼Œéš¾åº¦ â­â­â­â­

  

---

  

### **æ”¹è¿› 6ï¼šJTAG è°ƒè¯•æ¥å£** ğŸŸ¢ ä¼˜å…ˆçº§æœ€ä½

**åŸå› **ï¼šE203 è‡ªå¸¦ JTAGï¼Œé›†æˆ Core æ—¶ä¸€å¹¶å¤„ç†å³å¯

  

**å½“å‰çŠ¶æ€**ï¼š`jtag_stub.sv` ç©ºå£³

**æ·»åŠ æ—¶æœº**ï¼šé˜¶æ®µ 5ï¼ˆä¸ E203 é›†æˆåŒæ­¥å¤„ç†ï¼‰

  

**å¤„ç†æ–¹å¼**ï¼šé›†æˆ E203 æ—¶ç›´æ¥ä½¿ç”¨å…¶ JTAG æ¨¡å—

  

---

  

### ğŸ“‹ å»ºè®®çš„æ”¹è¿›é¡ºåº

```

1. AXI-LiteÂ åŸºç¡€éª¨æ¶å…ˆä¸Š
    - å…ˆåšÂ axi_lite_if + interconnect + axi2simple_bridgeï¼Œç”¨ TB master éªŒè¯è¯»å†™é€šè·¯ã€‚
    - åŸå› ï¼šE203Â åæ¥å…¥éƒ½ä¾èµ–å®ƒã€‚
2. UART
    - å…ˆå®ç°æœ€å°å¯ç”¨ï¼ˆTX/RX + çŠ¶æ€å¯„å­˜å™¨ï¼‰ï¼Œç”¨äºåç»­ bring-up æ‰“å°æ—¥å¿—ã€‚
3. SPI
    - å…ˆåš Flash è¯»è·¯å¾„ï¼ˆè¯» ID + è¿ç»­è¯»ï¼‰ï¼Œæš‚ä¸è¿½æ±‚å¤æ‚æ¨¡å¼ã€‚
    - ä¸º boot/data load åšå‡†å¤‡ã€‚
4. DMAÂ æ‰©å±•
    - å…ˆæ‰“é€šÂ SPI -> SRAMï¼Œå†Â SRAM -> input_fifoã€‚
    - æ¯æ¡è·¯å¾„å•ç‹¬å†™ TBï¼Œç¡®è®¤ done/err/busyã€‚
5. E203Â æœ€åæ¥å…¥

- å…ˆè·‘æœ€å°å›ºä»¶ï¼šUART æ‰“å°Â ->Â SPI è¯»Â ->Â DMA æ¬è¿ã€‚
- è¿™æ ·å‡ºé—®é¢˜å®¹æ˜“å®šä½ï¼ˆä¸æ˜¯å…¨ç³»ç»Ÿä¸€èµ·ç‚¸ï¼‰ã€‚
```

---
### ğŸ”§ æ¯ä¸ªé˜¶æ®µçš„éªŒæ”¶æ ‡å‡†


| é˜¶æ®µ | éªŒæ”¶æ ‡å‡† |

|------|----------|

| 1 | TB é€šè¿‡ UART å‘é€ "Hello"ï¼Œèƒ½æ­£ç¡®å›æ˜¾ |

| 2 | TB é€šè¿‡ SPI è¯»å– Flash æ¨¡å‹ä¸­çš„æ•°æ® |

| 3 | DMA èƒ½ä» SPI æ¬æ•°æ®åˆ° SRAMï¼Œä» SRAM æ¬åˆ° Weight Buffer |

| 4 | ç”¨ AXI VIP æˆ–ç®€å• AXI Master TB å®Œæˆè¯»å†™æµ‹è¯• |

| 5 | E203 æ‰§è¡Œå›ºä»¶ï¼Œé€šè¿‡ UART è¾“å‡º "Boot OK"ï¼Œå®Œæˆä¸€æ¬¡æ¨ç† |

  

---

  

### ğŸ’¡ æˆ‘çš„å»ºè®®

  

1. **é˜¶æ®µ 1-2 å¯ä»¥å¹¶è¡Œå¼€å‘**ï¼ŒUART å’Œ SPI ç›¸äº’ç‹¬ç«‹

2. **é˜¶æ®µ 3 ä¾èµ–é˜¶æ®µ 2**ï¼Œå› ä¸ºéœ€è¦ SPI ä½œä¸º DMA çš„æ•°æ®æº

3. **é˜¶æ®µ 4-5 æ˜¯å¤§å·¥ç¨‹**ï¼Œå»ºè®®åœ¨å‰ 3 ä¸ªé˜¶æ®µç¨³å®šåå†è¿›è¡Œ

4. **å¦‚æœæ—¶é—´ç´§å¼ **ï¼Œå¯ä»¥å…ˆè·³è¿‡ SPIï¼Œç”¨ TB ç›´æ¥åˆå§‹åŒ– SRAM å†…å®¹ï¼ˆä»¿çœŸå¤Ÿç”¨ï¼‰

## FPGA æµ‹è¯•æµç¨‹

ä½ çš„ç†è§£å¤§æ–¹å‘å¯¹ï¼Œä½†æœ‰å‡ ä¸ªå…³é”®ç»†èŠ‚ï¼š

### 1. æ•´ä½“æµç¨‹

```
                        å¼€å‘æœº (PC)
                           â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                 â”‚                  â”‚
    â‘  Vivado          â‘¡ å›ºä»¶ç¼–è¯‘        â‘¢ è¿è¡Œ/è°ƒè¯•
    ç»¼åˆ+å®ç°          RISC-V GCC          UART ä¸²å£
    ç”Ÿæˆ bitstream     ç”Ÿæˆ .bin/.hex       è§‚å¯Ÿç»“æœ
         â”‚                 â”‚                  â”‚
         â–¼                 â–¼                  â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              FPGA æ¿                        â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚  â”‚E203   â”‚â”€â–ºâ”‚AXI   â”‚â”€â–ºâ”‚UARTâ”‚â”€â–ºâ”‚ TX pin  â”‚â”€â”€â”€â”€ PC ä¸²å£
    â”‚  â”‚CPU    â”‚  â”‚Lite  â”‚  â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚  â”‚       â”‚  â”‚ bus  â”‚â”€â–ºâ”Œâ”€â”€â”€â”€â”              â”‚
    â”‚  â”‚(ROMæœ‰ â”‚  â”‚      â”‚  â”‚SPI â”‚              â”‚
    â”‚  â”‚bootldrâ”‚  â”‚      â”‚â”€â–ºâ”œâ”€â”€â”€â”€â”¤              â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â”‚  â”‚DMA â”‚              â”‚
    â”‚             â”‚      â”‚â”€â–ºâ”œâ”€â”€â”€â”€â”¤              â”‚
    â”‚             â”‚      â”‚  â”‚SNN â”‚              â”‚
    â”‚             â”‚      â”‚  â”‚ctrlâ”‚              â”‚
    â”‚             â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”¬â”€â”€â”˜              â”‚
    â”‚                         â”‚                 â”‚
    â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
    â”‚              â”‚CIM behavioral model â”‚      â”‚
    â”‚              â”‚(FPGA ç”¨ BRAM æ¨¡æ‹Ÿ   â”‚      â”‚
    â”‚              â”‚ æƒé‡æŸ¥æ‰¾è¡¨)          â”‚      â”‚
    â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. å…·ä½“æ­¥éª¤

**Step 1: Vivado å·¥ç¨‹**

- æ‰€æœ‰ RTLï¼ˆå« E203ï¼‰åŠ å…¥ Vivado å·¥ç¨‹
- CIM macro blackbox ç”¨Â **FPGA ç‰ˆè¡Œä¸ºæ¨¡å‹**æ›¿ä»£ï¼ˆå½“å‰çš„ behavioral model å°±å¯ä»¥ç”¨ï¼Œæˆ–è€…ç”¨ BRAM åšæƒé‡ LUTï¼‰
- åŠ çº¦æŸæ–‡ä»¶ï¼ˆ.xdcï¼‰ï¼šæ—¶é’Ÿã€å¼•è„šåˆ†é…ã€UART TX/RX å¯¹åº”æ¿å­çš„ç‰©ç† pin
- ç»¼åˆ â†’ å®ç° â†’ ç”Ÿæˆ bitstream

**Step 2: å›ºä»¶ç¼–è¯‘**

```bash
# RISC-V äº¤å‰ç¼–è¯‘
riscv32-unknown-elf-gcc -march=rv32imc -O2 -o snn_test.elf snn_test.c
riscv32-unknown-elf-objcopy -O binary snn_test.elf snn_test.bin
```

**Step 3: çƒ§å½•ä¸è¿è¡Œ**

- æ–¹å¼ Aï¼š**JTAG åŠ è½½**Â â€” é€šè¿‡ JTAG æŠŠ bitstream çƒ§åˆ° FPGAï¼Œå†é€šè¿‡ JTAG/OpenOCD æŠŠå›ºä»¶å†™å…¥ SRAM
- æ–¹å¼ Bï¼š**UART Bootloader**Â â€” E203 ROM é‡Œæ”¾ä¸€ä¸ªå° bootloaderï¼Œä¸Šç”µåé€šè¿‡ UART æ¥æ”¶ .bin æ–‡ä»¶å†™å…¥ SRAMï¼Œç„¶åè·³è½¬æ‰§è¡Œ
- æ–¹å¼ Cï¼ˆæœ€ç®€å•ï¼‰ï¼š**å›ºä»¶ç›´æ¥æ‰“åŒ…è¿› bitstream**Â â€” ç”¨Â `$readmemh`Â æŠŠ .hex æ–‡ä»¶é¢„åŠ è½½åˆ° SRAM çš„åˆå§‹å€¼ï¼Œè¿™æ · FPGA ä¸€ä¸Šç”µå°±ç›´æ¥è¿è¡Œï¼Œä¸éœ€è¦é¢å¤–åŠ è½½æ­¥éª¤

**Step 4: è§‚å¯Ÿç»“æœ**

- UART è¾“å‡ºæ¨ç†ç»“æœåˆ° PC ä¸²å£ç»ˆç«¯
- Vivado ILAï¼ˆé›†æˆé€»è¾‘åˆ†æä»ªï¼‰æŠ“å†…éƒ¨æ³¢å½¢ï¼Œæ›¿ä»£ä»¿çœŸé‡Œçš„Â `$display`
- å¯ä»¥å¯¹æ¯”ï¼šFPGA è·‘å‡ºæ¥çš„ spike ç»“æœ vs RTL ä»¿çœŸç»“æœ vs Python æ¨¡å‹ç»“æœ

### 3. CIM macro åœ¨ FPGA ä¸Šæ€ä¹ˆå¤„ç†

è¿™æ˜¯å…³é”®é—®é¢˜â€”â€”RRAM é˜µåˆ—æ— æ³•åœ¨ FPGA ä¸Šå®ç°ã€‚ä¸¤ç§æ–¹æ¡ˆï¼š

|æ–¹æ¡ˆ|åšæ³•|ä¼˜åŠ£|
|---|---|---|
|**A. è¡Œä¸ºæ¨¡å‹**|ç›´æ¥ç”¨å½“å‰Â `cim_macro_blackbox.sv`Â çš„ä»¿çœŸæ¨¡å‹ï¼ˆå»æ‰Â `ifdef SYNTHESIS`ï¼‰|æœ€ç®€å•ï¼Œä½†ä¸èƒ½éªŒè¯çœŸå®æƒé‡|
|**B. BRAM æƒé‡è¡¨**|ç”¨ FPGA BRAM å­˜ä¸€ä»½é¢„è®­ç»ƒå¥½çš„ 10Ã—64 æƒé‡çŸ©é˜µï¼ŒCIM è®¡ç®—æ”¹ä¸ºçŸ©é˜µä¹˜æ³•æŸ¥è¡¨|æ›´çœŸå®ï¼Œèƒ½è·‘çœŸå® MNIST å›¾ç‰‡éªŒè¯å‡†ç¡®ç‡|

**å»ºè®®ç”¨æ–¹æ¡ˆ B**ï¼ŒæŠŠ Python è®­ç»ƒå¥½çš„é‡åŒ–æƒé‡ï¼ˆ4-bit, 10Ã—64ï¼‰å¯¼å‡ºä¸º `.hex` æ–‡ä»¶ï¼ŒåŠ è½½åˆ° BRAMï¼ŒFPGA ä¸Šçš„ CIM æ¨¡å—åšæ•°å­—ä¹˜ç´¯åŠ ã€‚è¿™æ ·ä½ èƒ½åœ¨ FPGA ä¸ŠéªŒè¯ï¼š

- å®Œæ•´æ•°æ®é€šè·¯æ­£ç¡®æ€§
- çœŸå® MNIST å›¾ç‰‡çš„åˆ†ç±»ç»“æœ
- UART ä¸Šä½æœºäº¤äº’

å”¯ä¸€éªŒä¸äº†çš„æ˜¯æ¨¡æ‹Ÿç‰¹æ€§ï¼ˆIR dropã€ADC éç†æƒ³æ€§ã€RRAM å˜å¼‚æ€§ï¼‰ï¼Œè¿™äº›å¿…é¡»ç­‰æµç‰‡åæµ‹ã€‚

### 4. ä½ éœ€è¦å‡†å¤‡çš„ FPGA æ¿å­

é€‰ä¸€å—æœ‰ UART æ¥å£çš„ Xilinx FPGA å³å¯ï¼Œå¸¸è§é€‰æ‹©ï¼š

- **Digilent Arty A7**Â (Artix-7) â€” æœ€æµè¡Œçš„ RISC-V å¼€å‘æ¿ï¼ŒE203 å®˜æ–¹å°±æœ‰ Arty ç§»æ¤
- **Nexys A7**Â â€” èµ„æºæ›´å¤šï¼Œå¸¦æ›´å¤š IO

E203 å®˜æ–¹é¡¹ç›®ï¼ˆèœ‚é¸Ÿ E203ï¼‰å°±æœ‰ Arty A7 çš„å‚è€ƒè®¾è®¡ï¼Œå¯ä»¥ç›´æ¥å‚è€ƒå®ƒçš„å¼•è„šçº¦æŸå’Œæ—¶é’Ÿé…ç½®ã€‚

æ•´ä½“æ˜¯å‡†çš„ï¼Œèƒ½ç›´æ¥ç”¨ã€‚åªæœ‰ 3 ä¸ªç‚¹æˆ‘å»ºè®®ä½ ä¿®æ­£ä¸€ä¸‹å£å¾„ï¼Œé¿å…åé¢è¸©å‘ï¼š

1. â€œå»ºè®®ç”¨æ–¹æ¡ˆ Bï¼ˆBRAM æƒé‡è¡¨ï¼‰â€è¿™å¥è¦æ”¹æˆâ€œV1 bring-up å…ˆ Aï¼Œå† Bâ€  
- å…ˆç”¨è¡Œä¸ºæ¨¡å‹ A éªŒè¯ SoC æ§åˆ¶é“¾è·¯ï¼ˆæœ€å¿«ã€æœ€ç¨³ï¼‰ã€‚  
- å†ä¸Š B åšâ€œè¿‘çœŸå®ç®—æ³•â€éªŒè¯ã€‚  
- ä½ ç°åœ¨ç›®æ ‡æ˜¯å…ˆæŠŠç³»ç»Ÿè·‘é€šï¼Œä¸æ˜¯å…ˆè¿½ç®—æ³•ç²¾åº¦ã€‚

2. â€œE203 ROM é‡Œæ”¾ bootloaderâ€ä¸æ˜¯å¿…é¡»  
- å¯¹é¦–æ¬¡ FPGA è”è°ƒï¼Œæœ€çœäº‹æ˜¯ä»–è¯´çš„æ–¹å¼ Cï¼š`$readmemh` é¢„åŠ è½½ã€‚  
- JTAG/UART bootloader æ”¾åˆ°ç¬¬äºŒé˜¶æ®µå†åšï¼Œä¸ç„¶è°ƒè¯•é¢å¤ªå¤§ã€‚

3. â€œFPGA ä¸Š CIM åšæ•°å­—ä¹˜ç´¯åŠ â€è¦æ˜ç¡®è¿™æ˜¯æ›¿ä»£æ¨¡å‹ï¼Œä¸ç­‰ä»·æ¨¡æ‹Ÿå®  
- å¯éªŒè¯æ•°æ®æµ/æ§åˆ¶æµ/å›ºä»¶æµç¨‹ã€‚  
- ä¸å¯æ›¿ä»£æ¨¡æ‹Ÿéç†æƒ³ï¼ˆIR dropã€å™ªå£°ã€æ¼‚ç§»ï¼‰éªŒè¯ã€‚  
- è¿™ç‚¹ä½ ç»„ä¼šä¸Šè¦è®²æ¸…æ¥šï¼Œé¿å…åˆ«äººè¯¯è§£â€œFPGA å·²éªŒè¯ CIMâ€ã€‚

ç»“è®ºï¼šClaude è¿™ç‰ˆæµç¨‹å¯æ‰§è¡Œï¼ŒæŠ€æœ¯ä¸ŠåŸºæœ¬æ­£ç¡®ã€‚ä½ æŒ‰å®ƒåšæ²¡é—®é¢˜ï¼Œä½†å»ºè®®æ‰§è¡Œé¡ºåºç”¨â€œå…ˆé€šè·¯åç²¾åº¦â€çš„ä¸¤é˜¶æ®µç­–ç•¥ã€‚
## å››ã€çœ‹è®ºæ–‡çš„æ–¹æ³•
### 1) åªçœ‹ â€œSoC / ç³»ç»Ÿæ•°å­—éƒ¨åˆ†â€ çš„é˜…è¯»é¡ºåºï¼ˆä»ç³»ç»Ÿåˆ°ç»†èŠ‚ï¼‰

**ä¼˜å…ˆçº§ 1ï¼ˆç³»ç»Ÿçº§ SoC è§†è§’ï¼Œå¿…è¯»ï¼‰**

1. A_RISC-V_Neuromorphic_Micro-Controller_Unit_vMCU...pdf
2. DIANA_An_End-to-End_Hybrid_DIgital_and_ANAlog_Neural_Network_SoC...pdf
3. SENECA building a fully digital neuromorphic processor...pdf
4. Darwin__A neuromorphic hardware co-processor...pdfÂ /Â darwin3.pdf
5. ODIN (UCLouvain).pdf

**ä¼˜å…ˆçº§ 2ï¼ˆSoC é›†æˆ + èƒ½è€—è¡¨æ ¼æœ‰ä»·å€¼ï¼‰**  
6)Â ANP-I_A_28-nm_1.5-pJ_SOP...pdf  
7)Â C-DNN_An_Energy-Efficient...pdf  
8)Â A_73.53TOPS_W...SoC...pdf

> **æ³¨æ„**ï¼šCIM ç±»è®ºæ–‡ä½ åªå…³æ³¨**ç³»ç»Ÿçº§åŠŸè€—/æ•°æ®æ¬è¿/æ§åˆ¶/ç¼“å­˜ç»“æ„**ï¼Œè·³è¿‡å®ç”µè·¯ç»†èŠ‚ã€‚

**ä» 6/30 æµç‰‡çš„èŠ‚å¥æ¥çœ‹ï¼ŒæŠŠæˆªå›¾é‡Œçš„è¿™äº›æ–‡ç« åƒé€å°±å¤Ÿäº†**ï¼Œç„¶åå°±åº”è¯¥**å°½å¿«ç¡®å®šåˆ›æ–°ç‚¹å¹¶å¼€å§‹å·¥ç¨‹å®ç°**ï¼Œè€Œä¸æ˜¯æ— é™æ‰©å±•é˜…è¯»ã€‚

---

### ä¸ºä»€ä¹ˆâ€œè¯»è¿™äº›å°±å¤Ÿäº†â€

- ä½ ç°åœ¨çš„ç›®æ ‡æ˜¯Â **V1 å¯æµç‰‡ã€èƒ½è§£é‡Šã€èƒ½å†™è®ºæ–‡**
- ä½ è´Ÿè´£çš„æ˜¯Â **SoC æ•°å­—ç³»ç»Ÿéƒ¨åˆ†**
- æˆªå›¾é‡Œçš„æ–‡ç« å·²ç»è¦†ç›–äº†ï¼š
    - SoC æ¶æ„
    - ç³»ç»Ÿçº§èƒ½è€—ç“¶é¢ˆ
    - å…¸å‹ç³»ç»Ÿçº§è®¾è®¡æ€è·¯

ç»§ç»­åŠ è®ºæ–‡åªä¼š**å¢åŠ é˜…è¯»è´Ÿæ‹…ï¼Œä¸ä¸€å®šå¢åŠ åˆ›æ–°ç‚¹**ã€‚

---

### æ¨èèŠ‚å¥ï¼ˆæœ€ç°å®ï¼‰

### âœ… 1ï¼‰åªç²¾è¯»æˆªå›¾é‡Œçš„ 8 ç¯‡

é‡ç‚¹åªåšâ€œé—®é¢˜æç‚¼è¡¨â€ã€‚  
**æ¯ç¯‡åªè¦ 30â€“60 åˆ†é’Ÿ**ï¼Œä¸è¦é™·è¿›å»ã€‚

### âœ… 2ï¼‰ç”¨è¿™ 8 ç¯‡ç¡®å®š 2â€“3 ä¸ªåˆ›æ–°ç‚¹

å°±å¯ä»¥å¼€å§‹å·¥ç¨‹å®ç°äº†ã€‚

### âœ… 3ï¼‰åç»­å†è¡¥è¯»

å¦‚æœä½ å‘ç°åˆ›æ–°ç‚¹ä¸å¤Ÿå¼ºï¼Œ**å†è¡¥è¯»ä¸€ä¸¤ç¯‡**å³å¯ã€‚

---

### æˆ‘çš„å»ºè®®æ€»ç»“

âœ…Â **æ˜¯çš„ï¼šè¿™ 8 ç¯‡è¶³å¤Ÿæ”¯æ’‘ä½ ç¡®å®šåˆ›æ–°ç‚¹å¹¶å¼€å¹²**  
âœ…Â **ä¸è¦é™·åœ¨æ— æ­¢å¢ƒæ‰©å±•é˜…è¯»**  
âš ï¸ è‹¥åç»­å†™è®ºæ–‡å‘ç°å¼•ç”¨ä¸å¤Ÿï¼Œå†è¡¥ 1â€“2 ç¯‡

---

## äº”ã€æ–‡ç« å¿…è¦å‡†å¤‡

1. **é™é‡‡æ ·æ–¹å¼å¯¹æ¯”**ï¼šåˆ—å‡ºå¹³å‡æ± åŒ– / æœ€å¤§æ± åŒ– / åŒçº¿æ€§ / æœ€è¿‘é‚»ç­‰é™é‡‡æ ·æ–¹å¼ï¼Œç”¨ Python å»ºæ¨¡ä»¿çœŸå¯¹æ¯”å‡†ç¡®ç‡ï¼Œé€‰æ‹©å‡†ç¡®ç‡æœ€é«˜çš„ä¸€ç§ä½œä¸ºå›ºå®šé¢„å¤„ç†æ–¹æ¡ˆï¼Œå¹¶åœ¨æ–‡ä¸­è§£é‡Šé€‰æ‹©ç†ç”±ã€‚  
2. **ADC ä½æ•°è¯„ä¼°**ï¼šå»ºç«‹é‡åŒ–å»ºæ¨¡æµç¨‹ï¼Œæ‰«æ 8/10/12/14-bit ç­‰ä¸åŒ ADC ç²¾åº¦ï¼Œè¯„ä¼°å‡†ç¡®ç‡å˜åŒ–æ›²çº¿ï¼Œç¡®å®šâ€œæ»¡è¶³ç®—æ³•è¦æ±‚çš„æœ€ä½ ADC ä½æ•°â€ï¼Œå¹¶å†™å…¥ç³»ç»Ÿè®¾è®¡å‚æ•°é€‰æ‹©ä¾æ®ã€‚

## å„ Phase è¯¦è§£

### Phase 1ï¼šæ•°æ®å‡†å¤‡

```
MNIST åŸå›¾ 28Ã—28
    â†“ resizeï¼ˆåŒçº¿æ€§æ’å€¼ï¼‰
  8Ã—8 = 64 ç»´
    â†“ ä¿ç•™ä¸º [0, 255] æ•´æ•°
  ä½œä¸ºè¾“å…¥ï¼ˆä¸è¦å½’ä¸€åŒ–åˆ° floatï¼ï¼‰

åŸå› ï¼šåé¢ bit-plane åˆ†è§£éœ€è¦æ•´æ•°
```

---

### Phase 2ï¼šANN è®­ç»ƒï¼ˆfloat åŸºçº¿ï¼‰

```
ç½‘ç»œï¼šy = softmax(W Ã— x)
      W: [10, 64]ï¼ˆæƒé‡çŸ©é˜µï¼‰
      x: [64]ï¼ˆè¾“å…¥ï¼Œè¿™é‡Œå…ˆç”¨ float çš„ x/255.0ï¼‰
      biasï¼šå…³é—­ï¼ˆPyTorch: nn.Linear(64, 10, bias=False)ï¼‰

è®­ç»ƒåè®°å½•ï¼š
  - Wï¼ˆfloat æƒé‡ï¼‰
  - åŸºçº¿å‡†ç¡®ç‡ï¼ˆfloat ç²¾åº¦ä¸‹çš„å¤©èŠ±æ¿ï¼‰
```

è¿™ä¸€æ­¥å°±æ˜¯æ ‡å‡† PyTorch è®­ç»ƒï¼Œä¸æ¶‰åŠä»»ä½• SNN é€»è¾‘ã€‚
**æ³¨æ„**ï¼šè¿™é‡Œæ˜¾å¼å…³é—­ biasï¼Œæ˜¯ä¸ºäº†ä¸ Phase 3 çš„ç¡¬ä»¶ç­‰ä»·æ¨ç†ä¿æŒä¸€è‡´ï¼Œ
å¦åˆ™ Phase 2 ä¸ Phase 3 çš„ argmax ä¼šå› åç½®é¡¹ä¸åŒè€Œå¤±é…ã€‚

---

### Phase 3ï¼šSNN æ¨ç†ä»¿çœŸ â­æ ¸å¿ƒ

è¿™é‡Œè¦**ç²¾ç¡®æ¨¡æ‹Ÿä½ ç¡¬ä»¶åšçš„äº‹æƒ…**ã€‚æ¯ä¸€æ­¥éƒ½å¯¹åº”ä¸€ä¸ªç¡¬ä»¶æ¨¡å—ï¼š

```
è¾“å…¥åƒç´  x[i] âˆˆ [0,255]
    â†“
bit-plane åˆ†è§£ï¼ˆå¯¹åº”æ•°å­—ä¾§ TB å†™ data_sram çš„æ–¹å¼ï¼‰
    b[i][k] = (x[i] >> k) & 1    (k = 7,6,...,0, MSB first)
    â†“
å¯¹æ¯ä¸ª bit-plane kï¼ˆå…± 8 æ­¥ï¼‰ï¼š
    â†“
  CIM MACï¼ˆå¯¹åº” cim_macro_blackboxï¼‰
    mac[j] = Î£_i  b[i][k] Ã— W[j][i]     â† è¿™æ˜¯å®é™…çš„æ¨¡æ‹Ÿè®¡ç®—
    â†“
  â­ ADC é‡åŒ–ï¼ˆè¿™æ˜¯è¦æšä¸¾çš„ç‚¹ï¼‰
    mac_q[j] = quantize(mac[j], ADC_BITS)
    â†“
  LIF ç´¯åŠ ï¼ˆå¯¹åº” lif_neuronsï¼‰
    membrane[j] += mac_q[j] << k          â† æ•°å­—ä¾§ç²¾ç¡®ç´¯åŠ ï¼Œä¸é‡åŒ–
    â†“
8 æ­¥è·‘å®Œåï¼š
    åˆ†ç±»ç»“æœ = argmax(membrane[j])
```

---

### â­ å…³äº"å•å±‚ç²¾ç¡®ç­‰ä»·"çš„äº‹å®

å•å±‚ç½‘ç»œæœ‰ä¸€ä¸ªå¾ˆå¥½çš„ç‰¹æ€§ï¼Œå€¼å¾—æ³¨æ„ï¼š

```
ANN çš„è®¡ç®—ï¼š
  output[j] = Î£_i x[i] Ã— W[j][i]
            = Î£_i (Î£_k b[i][k] Ã— 2^k) Ã— W[j][i]
            = Î£_k 2^k Ã— (Î£_i b[i][k] Ã— W[j][i])
            = Î£_k 2^k Ã— mac_k[j]

â†• å®Œå…¨ç­‰ä»·ï¼ˆfloat ç²¾åº¦ä¸‹ï¼‰

SNN çš„è®¡ç®—ï¼š
  membrane[j] = Î£_k mac_k[j] << k
              = Î£_k mac_k[j] Ã— 2^k
```

**ç»“è®ºï¼šfloat ç²¾åº¦ä¸‹ SNN æ¨ç†ç»“æœå’Œ ANN å®Œå…¨ä¸€æ ·ã€‚**

æ‰€ä»¥ Phase 3 åœ¨ä¸é‡åŒ–æ—¶åº”è¯¥å¤ç° Phase 2 çš„å‡†ç¡®ç‡ã€‚å¦‚æœä¸ä¸€æ ·ï¼Œè¯´æ˜ä»£ç å†™é”™äº†ã€‚**è¿™æ˜¯ä½ çš„è‡ªåŠ¨æ ¡éªŒæœºåˆ¶ã€‚**

---

### Phase 4ï¼šé‡åŒ–å®éªŒ

```
æšä¸¾çŸ©é˜µï¼š

              ADC bit
              8    10   12   14
æƒé‡bit  4  [ ]  [ ]  [ ]  [ ]
         6  [ ]  [ ]  [ ]  [ ]
         8  [ ]  [ ]  [ ]  [ ]

æ¯æ ¼å¡«å…¥ï¼šæµ‹è¯•é›†å‡†ç¡®ç‡

æƒé‡é‡åŒ–æ–¹å¼ï¼š
  W_q[j][i] = round(W[j][i] Ã— 2^(W_bit-1)) / 2^(W_bit-1)
  ï¼ˆå…ˆç¡®è®¤å’Œæ¨¡æ‹Ÿå›¢é˜Ÿæƒé‡èŒƒå›´ï¼Œå†å®šå…·ä½“é‡åŒ–æ–¹å¼ï¼‰

ADC é‡åŒ–æ–¹å¼ï¼š
  æ»¡åå€¼ = 64 Ã— max(|W_q|)   â† æƒé‡æœ‰æ­£è´Ÿï¼Œéœ€è€ƒè™‘å…¨é‡ç¨‹
  step   = æ»¡åå€¼ / (2^ADC_BITS - 1)
  mac_q  = round(mac / step) Ã— step
  è¯´æ˜ï¼š
  - è‹¥ CIM æ”¯æŒåŒææ€§è¯»å‡ºï¼Œé‡åŒ–èŒƒå›´å¯è®¾ä¸º [-æ»¡åå€¼, +æ»¡åå€¼]ã€‚
  - è‹¥å®é™…é˜µåˆ—ä¸ºæ— ç¬¦å·ï¼Œéœ€è¦ä¸æ¨¡æ‹Ÿå›¢é˜Ÿç¡®è®¤ offset/mapping ç­–ç•¥åå†å®šé‡åŒ–èŒƒå›´ã€‚
```

**æ³¨æ„é‡åŒ–è¯¯å·®æ˜¯ç´¯ç§¯çš„ï¼š** æ¯å¸§ 8 ä¸ª bit-planeï¼Œæ¯æ¬¡ ADC é‡‡æ ·éƒ½å¼•å…¥è¯¯å·®ï¼Œ8 æ¬¡ç´¯åŠ åˆ° membraneã€‚å¦‚æœè·‘ 20 å¸§ï¼Œå°±æ˜¯ 160 æ¬¡ç´¯ç§¯ã€‚ä½ bit ADC çš„å½±å“ä¼šæ”¾å¤§ã€‚

---

### Phase 5ï¼šç»“è®ºè¾“å‡º

```
ä»çƒ­å›¾ä¸­æ‰¾ï¼š
  å‡†ç¡®ç‡å¼€å§‹æ˜æ˜¾ä¸‹é™çš„æ‹ç‚¹ â†’ å·¦è¾¹é‚£ä¸€æŒ¡å°±æ˜¯æœ€ä½å¯ç”¨ ADC bit

ä¾‹å¦‚å¦‚æœæ›²çº¿é•¿è¿™æ ·ï¼ˆå‡è®¾æƒé‡ 6-bitï¼‰ï¼š
  ADC 8-bit:  85%
  ADC 10-bit: 91%  â† æ¥è¿‘åŸºçº¿
  ADC 12-bit: 92%  â† åŸºçº¿é™„è¿‘
  ADC 14-bit: 92%  â† å’Œ 12 æ²¡åŒºåˆ«

ç»“è®ºï¼š10-bit å°±å¤Ÿï¼Œ12-bit ç•™è£•é‡

è¾“å‡ºç»™æ¨¡æ‹Ÿå›¢é˜Ÿï¼š
  - éœ€è¦çš„ ADC bit èŒƒå›´
  - å¯¹åº”çš„æƒé‡ä½æ•°å‡è®¾
  - å‡†ç¡®ç‡æ›²çº¿æˆªå›¾
```

---

## å·¥å…·æ ˆ

```
æ•°æ®ï¼štorchvision.datasets.MNIST
è®­ç»ƒï¼šPyTorchï¼ˆæ ‡å‡†ï¼‰
é‡åŒ–ä»¿çœŸï¼šNumPy å°±å¤Ÿï¼ˆPhase 3-4 ä¸éœ€è¦æ¢¯åº¦ï¼‰
ç”»å›¾ï¼šmatplotlib
```

---

## æ‰§è¡Œé¡ºåºå»ºè®®

```
å…ˆåšï¼šPhase 1 + Phase 2ï¼ˆæ ‡å‡†è®­ç»ƒï¼ŒåŠå¤©äº‹æƒ…ï¼‰
ç„¶åï¼šPhase 3ï¼ˆä¸é‡åŒ–ç‰ˆæœ¬ï¼ŒéªŒè¯å’ŒANNç­‰ä»·ï¼‰â† å¿…é¡»å…ˆè¿‡è¿™å…³
æœ€åï¼šPhase 4ï¼ˆæšä¸¾å®éªŒï¼‰
```

Phase 3 ä¸é‡åŒ–æ—¶å’Œ Phase 2 å‡†ç¡®ç‡ä¸€è‡´ï¼Œè¿™ä¸ªæ ¡éªŒè¿‡äº†ä½ æ‰èƒ½æ”¾å¿ƒåé¢é‡åŒ–å®éªŒçš„ç»“æœæ˜¯çœŸå®çš„ã€‚

æœ‰å“ªä¸ª Phase æƒ³æ·±å…¥ç»†åŒ–çš„ï¼Œè¯´ä¸€å£°



## å…­ã€è‹¥å¹²é—®é¢˜çš„ä¿®æ”¹

## 1ã€CPUå­˜åœ¨çš„æ„ä¹‰æ˜¯ï¼Ÿä¸å°±æ˜¯ä¸ªæ§åˆ¶å™¨å—ï¼ŸALUçš„ä½œç”¨æ˜¯ï¼Ÿ

1) è½¯ç¡¬ååŒé‡Œï¼Œâ€œè½¯â€åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ
ä½ è¿™ä¸ª SoC é‡Œï¼Œç¡¬ä»¶è´Ÿè´£è·‘æ•°æ®é“¾è·¯ï¼Œè½¯ä»¶è´Ÿè´£â€œé…ç½®ã€è°ƒåº¦ã€æ”¶ç»“æœâ€ã€‚
å…·ä½“åˆ°ä½ é¡¹ç›®ï¼Œè½¯ä»¶ï¼ˆE203 å›ºä»¶ï¼‰å¹²è¿™äº›äº‹ï¼š

è½¯ä»¶åšçš„äº‹

åˆå§‹åŒ–ä¸é…ç½®
å†™å¯„å­˜å™¨ï¼šTIMESTEPS / THRESHOLD / RESET_MODE / DMA_LEN_WORDS / DMA_SRC_ADDR
å–‚æ•°æ®
ä» UART/SPI/å¤–éƒ¨Flash è¯»å–è¾“å…¥å¸§
å†™å…¥ data_sram
å¯åŠ¨æ¨ç†æµç¨‹
å¯åŠ¨ DMA â†’ input_fifo â†’ DAC â†’ CIM â†’ ADC â†’ LIF
å–ç»“æœ & è§£é‡Š
è¯» OUT_FIFO_COUNT / OUT_FIFO_DATA
åšç®€å•åˆ†ç±»ï¼ˆä¾‹å¦‚ argmaxï¼‰
å‚æ•°å¯è°ƒ
åŒä¸€ç¡¬ä»¶ï¼Œæ¢é˜ˆå€¼/å¸§æ•°/ç¼–ç æ–¹å¼å³å¯è·‘ä¸åŒå®éªŒ
ç¡¬ä»¶åšçš„äº‹

DMA æ¬è¿
CIM æ§åˆ¶
ADC æ—¶åˆ†å¤ç”¨
LIF ç´¯åŠ ä¸ spike è¾“å‡º
âœ… è¿™å°±æ˜¯â€œè½¯ç¡¬ååŒâ€ï¼šç¡¬ä»¶æ˜¯â€œæµæ°´çº¿â€ï¼Œè½¯ä»¶æ˜¯â€œè°ƒåº¦å™¨ + é…ç½®å™¨ + ç»“æœè§£é‡Šå™¨â€ã€‚

2) CPU åœ¨ V1 é‡Œâ€œåªæ˜¯æ§åˆ¶å™¨â€ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜éœ€è¦ï¼Ÿ
éœ€è¦çš„ç†ç”±å¾ˆç°å®ï¼š

(1) å¯ç¼–ç¨‹æ€§
FSM å›ºå®šæ­»æµç¨‹ï¼Œä»»ä½•æ”¹åŠ¨éƒ½è¦æ”¹ RTLã€‚
CPU å¯ä»¥åªæ”¹å›ºä»¶ï¼Œä½ å°±èƒ½ï¼š

æ”¹é˜ˆå€¼
æ”¹ timesteps
æ”¹è¾“å…¥æ ¼å¼
æ”¹æ¨ç†æµç¨‹
(2) å¤–éƒ¨æ¥å£æ¡¥æ¢
ä½ è¦æ¥ UART/SPI/Flashï¼Œå¿…é¡»æœ‰ä¸€ä¸ªè½¯ä»¶å±‚èƒ½è§£ææ•°æ®å¹¶å†™å¯„å­˜å™¨ã€‚
æ²¡æœ‰ CPUï¼Œå°±å¾—é  FPGA æˆ–å¤–éƒ¨ MCU æ§åˆ¶ï¼Œå·¥ç¨‹å¤æ‚åº¦æ›´é«˜ã€‚

(3) ä¸º V2/V3 æ‰“åŸºç¡€
åé¢åˆ›æ–°ç‚¹ï¼ˆåŠ¨æ€æ ¡å‡† / DMAè°ƒåº¦ / æŒ‡ä»¤æ‰©å±•ï¼‰éƒ½éœ€è¦ CPU é…åˆ
V1 é›†æˆ CPU = ç»™åç»­ç‰ˆæœ¬ç•™æ¥å£

(4) è®ºæ–‡åˆç†æ€§
SoC è®ºæ–‡é‡Œå¿…é¡»æœ‰å¯ç¼–ç¨‹æ§åˆ¶è·¯å¾„ï¼Œå¦åˆ™å¾ˆéš¾è§£é‡Šâ€œç³»ç»Ÿçº§å¯å¤ç°â€ã€‚

3) åˆ›æ–°ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆéœ€è¦ CPU é…åˆï¼Ÿ
ä¸‹é¢æ˜¯ä½ ç°æœ‰åˆ›æ–°ç‚¹ä¸ CPU çš„å…³ç³»ï¼ˆå¯¹å¤–è§£é‡Šæœ€æ¸…æ¥šçš„ä¸€ç‰ˆï¼‰ï¼š

âœ… é€»è¾‘ 64Ã—16 æ˜ å°„
åˆ›æ–°ç‚¹ï¼šåœ°å€æ˜ å°„ç®€åŒ–ï¼Œé¿å…è½¯ä»¶å¤æ‚åˆ¤æ–­
CPUä½œç”¨ï¼šå›ºä»¶å†™æƒé‡/é…ç½®æ—¶ç›´æ¥ç”¨ shift è®¡ç®—åœ°å€

âœ… Shadow Buffer + ä¸­æ–­
åˆ›æ–°ç‚¹ï¼šADC ç»“æœé›†ä¸­ç¼“å­˜ï¼Œå‡å°‘è½®è¯¢
CPUä½œç”¨ï¼šCPU åªåœ¨ä¸­æ–­æ—¶è¯»æ•°æ®ï¼Œé™ä½åŠŸè€—

âœ… ç¨€ç–æ€§ç»Ÿè®¡
åˆ›æ–°ç‚¹ï¼šç¡¬ä»¶ç»Ÿè®¡è¾“å…¥ç¨€ç–åº¦
CPUä½œç”¨ï¼šCPU æ ¹æ®ç»Ÿè®¡å€¼è°ƒé˜ˆå€¼/è°ƒå¸§æ•°

âœ… æ´»åŠ¨æ£€æµ‹ + è®¡ç®—è·³è¿‡
åˆ›æ–°ç‚¹ï¼šæ— æ•ˆè¾“å…¥ä¸è§¦å‘æ¨ç†
CPUä½œç”¨ï¼šCPU è®¾å®šç­–ç•¥å¼€å…³ã€è¯»çŠ¶æ€åˆ¤æ–­

âœ… åç»­é«˜é˜¶ï¼ˆProgramâ€‘andâ€‘Verify / æ ¡å‡†ï¼‰
åˆ›æ–°ç‚¹ï¼šç¡¬ä»¶ FSM åšå†™â€‘è¯»â€‘éªŒ
CPUä½œç”¨ï¼šä¸‹å‘ç›®æ ‡æƒé‡/å®¹å·®ï¼Œæ¥æ”¶ done/err

4) åŠ  E203 åé¢ç§¯æ˜¯å¦è¿˜å¤Ÿï¼Ÿ
ç»“è®ºï¼šæœ‰æœºä¼šå¤Ÿï¼Œä½†è¦ä¿æŒâ€œä½é…â€é…ç½®ã€‚

ä½ ç°åœ¨çš„é…ç½®å·²ç»å‹åˆ°äº†ï¼š

instr_sramï¼š16KB
data_sramï¼š16KB
input_fifoï¼š256 æ·±åº¦
weight_sramï¼š16KBï¼ˆæš‚ç•™ï¼‰
åœ¨ 55nm / 1Ã—1â€¯mm å†…ï¼š

SRAM ä»æ˜¯æœ€å¤§é£é™©
E203 ä¸å¸¦ cache/MULDIV æ‰æœ‰å¸Œæœ›
å»ºè®®

E203ï¼šæ—  cache / æ—  MULDIV / æ—  FPU
weight_sramï¼šèƒ½åˆ å°±åˆ 
input_fifoï¼š256 å·²åˆç†ï¼ˆè¦†ç›–ä¸€æ¬¡æ€§çŒå…¥ 160 ä¸ª bit-planeï¼‰
æœ€ç»ˆæ˜¯å¦â€œå¤Ÿâ€ï¼Œä»éœ€è¦ SRAM macro é¢ç§¯æˆ–ç»¼åˆä¼°ç®—ç¡®è®¤ã€‚

E203 åœ¨ V1 é‡Œç¡®å®åƒæ§åˆ¶å™¨ï¼Œä½†å®ƒå¸¦æ¥çš„ä¸æ˜¯ç®—åŠ›ï¼Œè€Œæ˜¯å¯ç¼–ç¨‹æ€§ã€å¤–éƒ¨æ¥å£ã€å¤ç°èƒ½åŠ›ï¼Œä»¥åŠ V2/V3 åˆ›æ–°ç‚¹çš„åŸºç¡€ã€‚å¦‚æœä¸ç”¨ CPUï¼Œå°±å¾—é å¤–éƒ¨ç³»ç»Ÿæ§åˆ¶ï¼Œå·¥ç¨‹å¤æ‚åº¦æ›´é«˜ã€‚é¢ç§¯ä¸Šåªè¦ CPU ä½é… + SRAM ç¼©å°ï¼Œå°±æœ‰æœºä¼šå¡è¿› 1Ã—1â€¯mmï¼Œä½†å¿…é¡»ä»¥ SRAM macro é¢ç§¯ä¸ºå‡†

MCU vs å½“å‰ E203 çš„å¯¹æ¯”ï¼ˆå·¥ç¨‹è§†è§’ï¼‰
âœ… MCU æ–¹æ¡ˆçš„ä¼˜ç‚¹
é›†æˆåº¦é«˜
MCU é€šå¸¸è‡ªå¸¦ UART/SPI/Timer/ä¸­æ–­ç­‰ï¼Œçœ RTL å¼€å‘
ä¸Šæ‰‹å¿«
å›ºä»¶å’Œå¯åŠ¨é“¾è·¯æˆç†Ÿï¼Œè½¯ä»¶ç”Ÿæ€å®Œå–„
ç³»ç»Ÿç¨³å®š
ä¸€èˆ¬åŠŸèƒ½è¾¹ç•Œæ¸…æ™°ï¼Œè°ƒè¯•æˆæœ¬ä½
âš ï¸ MCU æ–¹æ¡ˆçš„ç¼ºç‚¹
å¯å®šåˆ¶æ€§å·®
å¾ˆéš¾åŠ ä½ è‡ªå·±çš„ SNN ä¸“ç”¨æŒ‡ä»¤/ç¡¬ä»¶ååŒ
æˆæƒä¸æˆæœ¬
å•†ä¸š MCU IP å¤šæ•°æ˜¯æˆæƒåˆ¶ï¼Œä¸å¥½æ‹¿åˆ°
é¢ç§¯/åŠŸè€—ä¸ä¸€å®šæ›´çœ
MCU å¾€å¾€åŒ…å«ä½ ç”¨ä¸åˆ°çš„åŠŸèƒ½
ä½ å½“å‰ E203 çš„ä¼˜åŠ¿
é«˜åº¦å¯è£å‰ª
å¯å…³ cache / MULDIV / debugï¼Œå‹é¢ç§¯
å¯æ‰©å±•
æœªæ¥å¯åŠ  NICE æŒ‡ä»¤ã€DMA è°ƒåº¦ç­‰
æ›´é€‚åˆâ€œç ”ç©¶å‹ SoCâ€
è®ºæ–‡é‡Œæ›´å¥½è®²â€œå¯ç¼–ç¨‹æ§åˆ¶è·¯å¾„ + ç¡¬ä»¶ååŒâ€
æ”¾åœ¨ä½ é¡¹ç›®é‡Œæ€ä¹ˆé€‰
V1 ç›®æ ‡æ˜¯æµç‰‡å¯è¡Œ + åŠŸèƒ½è·‘é€š
â†’ E203 ä½é… + ç®€åŒ–å¤–è®¾æœ€ç¨³
MCU åªæœ‰åœ¨â€œä½ ä¸æƒ³è‡ªå·±å†™å¤–è®¾/æ€»çº¿â€çš„æƒ…å†µä¸‹æ‰æ›´çœäº‹
ä½†ä½ ç°åœ¨å·²ç»åœ¨åš SoCï¼Œæ‰€ä»¥ MCU åè€Œä¼šé™åˆ¶ä½ 


ALU ä¸æ˜¯åšçŸ©é˜µè®¡ç®—çš„ï¼Œä½†å®ƒæ˜¯å›ºä»¶æ‰§è¡Œçš„åŸºç¡€ï¼šåœ°å€è®¡ç®—ã€å¯„å­˜å™¨é…ç½®ã€å¾ªç¯æ§åˆ¶ã€DMA å¯åŠ¨ã€æ•°æ®æ¬è¿éƒ½è¦ç”¨ ALUã€‚æ²¡æœ‰ ALU å°±ä¸æ˜¯ CPU äº†ï¼Œåªèƒ½é€€åŒ–æˆå›ºå®š FSMï¼Œçµæ´»æ€§æ²¡äº†

CPU ä¸æ˜¯ç®—åŠ›ä¸»è§’ï¼Œæ˜¯æ§åˆ¶é¢

E203 è´Ÿè´£åˆå§‹åŒ–ã€é…ç½®å¯„å­˜å™¨ã€DMA è°ƒåº¦ã€è¯»å–ç»“æœ

è¿™äº›éƒ½æ˜¯ ALU åœ¨åšçš„ï¼šåœ°å€åŠ å‡ã€å¾ªç¯è®¡æ•°ã€æ¡ä»¶åˆ¤æ–­
ç¡¬ä»¶ FSM å›ºå®šï¼ŒCPU çµæ´»

ä½ ä»Šå¤©æ”¹é˜ˆå€¼/å¸§æ•°/è¾“å…¥æ ¼å¼ï¼Œåªè¦æ”¹å›ºä»¶

æ²¡ ALU â†’ ä¸èƒ½å†™å›ºä»¶ â†’ åªèƒ½æ”¹ RTL/æµç‰‡
â€œæ²¡ç”¨åˆ°â€åªæ˜¯è¯¯è§£

ALU ä¸åš MACï¼Œä½†å®ƒæ˜¯ load/store + æ§åˆ¶æµçš„æ ¸å¿ƒ
åªè¦æœ‰å›ºä»¶ï¼ŒALU å°±ä¸€å®šåœ¨ç”¨

é¢ç§¯/åŠŸè€—æ‹…å¿ƒå¯ä»¥ä¼˜åŒ–

å…³æ‰ MULDIV/FPUã€å» cacheã€ç¼©å°å¯„å­˜å™¨ã€ä½é¢‘è¿è¡Œ
è®© CPU æˆä¸ºâ€œæœ€å°å¯ç¼–ç¨‹æ§åˆ¶å™¨


â€œæ˜¯çš„ï¼Œå®ƒåœ¨ V1 é‡Œä¸»è¦æ˜¯æ§åˆ¶å™¨ï¼Œä½†å®ƒæ˜¯å¯ç¼–ç¨‹æ§åˆ¶å™¨ï¼Œä¸æ˜¯å›ºå®š FSMã€‚å¯ç¼–ç¨‹æ„å‘³ç€æµç¨‹å¯æ”¹ã€å‚æ•°å¯è°ƒã€å®éªŒå¯å¤ç°ï¼Œè¿™æ˜¯ç³»ç»Ÿçº§ SoC å¿…é¡»çš„ã€‚â€

å±•å¼€ç‰ˆï¼ˆæ›´ç¨³ï¼‰

æ§åˆ¶å™¨â‰ CPU

FSM å›ºå®šæµç¨‹ï¼Œæ”¹ä¸€æ¬¡å°±è¦æ”¹ RTL
CPU æ˜¯å¯ç¼–ç¨‹æ§åˆ¶å™¨ï¼Œå›ºä»¶å¯éšæ—¶æ›´æ–°
ç§‘ç ”éœ€è¦å¯é‡å¤æ€§å’Œå¯è°ƒæ€§

ä½ è¦æ”¹é˜ˆå€¼ã€å¸§æ•°ã€ç¼–ç æ–¹å¼ã€DMA ç­–ç•¥
è¿™äº›éƒ½é è½¯ä»¶æ”¹ï¼Œä¸ç”¨åŠ¨ç¡¬ä»¶
ä¸º V2/V3 æå‰é“ºè·¯

åç»­åˆ›æ–°ç‚¹ï¼ˆåŠ¨æ€æ ¡å‡†ã€ç¨‹åºåŒ–è°ƒåº¦ã€NICE æŒ‡ä»¤ï¼‰éƒ½è¦ CPU
ç³»ç»Ÿçº§åˆç†æ€§

SoC è®ºæ–‡å¿…é¡»æœ‰å¯ç¼–ç¨‹æ§åˆ¶é¢
å¦åˆ™åªæ˜¯â€œç¡¬æ ¸åŠ é€Ÿå™¨â€ï¼Œä¸æ˜¯å®Œæ•´ SoC
ä½ å¯ä»¥ç”¨è¿™å¥è¯ç»“æŸï¼š

â€œå®ƒç¡®å®æ‰¿æ‹…æ§åˆ¶å™¨è§’è‰²ï¼Œä½†å…³é”®å·®åˆ«æ˜¯å¯ç¼–ç¨‹ã€‚V1 æ˜¯æ§åˆ¶å™¨ï¼ŒV2/V3 æ‰æ˜¯ç³»ç»Ÿæ‰©å±•çš„æ ¸å¿ƒå…¥å£ã€‚â€


### 2ã€é¢ç§¯çš„ä¿®æ”¹

å¯¹ SRAM / FIFO ç­‰è¿›è¡Œäº†å‹ç¼©ã€‚

### 3ã€DMA & FIFO å­˜åœ¨çš„æ„ä¹‰ï¼Ÿ

âœ… å…³äºâ€œè¿™ç®—ä¸ç®— DMAï¼Ÿâ€
ç®—ï¼Œä½†æ˜¯â€œæœ€å°åŒ–å•é€šé“ DMAâ€ï¼Œä¸æ˜¯é€šç”¨ DMAã€‚

ä¸ºä»€ä¹ˆä»å« DMAï¼š

Directï¼šCPU åªé…ç½®å¯„å­˜å™¨ï¼Œä¸å‚ä¸é€å­—èŠ‚æ¬è¿
Memoryï¼šæºç«¯æ˜¯ data_sram
Accessï¼šDMA æœ‰ç‹¬ç«‹è¯»å£ï¼Œè‡ªåŠ¨æ¬è¿åˆ° input_fifo
å‡†ç¡®è¡¨è¿°ï¼š

â€œè¿™æ˜¯ data_sram â†’ input_fifo çš„å•é€šé“ DMA/æ¬è¿å¼•æ“ï¼Œç”¨äºå›ºå®šè·¯å¾„çš„æ•°æ®æ¬è¿ã€‚â€

âœ… æ•°æ®æµï¼ˆV1 å®Œæ•´ç‰ˆï¼‰
Flash â†’ SPI â†’ CPUï¼ˆE203ï¼‰â†’ data_sram â†’ DMA â†’ input_fifo â†’ DAC â†’ CIM â†’ ADC â†’ LIF â†’ output_fifo

å…·ä½“ç»†èŠ‚
1) Flash â†’ SPI
å¤–éƒ¨ Flash é€šè¿‡ SPI ä¸ SoC ç›¸è¿
CPU é€šè¿‡ SPI æ§åˆ¶å™¨å‘è¯»æŒ‡ä»¤ï¼ˆread / addrï¼‰
2) SPI â†’ CPU
SPI æ§åˆ¶å™¨æŠŠè¯»å‡ºçš„æ•°æ®æ”¾å…¥ RX å¯„å­˜å™¨/FIFO
CPU è½®è¯¢æˆ–ä¸­æ–­è¯»å–ï¼ˆPIOï¼‰
3) CPU â†’ data_sram
CPU æŠŠ SPI è¯»å‡ºçš„æ•°æ®å†™å…¥ data_sramï¼ˆå­˜åˆ°æ­£ç¡®åœ°å€ï¼‰
4) data_sram â†’ DMA â†’ input_fifo
CPU é…å¥½ DMA æºåœ°å€/é•¿åº¦
DMA å¼€å§‹æ¬è¿ bitâ€‘plane æ•°æ®åˆ° input_fifo
åç»­é“¾è·¯è‡ªåŠ¨è¿è¡Œ
âœ… æœªæ¥å‡çº§è·¯å¾„ï¼ˆæ›´â€œæ­£å®—â€çš„ DMAï¼‰
å¦‚æœä½ åç»­æ‰©å±• DMA æ”¯æŒ SPI â†’ SRAMï¼Œé‚£ä¹ˆä¼šå˜æˆï¼š

Flash â†’ SPI â†’ DMA â†’ data_sram â†’ DMA â†’ input_fifo

è¿™æ · CPU å‚ä¸æ›´å°‘ï¼Œæ›´ç¬¦åˆâ€œDMAâ€çš„æ¦‚å¿µã€‚

âœ… å…³äº FIFO çš„æ„ä¹‰  
FIFO åœ¨ V1 å®Œæ•´ç‰ˆæ˜¯å¿…é¡»çš„ï¼Œä¸æ˜¯å¯é€‰é¡¹ã€‚åŸå› æ˜¯ï¼š

é€Ÿç‡è§£è€¦  
DMA æ¬è¿æ˜¯çªå‘ï¼›CIM/ADC æ˜¯æ—¶åºé©±åŠ¨ã€é—´æ­‡æ¶ˆè´¹ï¼›FIFO å¸æ”¶é€Ÿåº¦ä¸åŒ¹é…ã€‚

ç¨³å®šæ€§  
æ²¡æœ‰ FIFO å°±å¿…é¡»ä¸¥æ ¼åŒæ­¥ DMA ä¸ CIMï¼ŒéªŒè¯å¤æ‚åº¦å¤§å¹…ä¸Šå‡ã€‚

è¾“å‡ºç¼“å†²  
spike æ˜¯äº‹ä»¶å‹è¾“å‡ºï¼ŒCPU ä¸èƒ½æ¯æ‹è¯»ï¼Œå¿…é¡»ç”¨ FIFO æš‚å­˜ã€‚

å‡†ç¡®è¡¨è¿°ï¼š  
â€œFIFO æ˜¯é€Ÿç‡è§£è€¦å™¨ + äº‹ä»¶ç¼“å†²å™¨ï¼Œæ²¡æœ‰å®ƒä¼šå¯¼è‡´ç³»ç»Ÿè€¦åˆè¿‡ç´§ã€ååä¸‹é™ã€éªŒè¯å›°éš¾ã€‚â€

åˆå¹¶çš„ä»£ä»·  
ä¸¢æ‰â€œé€Ÿç‡è§£è€¦â€ã€‚DMA å’Œ CIM/ADC çš„é€Ÿåº¦ä¸åŒï¼ŒFIFO æ˜¯ç¼“å†²å™¨ã€‚  
åˆå¹¶åå˜æˆâ€œè¾¹è¯»è¾¹ç®—â€ï¼Œä¸€æ—¦ ADC/CIM æ…¢ä¸‹æ¥å°±å¡ä½ï¼ŒéªŒè¯æ›´éš¾ï¼ˆæ—¶åºè€¦åˆæ›´å¼ºï¼‰ã€‚

**åŸåˆ™è¡¥å……**ï¼šè‹¥æ— å¿…è¦ï¼Œå‹¿å¢å®ä½“ï¼›ä½†è‹¥**åˆ æ‰åç ´åäº†é€Ÿç‡è§£è€¦/å¯éªŒè¯æ€§**ï¼Œå°±ä¸è¯¥åˆå¹¶ã€‚

### 4ã€æ•°æ®æµæƒ³å¥½æµå‘ï¼Œæ§åˆ¶æµä¸¥æ ¼åˆ†ç¦»
è¿™ä¸ªå»ºè®®æ˜¯é«˜çº§å·¥ç¨‹å¸ˆçš„æ€ç»´ï¼Œè€Œä¸”éå¸¸æ­£ç¡®ã€‚

åœ¨ä½ ç³»ç»Ÿé‡Œä½“ç°ä¸ºï¼š
æ•°æ®æµï¼šdata_sram â†’ DMA â†’ input_fifo â†’ CIM â†’ output_fifo
æ§åˆ¶æµï¼šCPU åªè´Ÿè´£å¯„å­˜å™¨é…ç½® / å¯åŠ¨ / è¯»å–ç»“æœ
å¦‚æœä½ æ··åœ¨ä¸€èµ·ï¼ˆæ¯”å¦‚æ§åˆ¶ä¿¡å·å’Œæ•°æ®ä¸€èµ·èµ°åŒä¸€é€šé“ï¼‰ï¼Œä¼šé€ æˆï¼š

çŠ¶æ€æœºçˆ†ç‚¸
éªŒè¯å¤æ‚åº¦é£™å‡
å¾ˆéš¾æ‰©å±•

---

## ä¸ƒã€å·²å®Œæˆçš„æ›´æ”¹ & å¾…åšæ¸…å•

### å·²å®Œæˆçš„æ›´æ”¹
ï¼ˆå·²ä»"æ”¹åŠ¨çºªè¦"æ•´ç†ï¼Œä¾¿äºå¯¹é½ä¸å›é¡¾ï¼‰

> æ³¨ï¼šæœ¬èŠ‚æŒ‰æ—¶é—´é¡ºåºä¿ç•™å†å²è®°å½•ï¼ŒåŒ…å«æ—§å‚æ•°ï¼ˆå¦‚ `T=1 / ratio=0.40 / 91.24%`ï¼‰ã€‚
> å½“å‰å®šç‰ˆå£å¾„è¯·ä»¥â€œå…³é”®å†³ç­–ç‚¹â€â€œå‚æ•°å®šç‰ˆè¡¨â€ä»¥åŠ `snn_soc_pkg.sv` ä¸ºå‡†ï¼ˆ`T=10 / ratio_code=4 / THRESHOLD_DEFAULT=10200`ï¼‰ã€‚

1) **å»ºæ¨¡è·¯çº¿ä¸è®ºæ–‡å‡†å¤‡è½åœ°**
   - æ˜ç¡® Phase 1~5 å»ºæ¨¡æµç¨‹ä¸"Phase 2/3 ç­‰ä»·æ ¡éªŒ"
   - Phase 2 è®­ç»ƒå…³é—­ biasï¼ˆ`bias=False`ï¼‰ï¼Œä¿è¯ä¸ Phase 3 ç­‰ä»·
   - é‡åŒ–æ»¡åå€¼æ”¹ä¸º `64 Ã— max(|W_q|)`ï¼Œå…¼å®¹æ­£è´Ÿæƒé‡
   - è¡¥å……é™é‡‡æ ·å¯¹æ¯”ä¸ ADC ä½æ•°æ‰«å‚çš„"è®ºæ–‡å‡†å¤‡äº‹é¡¹"
   - æ–°å¢é˜ˆå€¼å»ºè®®è„šæœ¬ï¼š`doc/threshold_recommend.py`

2) **å‚æ•°å£å¾„ç»Ÿä¸€ä¸æ–‡æ¡£å¯¹é½**
   - æ–‡æ¡£ç»Ÿä¸€"ä»¥ pkg ä¸ºå‡†"
   - `doc/00/01/02/04/06` ç­‰æ–‡æ¡£æ›´æ–°åˆ°å½“å‰å‚æ•°å£å¾„
   - å¼ºåŒ–"æ•°æ®æµ/æ§åˆ¶æµåˆ†ç¦»"åŸåˆ™

3) **é¢ç§¯å‹ç¼©ï¼ˆSRAM/FIFOï¼‰**
   - instr/data/weight SRAM ç»Ÿä¸€ä¸º 16KBï¼Œé›†ä¸­ç®¡ç†å‚æ•°
   - INPUT_FIFO_DEPTH æ¢å¤ä¸º 256ï¼ˆé¿å… TB çŒæ»¡å¯¼è‡´æ­»é”ï¼‰
   - æ–‡æ¡£/è¡¨æ ¼åŒæ­¥æ›´æ–°

4) **æ¥å£ä¸è¡Œä¸ºæ¨¡å‹ä¸€è‡´æ€§ä¿®å¤**
   - CIM è¡Œä¸ºæ¨¡å‹å‚æ•°åç»Ÿä¸€ï¼ˆé¿å… lint å˜é‡é®è”½ï¼‰
   - reg_bank å¯¼å…¥æ–¹å¼ä¿®æ­£ï¼ˆlint cleanï¼‰

5) **è´¨é‡ä¿éšœ**
   - Verilator lint é€šè¿‡
   - smoke test æ¸…å•ä¸æ’æŸ¥è¯´æ˜å®Œå–„

6) **RTL å…¨é¢å¤æŸ¥ï¼ˆæœ€æ–°ä¸€è½®ï¼‰**
   - å…¨éƒ¨ 17 ä¸ª RTL/TB æ–‡ä»¶é€æ–‡ä»¶æ£€æŸ¥ï¼Œæ—  bug / æ— å‚æ•°ä¸ä¸€è‡´
   - åœ°å€ç©ºé—´æ— é‡å ã€å»¶è¿Ÿè®¡æ•°å™¨ N-1 æ¨¡å¼æ­£ç¡®ã€ä½å®½ä¸€è‡´ã€FSM å®Œå¤‡
   - ä»£ç å¯ä»¥æ”¾å¿ƒè·‘ Smoke Test

7) **Python å…¨é‡å»ºæ¨¡å®Œæˆï¼ˆ2026-02-08ï¼‰**
   - è¿è¡Œ `run_all.py` å…¨é‡æ‰«æï¼Œè€—æ—¶ 141.4 åˆ†é’Ÿ
   - æ‰«æ 900 ç»„å‚æ•°ç»„åˆï¼ˆ9 methods Ã— 4 ADC Ã— 5 W Ã— 5 T Ã— 1 schemeï¼‰
   - Device backend: plugin modeï¼ˆ17 ç”µå¯¼ç”µå¹³ï¼Œmemristor_plugin.py åŠ è½½æˆåŠŸï¼‰
   - å™¨ä»¶æ¨¡å‹å‚æ•°å®æµ‹ï¼šR_off=4.18e+11 Î©, R_on=2.34e+08 Î©, å¼€å…³æ¯”(plugin)=1786:1
   - **æœ€ä½³é…ç½®ï¼ˆval é€‰å‚ â†’ test æŠ¥å‘Šï¼‰**ï¼š
     - æ–¹æ³•: proj_sup_64ï¼ˆç›‘ç£å¼æŠ•å½± 784â†’64 ç»´ï¼‰
     - æ–¹æ¡ˆ: Bï¼ˆæ•°å­—ä¾§å·®åˆ†ï¼‰
     - ADC: 8-bit, æƒé‡: 4-bit, å¸§æ•°: T=1, é˜ˆå€¼æ¯”ç‡: 0.40
     - Val å‡†ç¡®ç‡: 90.78%, **Test å‡†ç¡®ç‡: 91.24%**
   - ANN åŸºçº¿ï¼šfloat=86.74%, QAT quantized=90.57%
   - ç†æƒ³ SNN ç­‰ä»·æ ¡éªŒé€šè¿‡ï¼ˆå…¨éƒ¨æ–¹æ³• SNN_ideal â‰ˆ ANN floatï¼‰
   - ADC æ‰«æ: 6-bit(90.10%), **8-bit(90.78%)**, 10-bit(90.62%), 12-bit(90.68%)
   - æƒé‡æ‰«æ: 2-bit(80.22%), 3-bit(78.02%), **4-bit(90.78%)**, 6-bit(86.76%), 8-bit(86.12%)
   - å¸§æ•°æ‰«æ: T=1~20 å…¨éƒ¨ 90.78%ï¼ˆT=1 æœ€ä½æˆæœ¬ï¼Œç­‰ä»·ç²¾åº¦ï¼‰
   - å™ªå£°å½±å“: ç†æƒ³ 90.78%, å«å™ª 90.41%Â±0.31%, é€€åŒ–ä»… 0.37%
   - å†³ç­–è§„åˆ™: spike=90.78%, membrane=90.78%ï¼ˆç­‰ä»·ï¼Œspike å¯¹é½ RTLï¼‰
   - è‡ªé€‚åº”é˜ˆå€¼: å›ºå®š=90.78%, è‡ªé€‚åº”=88.98%, **ä¸‹é™ 1.80%ï¼Œä¸æ¨è**
   - Multi-seed å¤è·‘: 5 seeds, clean=91.24%Â±0.00%, noisy=90.98%Â±0.12%
   - å¤ä½æ¨¡å¼å¯¹æ¯”ï¼ˆ2026-02-10ï¼‰: soft/hard åœ¨ noisy test ä¸Šå‡ä¸º 90.98%Â±0.12%ï¼Œå½“å‰æ¨èé…ç½®ä¸‹ç­‰æ•ˆï¼›ç»§ç»­æ²¿ç”¨ soft å£å¾„
   - ç”Ÿæˆ 7 å¼ å¯¹æ¯”å›¾ (fig1~fig7)
   - config.py æ›´æ–°ï¼šè®°å½•ä¼šè®®ç¡®è®¤å‚æ•° + å»ºæ¨¡æ¨èå¸¸é‡

8) **å™¨ä»¶/æ¨¡æ‹Ÿå›¢é˜Ÿä¼šè®®ç¡®è®¤ï¼ˆ2026-02-06ï¼‰**
   - D1: 4-bit æƒé‡ç²¾åº¦ç¡®è®¤ï¼Œæ€§èƒ½æ— é—®é¢˜
   - D2: å¼€å…³æ¯”ç¡®è®¤ 5000:1ï¼ˆplugin ç™¾åˆ†ä½æå–å€¼ 1786:1 æ›´ä¿å®ˆï¼Œä¸å½±å“å»ºæ¨¡ç»“è®ºï¼‰
   - D3: D2D 5%Â±1%, C2C 3%Â±1%ï¼ˆå®æµ‹ä¼°è®¡å€¼ï¼Œå»ºæ¨¡å·²è¦†ç›–ï¼‰
   - D4: è¯»ç”µå‹ç¡®è®¤ 1.5Vï¼ˆä¸å½±å“å½’ä¸€åŒ–å»ºæ¨¡ï¼Œä»…å½±å“æ¨¡æ‹Ÿä¾§ Vrefï¼‰
   - D5: IR drop å¯æŒ‰é˜µåˆ—è§„æ¨¡ scalingï¼ˆæ¨¡å‹å·²æ”¯æŒï¼‰
   - D6: é›†æˆåæ— éœ€åˆå§‹åŒ–
   - A1: **ç¡®è®¤æ–¹æ¡ˆ Bï¼ˆæ•°å­—ä¾§å·®åˆ†å‡æ³•ï¼‰** â†’ ADC é€šé“æ•° = 20
   - A2: **ç¡®è®¤ ADC 8-bit**
   - A3: 1 ADC Ã— 20 MUXï¼ˆæ¨èæ–¹æ¡ˆï¼Œæ¨¡æ‹Ÿå›¢é˜Ÿæ¥å—ï¼‰
   - J1: **ä¸åšè‡ªé€‚åº”é˜ˆå€¼**ï¼ˆå»ºæ¨¡è¯æ˜æ— ç›Š -1.80%ï¼‰
   - J2: **åœ¨ reg_bank æ–°å¢ 8-bit THRESHOLD_RATIO å¯„å­˜å™¨**ï¼Œå®šç‰ˆé»˜è®¤ 4ï¼ˆratio_code=4ï¼Œ4/255â‰ˆ0.0157ï¼‰ï¼ŒUART å¯è¦†å†™ï¼ˆåŸä¼šè®®ç¡®è®¤å€¼ 102 å·²ç”± 2026-02-27 å®šç‰ˆæ›´æ–°å–ä»£ï¼‰

9) **RTL å‚æ•°æ›´æ–°å®Œæˆï¼ˆ2026-02-06ï¼‰**
   - 4a. `snn_soc_pkg.sv`: NUM_INPUTS=64, ADC_BITS=8, ADC_CHANNELS=20, TIMESTEPS=10, THRESHOLD_RATIO_DEFAULT=4, THRESHOLD_DEFAULT=10200, NEURON_DATA_WIDTH=9ï¼ˆ2026-02-27 å®šç‰ˆæ›´æ–°ï¼‰
   - 4b. `adc_ctrl.sv`: 20é€šé“ MUX + æ•°å­—å·®åˆ†å‡æ³•ï¼ˆScheme Bï¼‰ï¼Œsigned 9-bit è¾“å‡º
   - 4c. `lif_neurons.sv`: signed è†œç”µä½ + ç¬¦å·æ‰©å±• + ç®—æœ¯å·¦ç§» + signed é˜ˆå€¼æ¯”è¾ƒ
   - 4d. `reg_bank.sv`: æ–°å¢ REG_THRESHOLD_RATIO (0x24, 8-bit, é»˜è®¤4)ï¼ŒåŒå¯„å­˜å™¨æ¨¡å¼ï¼ˆ2026-02-27 å®šç‰ˆï¼‰
   - 4e. `cim_macro_blackbox.sv`: P_ADC_CHANNELS=20ï¼ŒScheme B è¡Œä¸ºæ¨¡å‹ï¼ˆæ­£åˆ—/è´Ÿåˆ—å…¬å¼ï¼‰
   - 4f. `dma_engine.sv`: 64-bit æ‰“åŒ…ï¼ˆ2Ã—32 æ•´æ‹¼æ¥ï¼Œword1_reg æ‰©å±•ä¸º 32-bitï¼‰
   - 4g. `snn_soc_top.sv`: bl_sel ä½å®½â†’$clog2(ADC_CHANNELS)=5, neuron_in_data ä½å®½â†’NEURON_DATA_WIDTH
   - TB: `top_tb.sv` é€‚é…æ–°å‚æ•°ï¼ˆ64-bit patterns, T=10, signed diff æ˜¾ç¤º, THRESHOLD_RATIO è¯»å›æµ‹è¯•ï¼‰
   - **å…¨éƒ¨æ–‡æ¡£åŒæ­¥æ›´æ–°**ï¼š00_overview, 01_memory_map, 02_reg_map, 03_cim_if_protocol, 04_walkthrough, 05_debug_guide, 08_cim_analog_interface

10) **V1 è¾“å…¥è¯´æ˜ä¿®è®¢ï¼ˆ2026-02-06ï¼‰**
    - **V1 èŠ¯ç‰‡è¾“å…¥æ˜¯ç¦»çº¿é¢„å¤„ç†åçš„ 64 ç»´ç‰¹å¾å‘é‡**ï¼ˆproj_sup_64: 784â†’64ï¼‰ï¼Œä¸æ˜¯åŸå§‹ 28Ã—28 åƒç´ 
    - é¢„å¤„ç†åœ¨ PC/MCU ç«¯å®Œæˆï¼ŒèŠ¯ç‰‡åªè´Ÿè´£ SNN æ¨ç†
    - è¿™æ„å‘³ç€ V1 ä¸éœ€è¦ç‰‡ä¸Šé™é‡‡æ ·/æŠ•å½±ç¡¬ä»¶

11) **åŒå¯„å­˜å™¨é˜ˆå€¼æ¨¡å¼ï¼ˆ2026-02-06ï¼‰**
    - REG_THRESHOLD (0x00, 32-bit): ç»å¯¹é˜ˆå€¼ï¼Œç›´æ¥ç”¨äº LIF æ¯”è¾ƒ
    - REG_THRESHOLD_RATIO (0x24, 8-bit): é˜ˆå€¼æ¯”ç‡ï¼ˆé»˜è®¤ 4/255â‰ˆ0.0157ï¼‰ï¼Œä¾›å›ºä»¶è®¡ç®—ç»å¯¹é˜ˆå€¼
    - THRESHOLD_DEFAULT = THRESHOLD_RATIO_DEFAULT Ã— (2^PIXEL_BITS - 1) Ã— TIMESTEPS_DEFAULT = 4 Ã— 255 Ã— 10 = 10200
    - å›ºä»¶å¯: (a) ç›´æ¥å†™ THRESHOLD ç»å¯¹å€¼, æˆ– (b) è¯» RATIO è®¡ç®—åå†™ THRESHOLD

12) **ADC é¥±å’Œè®¡æ•°å™¨ï¼ˆ2026-02-06ï¼‰**
    - `adc_ctrl.sv`: æ–°å¢ `adc_sat_high[15:0]` / `adc_sat_low[15:0]` è¾“å‡ºç«¯å£ï¼Œæ¯æ¬¡æ¨ç†è‡ªåŠ¨æ¸…é›¶
    - `reg_bank.sv`: æ–°å¢ `REG_ADC_SAT_COUNT`ï¼ˆ0x28, ROï¼‰ï¼Œ`[15:0]=sat_high`, `[31:16]=sat_low`
    - `snn_soc_top.sv`: è¿çº¿ adcâ†’reg_bank
    - `top_tb.sv`: æ¨ç†å®Œæˆåè¯»å› ADC_SAT_COUNT å¹¶æ˜¾ç¤º
    - ç”¨é€”ï¼šbring-up æ—¶è¯Šæ–­æ¨¡æ‹Ÿå‰ç«¯å¢ç›Šæ˜¯å¦åˆé€‚ï¼ˆé¥±å’Œè¿‡å¤š â†’ è°ƒ Vref/å¢ç›Šï¼‰

13) **CIM Test Mode + Debug è®¡æ•°å™¨ + FIFO æ–­è¨€ï¼ˆ2026-02-08ï¼‰**
    - **CIM Test Mode**ï¼š`snn_soc_top.sv` æ–°å¢æµ‹è¯•æ¨¡å¼ MUX + å“åº”ç”Ÿæˆå™¨
      - `reg_bank.sv` æ–°å¢ `REG_CIM_TEST`ï¼ˆ0x2Cï¼‰ï¼Œbit[0]=test_mode, bits[15:8]=test_data
      - `cim_test_mode=1` æ—¶æ—è·¯ `cim_macro_blackbox` çš„ 4 ä¸ªè¾“å‡ºï¼ˆdac_ready/cim_done/adc_done/bl_dataï¼‰
      - æ•°å­—ä¾§ç”Ÿæˆ fake å“åº”ï¼šdac_ready=1, cim_done å»¶è¿Ÿ 2 æ‹, adc_done å»¶è¿Ÿ 1 æ‹, bl_data=test_data
      - ç”¨é€”ï¼šç¡…ä¸ŠéªŒè¯æ•°å­—é€»è¾‘å®Œæ•´æ€§ï¼Œä¸ä¾èµ–çœŸå® RRAM å®
    - **Debug è®¡æ•°å™¨**ï¼ˆ4 è·¯ 16-bit é¥±å’Œè®¡æ•°å™¨ï¼Œåœ¨ `snn_soc_top.sv` å†…é‡‡æ ·ç°æœ‰ä¿¡å·ï¼Œæ— éœ€æ”¹å­æ¨¡å—ç«¯å£ï¼‰
      - `REG_DBG_CNT_0`ï¼ˆ0x30ï¼‰ï¼š[15:0]=dma_frame_cntï¼ˆDMA FIFO push æ¬¡æ•°ï¼‰ï¼Œ[31:16]=cim_cycle_cntï¼ˆCIM busy å‘¨æœŸæ•°ï¼‰
      - `REG_DBG_CNT_1`ï¼ˆ0x34ï¼‰ï¼š[15:0]=spike_cntï¼ˆLIF spike æ€»æ•°ï¼‰ï¼Œ[31:16]=wl_stall_cntï¼ˆWL mux é‡å…¥å‘Šè­¦æ¬¡æ•°ï¼‰
      - ä»… rst_n æ¸…é›¶ï¼Œ16-bit é¥±å’Œï¼ˆåˆ° 0xFFFF åœæ­¢ï¼‰
    - **FIFO Power-of-2 æ–­è¨€**ï¼š`fifo_sync.sv` æ–°å¢ `initial` å—ï¼ŒDEPTH ä¸ä¸º 2 çš„å¹‚åˆ™ `$fatal`
    - `top_tb.sv`ï¼šæ¨ç†å®Œæˆåè¯»å› DBG_CNT_0/1 å’Œ CIM_TEST å¹¶æ˜¾ç¤º
    - `doc/02_reg_map.md`ï¼šæ–°å¢ 3 ä¸ªå¯„å­˜å™¨æ¡ç›® + ä½¿ç”¨è¯´æ˜

---

### å¾…åšæ¸…å•ï¼ˆå»ºè®®é¡ºåºï¼‰

> **æ ¸å¿ƒåŸåˆ™**ï¼šå»ºæ¨¡å·²å®Œæˆï¼Œå‚æ•°å·²å®šç‰ˆã€‚æ¥ä¸‹æ¥æŒ‰ä¼˜å…ˆçº§æ‰§è¡Œ RTL æ”¹åŠ¨ + å›å½’æµ‹è¯•ã€‚
> ï¼ˆåŸåˆ™ï¼šä»£ç å…ˆè·‘é€š â†’ äººå…ˆçœ‹æ‡‚ â†’ å»ºæ¨¡å®šå‚æ•° â†’ å†æ”¹ RTLã€‚å‰ä¸‰æ­¥å·²å®Œæˆã€‚ï¼‰

#### 0) è·‘é€š Smoke Testï¼ˆç«‹å³ï¼Œ~1 å°æ—¶ï¼‰
- åœ¨ VCS/Verdi ç¯å¢ƒä¸‹è¿è¡Œ `sim/run_vcs.sh`
- ç¡®è®¤ vcs.log æ—  Errorã€sim.log å‡ºç° `[TB] Simulation finished.`
- åœ¨ Verdi ä¸­æ‰“å¼€æ³¢å½¢ï¼Œç¡®è®¤ FSM çŠ¶æ€æµè½¬æ­£å¸¸ï¼ˆST_IDLE â†’ ST_FETCH â†’ ... â†’ ST_DONEï¼‰
- ç¡®è®¤ `bitplane_shift` ä» 7â†’0 æ­£ç¡®é€’å‡
- ç¡®è®¤ `membrane` ç´¯åŠ æ­£å¸¸ã€`out_fifo_count > 0`
- **é€šè¿‡æ ‡å‡†**ï¼šä»¿çœŸæ­£å¸¸ç»“æŸ + æ³¢å½¢å¯è§‚å¯Ÿ + æ—  $fatal / assertion å¤±è´¥

#### 1) å­¦ä¹ å¹¶ç†è§£å½“å‰ä»£ç ï¼ˆç«‹å³å¼€å§‹ï¼Œä¸å»ºæ¨¡å¯å¹¶è¡Œï¼‰

> æŒ‰ `doc/06_learning_path.md` Part A çš„é˜¶æ®µé¡ºåºã€‚**åœ¨æ”¹ RTL ä¹‹å‰å¿…é¡»å®Œæˆè‡³å°‘é˜¶æ®µ A-C**ã€‚

**ç¬¬ä¸€å‘¨ï¼ˆä¸ Python å»ºæ¨¡å¹¶è¡Œï¼‰**ï¼š
- **é˜¶æ®µ Aï¼ˆDay 1-2ï¼‰**ï¼šé¸Ÿç°å…¨å±€
  è¯» `doc/00~02` + `snn_soc_pkg.sv` + `snn_soc_top.sv`ï¼›æ‰‹ç”»æ¨¡å—æ¡†å›¾
- **é˜¶æ®µ Bï¼ˆDay 3-4ï¼‰**ï¼šæ€»çº¿å’Œæ•°æ®æ¬è¿
  è¯» `bus_simple_if` / `bus_interconnect` / `sram_*` / `dma_engine` / `fifo_sync`ï¼›æ‰‹ç”» DMA çŠ¶æ€æœº
- **é˜¶æ®µ Cï¼ˆDay 5-7ï¼‰**ï¼šSNN æ ¸å¿ƒæµæ°´çº¿ï¼ˆæœ€é‡è¦ï¼‰
  è¯» `cim_array_ctrl` / `dac_ctrl` / `cim_macro_blackbox` / `adc_ctrl` / `lif_neurons`
  æ‰‹ç”»ä¸»æ§ FSM çŠ¶æ€å›¾ã€ç†è§£ bit-plane shift-and-accumulate

**ç¬¬äºŒå‘¨ï¼ˆå»ºæ¨¡å‡ºåˆæ­¥ç»“æœåï¼‰**ï¼š
- **é˜¶æ®µ Dï¼ˆDay 8ï¼‰**ï¼šå¯„å­˜å™¨å’Œæ§åˆ¶
  è¯» `reg_bank` / `fifo_regs`ï¼›ç†è§£ W1P/W1C/RO æœºåˆ¶
- **é˜¶æ®µ Eï¼ˆDay 9ï¼‰**ï¼šTestbench
  è¯» `top_tb.sv` / `bus_master_tasks.sv`ï¼›ç†è§£ 5 æ­¥æµ‹è¯•æµç¨‹
- **ä»¿çœŸå®éªŒï¼ˆDay 10-12ï¼‰**ï¼šå‚æ•°ä¿®æ”¹å®éªŒ
  æ”¹ THRESHOLD/TIMESTEPS/ADC å»¶è¿Ÿï¼Œè§‚å¯Ÿæ³¢å½¢å˜åŒ–
- **æ¨¡å—çº§ä»¿çœŸï¼ˆDay 13-18ï¼Œæ¨èï¼‰**ï¼š
  æŒ‰ FIFO â†’ SRAM â†’ DMA â†’ reg_bank â†’ LIF â†’ ADC â†’ CIM_CTRL é¡ºåºåšæ¨¡å—çº§ TB

**ä¸ºä»€ä¹ˆç°åœ¨å°±å­¦**ï¼š
- ä¸ç†è§£ä»£ç å°±æ— æ³•æœ‰æ•ˆæŒ‡å¯¼å»ºæ¨¡ï¼ˆå»ºæ¨¡å¿…é¡»ç²¾ç¡®åŒ¹é…ç¡¬ä»¶è¡Œä¸ºï¼‰
- åç»­æ”¹ RTLï¼ˆè¾“å…¥ç»´åº¦ã€å·®åˆ†ã€è¡Œåˆ—é€‰é€šï¼‰å‰å¿…é¡»çœ‹æ‡‚ç°æœ‰å®ç°
- é˜¶æ®µ A-C çš„å­¦ä¹ ä¸ä¼šé˜»å¡ Python å»ºæ¨¡ï¼ˆå¯å¹¶è¡Œï¼‰

#### 2) âœ… Python å»ºæ¨¡ä¸å‚æ•°å†³ç­–ï¼ˆå·²å®Œæˆ 2026-02-08ï¼‰

> å…¨é‡å»ºæ¨¡å·²å®Œæˆã€‚ç»“æœè§ä¸Šæ–¹"å·²å®Œæˆçš„æ›´æ”¹"ç¬¬ 7 é¡¹ã€‚
> å‚æ•°å·²å®šç‰ˆï¼ˆ2026-02-27 æ›´æ–°ï¼‰ï¼šproj_sup_64, Scheme B, ADC=8, W=4, T=10, ratio_code=4 (4/255â‰ˆ0.0157), test=90.42%ï¼ˆçº¯ spikeï¼Œzero-spike=0.00%ï¼‰
> ï¼ˆåŸæ—§é…ç½® T=1, ratio=0.40, test=91.24% ä½¿ç”¨ hybrid metricï¼Œå« 96% membrane fallbackï¼Œä¸ä»£è¡¨ç¡¬ä»¶å¯¹é½ç²¾åº¦ï¼‰

#### 3) âœ… å™¨ä»¶/æ¨¡æ‹Ÿå›¢é˜Ÿä¼šè®®ç¡®è®¤ï¼ˆå·²å®Œæˆ 2026-02-06ï¼‰

> ä¼šè®®ç»“æœè§ä¸Šæ–¹"å·²å®Œæˆçš„æ›´æ”¹"ç¬¬ 8 é¡¹ã€‚æ‰€æœ‰æ¶æ„çº§é—®é¢˜å·²ç¡®è®¤ã€‚
> - å·®åˆ†æ–¹æ¡ˆ: æ–¹æ¡ˆ Bï¼ˆæ•°å­—ä¾§å·®åˆ†ï¼Œ20 é€šé“ï¼‰
> - ADC: 8-bit
> - è‡ªé€‚åº”é˜ˆå€¼: ä¸åš
> - THRESHOLD_RATIO: 8-bit å¯„å­˜å™¨ï¼Œå®šç‰ˆé»˜è®¤ 4ï¼ˆratio_code=4ï¼Œ4/255â‰ˆ0.0157ï¼‰

#### 4) âœ… RTL å‚æ•°æ›´æ–°ï¼ˆå·²å®Œæˆ 2026-02-06ï¼‰

> **å‚æ•°å·²å®šç‰ˆï¼ˆ2026-02-27 æ›´æ–°ï¼‰**ï¼šNUM_INPUTS=64, ADC_BITS=8, ADC_CHANNELS=20, TIMESTEPS=10, ratio_code=4, Scheme B
> **æ³¨æ„**ï¼šä¿®æ”¹é¡ºåºå¾ˆé‡è¦ï¼Œpkg æ˜¯ä¸Šæ¸¸ï¼Œå…¶ä½™æ¨¡å—ä¾èµ– pkg å‚æ•°ã€‚

**4a. `snn_soc_pkg.sv`ï¼ˆæœ€å…ˆæ”¹ï¼Œæ‰€æœ‰å‚æ•°çš„æºå¤´ï¼‰**
- [x] `NUM_INPUTS` = 49 â†’ **64**
- [x] `ADC_BITS` = 12 â†’ **8**
- [x] æ–°å¢ `ADC_CHANNELS` = **20**ï¼ˆScheme B: 10 pos + 10 negï¼‰
- [x] `TIMESTEPS_DEFAULT` = 20 â†’ **1** â†’ **10**ï¼ˆ2026-02-27 å®šç‰ˆæ›´æ–°ï¼‰
- [x] æ–°å¢/æ›´æ–° `THRESHOLD_RATIO_DEFAULT` = ~~102ï¼ˆ0x66, ratio=0.40ï¼‰~~ â†’ **4**ï¼ˆratio_code=4, 4/255â‰ˆ0.0157ï¼Œå®šç‰ˆï¼‰
- [x] æ›´æ–° `THRESHOLD_DEFAULT` è®¡ç®—å…¬å¼ï¼ˆé€‚é… ADC=8, T=10, ratio_code=4ï¼‰â†’ **10200**
- [x] æ›´æ–° `ADC_PEAK_EST` å’Œ `THRESHOLD_REPEAT_FRAMES` = 1
- [x] `LIF_MEM_WIDTH` ä¿æŒ 32ï¼ˆé‡æ–°éªŒç®—ï¼šT=1 Ã— 8bp Ã— 255(8-bit ADC) Ã— 128(shift7) = 261120ï¼Œçº¦éœ€ 18 bitï¼Œ32-bit signed è¶³å¤Ÿï¼‰
- [x] æ–°å¢ `NEURON_DATA_WIDTH` = ADC_BITS + 1 = **9**ï¼ˆsignedï¼Œç”¨äº Scheme B å·®åˆ†ç»“æœï¼‰

**4b. `adc_ctrl.sv`ï¼ˆScheme B æ ¸å¿ƒæ”¹åŠ¨ï¼‰**
- [x] MUX é€šé“æ•°ï¼šNUM_OUTPUTS(10) â†’ ADC_CHANNELS(20)
- [x] `bl_sel` ä½å®½ï¼š$clog2(10)=4 â†’ $clog2(20)=**5**
- [x] æ‰«æ 20 è·¯ååšæ•°å­—å·®åˆ†å‡æ³•ï¼š`diff[i] = data_reg[i] - data_reg[i + NUM_OUTPUTS]`ï¼ˆi=0..9ï¼‰
- [x] è¾“å‡º `neuron_in_data` æ”¹ä¸º **signed [NEURON_DATA_WIDTH-1:0]**ï¼ˆ9-bit signedï¼ŒèŒƒå›´ [-255, +255]ï¼‰
- [x] BL é€šé“æ˜ å°„çº¦å®šï¼šchannels 0~9 = æ­£å·®åˆ†åˆ—(pos)ï¼Œchannels 10~19 = è´Ÿå·®åˆ†åˆ—(neg)

**4c. `lif_neurons.sv`ï¼ˆsigned è†œç”µä½ï¼‰**
- [x] `neuron_in_data` è¾“å…¥æ”¹ä¸º **signed** ç±»å‹ï¼ˆNEURON_DATA_WIDTH bitsï¼‰
- [x] `membrane` æ”¹ä¸º **signed** [MEM_W-1:0]ï¼ˆ2's complementï¼‰
- [x] `addend` åš **ç¬¦å·æ‰©å±•** åå·¦ç§»ï¼ˆsign-extended shiftï¼‰
- [x] é˜ˆå€¼æ¯”è¾ƒï¼šsigned membrane >= positive thresholdï¼ˆéœ€æ­£ç¡®å¤„ç† signed/unsigned æ¯”è¾ƒï¼‰
- [x] è½¯å¤ä½ï¼šsigned å‡æ³• `membrane[i] -= threshold_ext`

**4d. `reg_bank.sv`ï¼ˆæ–°å¢ THRESHOLD_RATIO å¯„å­˜å™¨ï¼‰**
- [x] æ–°å¢ `REG_THRESHOLD_RATIO` at offset **0x24**ï¼ˆ8-bit, R/Wï¼‰
- [x] é»˜è®¤å€¼ = `THRESHOLD_RATIO_DEFAULT`ï¼ˆ4 = 0x04ï¼Œå®šç‰ˆï¼‰
- [x] æ–°å¢ output port `threshold_ratio [7:0]`
- [x] è¯»å›é€»è¾‘ + å†™å…¥é€»è¾‘ï¼ˆä»… byte 0 æœ‰æ•ˆï¼‰

**4e. `cim_macro_blackbox.sv`ï¼ˆé€‚é…æ–°å‚æ•°ï¼‰**
- [x] NUM_INPUTS 49â†’64 è‡ªåŠ¨è·Ÿéš pkg
- [x] å¦‚æœ‰å†…éƒ¨ ADC è¡Œä¸ºæ¨¡å‹ï¼ŒADC_BITS 12â†’8 è‡ªåŠ¨è·Ÿéš
- [x] è¾“å‡ºé€šé“ï¼šç¡®è®¤æ”¯æŒ 20 è·¯ BL è¾“å‡ºï¼ˆADC_CHANNELSï¼‰

**4f. `dma_engine.sv`ï¼ˆ64-bit æ‰“åŒ…ç®€åŒ–ï¼‰**
- [x] 49-bit splice â†’ 64-bitï¼ˆ2Ã—32 æ•´æ‰“åŒ…ï¼Œç›´æ¥å–ä½ 64 ä½ï¼‰
- [x] å®é™…ä¸Š 64 = 2 Ã— 32ï¼ŒDMA åªéœ€æ¬ 2 ä¸ª word å³å¯ç»„æˆä¸€ä¸ªå®Œæ•´ bit-plane

**4g. `snn_soc_top.sv`ï¼ˆç«¯å£é€‚é…ï¼‰**
- [x] æ–°å¢ `threshold_ratio` ä¿¡å·è¿æ¥ reg_bank â†’ å¤–éƒ¨ï¼ˆæˆ–ä»…å†…éƒ¨ï¼‰
- [x] æ›´æ–° `bl_sel` ä½å®½ 4â†’5
- [x] ç¡®è®¤æ‰€æœ‰å­æ¨¡å—ç«¯å£ä¸ pkg å‚æ•°ä¸€è‡´

#### 5) é›†æˆæ–¹æ¡ˆç¡®è®¤ï¼ˆä¸é¡¹ 4 å¹¶è¡Œæ¨è¿›ï¼‰

- ç‰‡å¤–æ··åˆé›†æˆä¼˜å…ˆ"åŒæ¿åŒèŠ¯"ï¼Œç¡®å®šè¿æ¥å™¨/èµ°çº¿/æ—¶é’Ÿä¸å¤ä½æ–¹æ¡ˆ
- **å¼•è„šé¢„ç®—**ï¼ˆæ›´æ–°åçš„ä¼°ç®—ï¼‰ï¼š
  - æ¨ç†æ¨¡å¼ï¼šwl_spikeÃ—64 + dac_valid/readyÃ—2 + cim_start/doneÃ—2 + bl_selÃ—5 + adc_start/doneÃ—2 + bl_dataÃ—8 + clk + rst_n + mode â‰ˆ **86 pin**
  - ç¼–ç¨‹æ¨¡å¼ï¼ˆå¤ç”¨æ¨ç†å¼•è„šï¼‰ï¼šrow_addr + col_addr + write_data + æ§åˆ¶ â†’ å¯å¤ç”¨ä¸Šè¿°å¼•è„š
  - åŠ ç”µæº/åœ°/å‚è€ƒ/åç½® â†’ æ€»è®¡å¯èƒ½ **100-120 pin**
  - éœ€è¦è¯„ä¼°å°è£…/PCB å¯è¡Œæ€§ï¼ˆQFP-128 or BGAï¼‰
- å£å¾„è¯´æ˜ï¼š**86 pin** æ˜¯â€œæ— å¤ç”¨è£¸æ¥å£â€çš„è¿çº¿è§„æ¨¡ä¼°ç®—ï¼›**45 pin** æ˜¯ V1 å®šç‰ˆé‡‡ç”¨æ—¶åˆ†å¤ç”¨/å¼•è„šå¤ç”¨åçš„å®ç°å£å¾„ï¼Œä¸¤è€…ä¸å†²çªã€‚
- è‹¥ pin è¿‡å¤šï¼šè¯„ä¼° pin reductionï¼ˆä¸²è¡ŒåŒ– WL é©±åŠ¨ã€åˆ†æ—¶å¤ç”¨ï¼‰

#### 5a) chip_top / pad-wrapper è½åœ°ï¼ˆåç«¯å‰å¿…åšï¼‰

- å·²æ–°å¢éª¨æ¶æ–‡ä»¶ï¼š`rtl/top/chip_top.sv`ï¼ˆå½“å‰ä»…å ä½ï¼Œä¸æ”¹å˜ç°æœ‰ `snn_soc_top` è¡Œä¸ºï¼‰
- å½“å‰çŠ¶æ€è¯´æ˜ï¼ˆé¿å…è¯¯è§£ï¼‰ï¼š`chip_top` é‡Œå¤ç”¨ç›¸å…³ pad ä¿¡å·ä»æ˜¯å ä½å¸¸é‡ï¼Œ**ä¸æ˜¯æœ€ç»ˆ pad çº§è¿çº¿å®ç°**ï¼›Tapeout å‰å¿…é¡»å®ŒæˆçœŸå®è¿æ¥ä¸ pad cell å®ä¾‹åŒ–ã€‚
- åç«¯å‰å¿…é¡»å®Œæˆä»¥ä¸‹æ”¶å£ï¼š
  - åœ¨ `chip_top.sv` å†…æŠŠå¤–éƒ¨å¤ç”¨ä¿¡å·ï¼ˆ`wl_data/wl_group_sel/wl_latch/cim_start/bl_sel`ï¼‰è¿æ¥åˆ°å†…éƒ¨åè®®æº
  - ç»Ÿä¸€ pad å£å¾„ï¼šç¡®å®š 45-pin æ–¹æ¡ˆçš„æœ€ç»ˆå¼•è„šè¡¨ã€æ–¹å‘ã€ç”µå¹³å’Œå¤ä½ç­–ç•¥
  - å®Œæˆ pad ring å®ä¾‹åŒ–ä¸çº¦æŸï¼ˆæ—¶åº/ç”µæ°”ï¼‰
  - ä¸æ¨¡æ‹Ÿå›¢é˜ŸäºŒæ¬¡å¯¹é½ `doc/08_cim_analog_interface.md`ï¼ˆå»æ‰â€œå¾…ç¡®è®¤â€é¡¹ï¼‰
- éªŒæ”¶æ ‡å‡†ï¼š
  - `chip_top` lint é€šè¿‡ã€æ— æ‚¬ç©ºå…³é”®æ¥å£
  - pad è¡¨ã€çº¦æŸæ–‡ä»¶ã€æ¥å£æ–‡æ¡£ä¸‰è€…ä¸€è‡´
  - è”è°ƒä»¿çœŸä¸­å¤ç”¨ä¿¡å·æ—¶åºä¸æ–‡æ¡£å†»ç»“åè®®ä¸€è‡´
- æ˜ç¡®ç”µå¹³æ ‡å‡†ä¸ IO çº¦æŸï¼ˆVDD/AVDD/å‚è€ƒç”µå‹ï¼‰

#### 6) âœ… å»ºæ¨¡ä¸å‚æ•°å®šç‰ˆï¼ˆå·²å®Œæˆ 2026-02-08ï¼‰

å‚æ•°å®šç‰ˆè¡¨ï¼š

| å‚æ•° | å®šç‰ˆå€¼ | æ¥æº |
|------|--------|------|
| è¾“å…¥ç»´åº¦ | 64 (proj_sup_64) | å»ºæ¨¡æœ€ä½³ |
| ADC ä½å®½ | 8-bit | å»ºæ¨¡ + A2 ç¡®è®¤ |
| æƒé‡ä½å®½ | 4-bit | å»ºæ¨¡ + D1 ç¡®è®¤ |
| å·®åˆ†æ–¹æ¡ˆ | Bï¼ˆæ•°å­—ä¾§ï¼‰ | A1 ç¡®è®¤ |
| ADC é€šé“æ•° | 20 (10 pos + 10 neg) | Scheme B |
| æ¨ç†å¸§æ•° | T=10 | å»ºæ¨¡å®šç‰ˆï¼ˆspike-only 90.42%ï¼Œzero-spike=0.00%ï¼‰ |
| é˜ˆå€¼æ¯”ç‡ | ratio_code=4ï¼ˆå¯„å­˜å™¨å€¼ 4ï¼Œ4/255â‰ˆ0.0157ï¼‰ | å»ºæ¨¡å®šç‰ˆï¼ˆçº¯ spike æ ‡å®šï¼‰ |
| é˜ˆå€¼è‡ªé€‚åº” | ä¸åš | å»ºæ¨¡è¯æ˜ä¸‹é™ 1.80%, J1 ç¡®è®¤ |
| å¤ä½æ¨¡å¼ | soft (V=V-Vth) | å»ºæ¨¡å¯¹æ¯”ï¼ˆsoft/hard åœ¨å½“å‰æ¨èé…ç½®ä¸‹ç­‰æ•ˆï¼‰+ ä¸ç°æœ‰ RTL è·¯å¾„ä¸€è‡´ |
| å†³ç­–è§„åˆ™ | spike count | ä¸ RTL å¯¹é½ |
| LIF_MEM_WIDTH | 32 | éªŒç®—è¶³å¤Ÿ |

å¤ä½æ¨¡å¼å®šç‰ˆè¡¥å……ï¼ˆ2026-02-10ï¼‰ï¼š

- å¯¹æ¯”å¯¹è±¡ï¼š`SPIKE_RESET_MODE=soft` vs `SPIKE_RESET_MODE=hard`ï¼Œå…¶ä½™å‚æ•°å›ºå®šä¸ºæ¨èé…ç½®ï¼ˆ`proj_sup_64, Scheme B, ADC=8, W=4, T=10, ratio_code=4`ï¼‰ã€‚
- å¯¹æ¯”å…¥å£ï¼š`run_all.py` ä¸­ `[3f]`ï¼ˆå™ªå£°å½±å“ï¼Œ`add_noise=True`ï¼‰ä¸ `[3l]`ï¼ˆtest å¤š seed noisyï¼Œ`add_noise=True`ï¼‰ã€‚
- softï¼ˆå†å²åŸºçº¿ï¼‰ï¼š
  - val noisy meanï¼š`90.41% +/- 0.0031`
  - test noisyï¼ˆmulti-seedï¼‰ï¼š`90.98% +/- 0.0012`
  - è¯æ®ï¼š`Pythonå»ºæ¨¡/results/summary.txt`
- hardï¼ˆ2026-02-10 å¤è·‘ï¼‰ï¼š
  - val noisy meanï¼š`90.51% +/- 0.0034`
  - test noisyï¼ˆmulti-seedï¼‰ï¼š`90.98% +/- 0.0012`
  - è¯æ®ï¼š`Pythonå»ºæ¨¡/results/summary.txt`ã€`run_all_skiptrain_hard_20260210_161450.log`
- ç»“è®ºï¼š
  - å½“å‰æ¨èé…ç½®ä¸‹ï¼Œsoft/hard åœ¨ noisy test æŒ‡æ ‡ä¸Šä¸å¯åŒºåˆ†ï¼ˆæ•°å€¼å®Œå…¨ä¸€è‡´ï¼‰ã€‚
  - val ä¾§ `0.10%` å·®å¼‚å°äºç»Ÿè®¡æ³¢åŠ¨é‡çº§ï¼ˆ`~0.31%-0.34%`ï¼‰ï¼Œä¸å…·æ˜¾è‘—æ€§ã€‚
  - V1 å‚æ•°ç»§ç»­æ²¿ç”¨ `soft`ï¼Œç†ç”±æ˜¯ï¼šä¸æ—¢æœ‰ RTL/æ–‡æ¡£å£å¾„ä¸€è‡´ã€è¡Œä¸ºè¿ç»­æ€§æ›´å¥½ã€æ— éœ€å¼•å…¥é¢å¤–æ”¹åŠ¨é£é™©ã€‚

#### 7) æµ‹è¯•æ–¹æ¡ˆï¼ˆå‚æ•°å®šç‰ˆååˆ¶å®šï¼‰

- æ•°å­—å•æµ‹ï¼ˆV1ï¼‰ï¼šUART/å¯„å­˜å™¨è‡ªæ£€ã€SRAM memtestã€DMA/FIFO/æ§åˆ¶é“¾è·¯
- æ¨¡æ‹Ÿå•æµ‹ï¼šIV/ç”µå¯¼çº§åˆ†å¸ƒã€å†™å…¥ä¸€è‡´æ€§ã€è¯»å™ªå£°ã€æ¼‚ç§»/è€å†™
- ç‰‡å¤–æ··åˆé›†æˆï¼šç«¯åˆ°ç«¯æ¨ç†ã€ADC code ç¨³å®šæ€§ã€å‚æ•°æ•æ„Ÿåº¦
- å½¢æˆ checklistï¼ˆé€šè¿‡/å¤±è´¥åˆ¤æ®æ˜ç¡®ï¼‰

#### 8) æ–‡æ¡£ä¸æ¥å£åŒæ­¥æ›´æ–°ï¼ˆæŒç»­ï¼‰

- æ›´æ–° `doc/08_cim_analog_interface.md`ï¼ˆæ–°å¢è¡Œåˆ—é€‰é€šã€å·®åˆ†é€šé“ã€ç¼–ç¨‹æ¥å£ã€å¼•è„šå¤ç”¨ï¼‰
- æ›´æ–° `doc/00_overview.md` / `doc/04_walkthrough.md` / `doc/06_learning_path.md`
  - 06 å­¦ä¹ æ–‡æ¡£ä¸­çš„å‚æ•°è¡¨éœ€æ›´æ–°ï¼ˆNUM_INPUTS=64ã€å¯èƒ½çš„é€šé“æ•°å˜åŒ–ï¼‰
- æ›´æ–°æœ¬æ–‡æ¡£ï¼ˆå£å¾„/æµç¨‹/å‚æ•°/æ¥å£ä¸€è‡´ï¼‰
- åŒæ­¥å¯„å­˜å™¨è¡¨/åœ°å€æ˜ å°„åˆ°æœ€æ–°è®¾è®¡
- **Phase 1~5 å»ºæ¨¡æµç¨‹åŒæ­¥**ï¼šå·²æ›´æ–°ä¸º 32Ã—32â†’8Ã—8=64ï¼ˆ2026-02-27ï¼‰ï¼›å†å² 7Ã—7=49 ä»…ä¿ç•™åœ¨å˜æ›´è®°å½•ä¸­

#### 9) è¾…åŠ©ä¿éšœæœºåˆ¶ï¼ˆå¯é€‰ä½†å»ºè®®ï¼‰

- âœ… CIM Test Modeï¼ˆç¡…ä¸Šå•æµ‹ç”¨ï¼Œé¿å…ä¾èµ–çœŸå®å®ï¼‰â€” å·²å®ç°ï¼ˆ2026-02-08ï¼‰
- è¡Œåˆ—é€‰é€šå›ºå®šçª—å£ç‰ˆï¼ˆå…ˆè·‘é€šï¼Œå†åšå¯é…ç½®ï¼‰â€” P0/P1 åå†å†³å®š
- âœ… Debug counter/traceï¼ˆDMA/ADC/LIF å…³é”®è®¡æ•°å™¨ï¼‰â€” å·²å®ç°ï¼ˆ2026-02-08ï¼‰
- âœ… é˜µåˆ—è§„æ¨¡å‚æ•°åŒ–ï¼ˆæ”¯æŒå¿«é€Ÿåˆ‡æ¢ 64Ã—10 / 64Ã—20 / 128Ã—128 ç­‰é…ç½®ï¼‰â€” å·²å…·å¤‡ï¼ˆpkg å‚æ•°åŒ–ï¼‰
- ### äº”ã€å·²çŸ¥çš„éé˜»æ–­æ€§æŠ€æœ¯å€ºï¼ˆè®°å½•å¤‡å¿˜ï¼Œä¸å½±å“å½“å‰é˜¶æ®µï¼‰

1. DMA æ—  abort â€” é˜¶æ®µ 4 æ‰©å±• DMA æ—¶ä¸€å¹¶è§£å†³
2. ~~FIFO depth æ—  power-of-2 æ–­è¨€~~ â€” âœ… å·²åŠ ï¼ˆ2026-02-08ï¼Œfifo_sync.sv initial å—ï¼‰
3. bus_master_tasks ä¸ç¬¦åˆ AXI åè®® â€” é˜¶æ®µ 3 æ¢ AXI-Lite æ—¶å¿…é¡»é‡å†™
4. `$warning`/`$fatal`Â æœªåŠ ç»¼åˆä¿æŠ¤ â€” ä¸å½±å“ä»¿çœŸï¼Œç»¼åˆæ—¶å·¥å…·ä¼šå¿½ç•¥

#### 10) é£é™©æç¤ºä¸å‰ç½®éªŒè¯ï¼ˆè´¯ç©¿å…¨ç¨‹ï¼‰

- **ğŸ”´ 0T1R 128Ã—128 sneak pathï¼ˆæœ€é«˜é£é™©ï¼‰**
  0T1R æ— é€‰é€šç®¡ï¼Œé˜µåˆ—è§„æ¨¡è¶Šå¤§ sneak path è¶Šä¸¥é‡ï¼ˆç”µæµæ³„æ¼å¯¼è‡´è¯»å‡ºä¸å‡†/å†™å…¥æ‰°åŠ¨ï¼‰ã€‚
  **è‹¥å™¨ä»¶ç»„æ—  128Ã—128 è§„æ¨¡çš„å®æµ‹æ•°æ®ï¼Œå¼ºçƒˆå»ºè®® fallback åˆ° 64Ã—64 æˆ–æ›´å°è§„æ¨¡å…ˆè·‘é€šã€‚**
  æ•°å­—ä¾§è®¾è®¡åº”å‚æ•°åŒ–ï¼Œæ”¯æŒå¿«é€Ÿåˆ‡æ¢é˜µåˆ—è§„æ¨¡ã€‚
- **ğŸ”´ å†™/æ“¦/éªŒè¯å¤æ‚åº¦å®¹æ˜“ä½ä¼°**
  P&V + Erase ç›¸å½“äºåœ¨æ¨ç†é“¾è·¯ä¹‹å¤–å†é€ ä¸€æ•´å¥—æ§åˆ¶å­ç³»ç»Ÿï¼ˆDAC æ§åˆ¶å†™è„‰å†²å‚æ•°ã€ADC è¯»å‡ºéªŒè¯ã€é‡è¯•é€»è¾‘ã€å¤±è´¥å¤„ç†ï¼‰ã€‚
  **V1 åªåšæ¨ç†ï¼Œå†™/æ“¦/éªŒè¯æ”¾ V2**ï¼ˆè¯¦è§ä¸‹æ–¹"å™¨ä»¶å›¢é˜Ÿéœ€æ±‚è¯„ä¼°"ï¼‰ã€‚
- **ğŸŸ¡ å·®åˆ†ç»“æ„å¯¼è‡´é€šé“æ•°Ã—2**ï¼šæ—¶åº/åŠŸè€—è¯„ä¼°å¿…é¡»å…ˆé‡åŒ–ï¼ˆå–å†³äºæ–¹æ¡ˆ A/B ç¡®è®¤ï¼‰
- **ğŸŸ¡ è¾“å…¥ 64 ç»´å¸¦æ¥çš„è¿é”ä¿®æ”¹**ï¼špkg / DMA / FIFO / CIM_MACRO / LIF / TB / å…¨éƒ¨æ–‡æ¡£
- **ğŸŸ¡ ç‰‡å¤–äº’è” pin æ•°**ï¼š90+ åŠŸèƒ½ pin + ç”µæºåœ° â†’ éœ€è¦æ—©è¯„ä¼°å°è£…å¯è¡Œæ€§
- **ğŸŸ¢ è¡Œåˆ—é€‰é€šå»ºè®®å…ˆå›ºå®šçª—å£**ï¼šé¿å…ä¸€æ¬¡æ€§å¤æ‚åŒ–æ‹–æœŸ
- **ğŸŸ¢ å»ºæ¨¡å¿…é¡»ä¿ç•™ baseline ä¸å¯¹æ¯”**ï¼šè®ºæ–‡å¯è§£é‡Šæ€§

---

### å™¨ä»¶å›¢é˜Ÿéœ€æ±‚è¯„ä¼°ï¼ˆV1 æ¥å— / V1 æ‹’ç»-å»¶ååˆ° V2ï¼‰

> å™¨ä»¶ç»„æå‡ºçš„éœ€æ±‚ä¸æ˜¯å…¨éƒ¨éƒ½è¦åœ¨ V1 åšã€‚ä¸‹é¢æŒ‰"V1 æ˜¯å¦æ¥å—"åˆ†ç±»ï¼Œé™„ç†ç”±ã€‚

#### V1 æ¥å—ï¼ˆç°åœ¨å¯ä»¥å¬ä»–ä»¬çš„æ”¹ï¼‰

| éœ€æ±‚ | ç†ç”± | æ”¹åŠ¨é‡ |
|------|------|--------|
| **å·®åˆ†ç»“æ„ï¼ˆæ­£è´Ÿæƒé‡ï¼‰** | æ ‡å‡†æ–¹æ¡ˆï¼Œæ•°å­—ä¾§æ”¹åŠ¨å¯æ§ï¼ˆADC é€šé“æ•° or æ•°å­—ç›¸å‡ï¼‰ï¼›ä¸åšæ­£è´Ÿå°±æ²¡æ³•è·‘ MNIST | ä¸­ |
| **è¾“å…¥ 8Ã—8=64ï¼ˆä» 49 æ”¹ï¼‰** | åˆç†è°ƒæ•´ï¼Œé¿å… 49 è¿™ä¸ªå°´å°¬æ•°ï¼›DMA æ‰“åŒ…åè€Œæ›´ç®€å•ï¼ˆ64=2Ã—32 æ•´æ‰“åŒ…ï¼‰ï¼›ä¸é˜µåˆ—è¡Œåˆ—é€‰é€šå¯¹é½ | ä¸­ï¼ˆè¿é”æ”¹åŠ¨å¤šä½†ä¸éš¾ï¼‰ |
| **è¡Œåˆ—é€‰é€šï¼ˆå›ºå®šçª—å£ç‰ˆï¼‰** | 128Ã—256 é˜µåˆ—ä¸­åªç”¨ 64Ã—20 å­åŒºåŸŸï¼Œéœ€è¦é€‰é€šï¼›å…ˆåšå›ºå®šçª—å£ï¼Œå¯„å­˜å™¨å¯é…æ”¾ V2 | ä½ |
| **è¯»æ“ä½œæ”¯æŒ** | æ¨ç†é“¾è·¯æœ¬èº«å°±æ˜¯"è¯»"ï¼ˆCIM MAC è¾“å‡ºé€šè¿‡ ADC è¯»å‡ºï¼‰ï¼Œå·²æœ‰ | æ— ï¼ˆå·²æ”¯æŒï¼‰ |

#### V1 æ‹’ç» â†’ å»¶ååˆ° V2ï¼ˆå‘å™¨ä»¶ç»„è¯´æ˜ç†ç”±ï¼‰

| éœ€æ±‚                            | æ‹’ç»ç†ç”±                                                              | å»ºè®®                                  |
| ----------------------------- | ----------------------------------------------------------------- | ----------------------------------- |
| **å†™ / å†™éªŒè¯ / æ“¦é™¤ï¼ˆP&V + Eraseï¼‰** | å¤æ‚åº¦ç­‰åŒäºå†é€ ä¸€å¥—æ§åˆ¶å­ç³»ç»Ÿï¼›V1 ç›®æ ‡æ˜¯æ¨ç†é“¾è·¯è·‘é€š+æµç‰‡ï¼Œä¸æ˜¯ç¼–ç¨‹é“¾è·¯ã€‚è€Œä¸”å†™å…¥ä¾èµ–çœŸå®å™¨ä»¶ï¼ˆè¡Œä¸ºæ¨¡å‹æ— æ³•éªŒè¯å†™å…¥æ­£ç¡®æ€§ï¼‰ã€‚ | V1 æƒé‡ç”¨è¡Œä¸ºæ¨¡å‹/é¢„çƒ§å½•ï¼›V2 åœ¨çœŸå®å™¨ä»¶åˆ°æ‰‹ååš P&V FSM |
| **å†™è„‰å†²å‚æ•°å¯é…ç½®**                  | å±äº P&V å­ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼ŒåŒä¸Šå»¶å                                               | V2 ç»Ÿä¸€åš                              |
| **0T1R 128Ã—128 å…¨é˜µåˆ—è®¿é—®**        | sneak path é£é™©æé«˜ï¼Œæ²¡æœ‰å®æµ‹æ•°æ®å°±åšå…¨é˜µåˆ—æ•°å­—æ§åˆ¶æ˜¯èµŒåš                                | V1 æ•°å­—ä¾§æ”¯æŒå¯é…é˜µåˆ—è§„æ¨¡ï¼ˆå‚æ•°åŒ–ï¼‰ï¼Œç‰©ç†ä¸Šå…ˆåœ¨å°é˜µåˆ—éªŒè¯      |
| **é˜ˆå€¼è‡ªé€‚åº”ç¡¬ä»¶**                   | å¿…é¡»å…ˆç”¨ Python å»ºæ¨¡éªŒè¯æ”¶ç›Šï¼›å¦‚æœæ”¶ç›Šä¸å¤Ÿåˆ™ä¸å€¼å¾—å¢åŠ ç¡¬ä»¶å¤æ‚åº¦                              | å…ˆå»ºæ¨¡éªŒè¯ï¼Œæœ‰æ•°æ®å†å®š                         |

#### å»ºè®®çš„æ²Ÿé€šè¯æœ¯ï¼ˆå¯¹å™¨ä»¶ç»„ï¼‰

> "V1ï¼ˆ6/30 æµç‰‡ï¼‰çš„æ ¸å¿ƒç›®æ ‡æ˜¯**æ¨ç†é“¾è·¯è·‘é€š + æ•°å­— SoC ç¨³å®šæµç‰‡**ã€‚å·®åˆ†è¯»å‡ºã€è¡Œåˆ—é€‰é€šã€8Ã—8 è¾“å…¥ç»´åº¦æˆ‘ä»¬è¿™ä¸€ç‰ˆå°±ä¼šåšã€‚
> å†™å…¥/æ“¦é™¤/éªŒè¯æ¶‰åŠå®Œæ•´çš„ç¼–ç¨‹æ§åˆ¶å­ç³»ç»Ÿï¼Œå·¥ç¨‹é‡ç›¸å½“äºå†åšåŠä¸ª SoCï¼Œè€Œä¸”è¡Œä¸ºæ¨¡å‹æ— æ³•éªŒè¯å†™å…¥æ­£ç¡®æ€§â€”â€”**å¿…é¡»ç­‰çœŸå®å™¨ä»¶åˆ°æ‰‹ååœ¨ V2 åš**ã€‚
> æ•°å­—ä¾§è®¾è®¡å·²ç»å‚æ•°åŒ–ï¼Œåç»­æ”¯æŒä¸åŒé˜µåˆ—è§„æ¨¡å’Œé€šé“æ•°åªéœ€æ”¹å‚æ•°ï¼Œä¸ä¼šè¿”å·¥ã€‚"

### å¤‡æ³¨
- åç»­æ‰€æœ‰"æ ¸å¿ƒ RTL æ›´æ”¹"åº”åŸºäº**å»ºæ¨¡å®šç‰ˆå‚æ•° + å™¨ä»¶ç¡®è®¤æ•°æ®**å†å®æ–½ï¼ˆå¦åˆ™å®¹æ˜“è¿”å·¥ï¼‰ã€‚
- æ¥å£æ–‡æ¡£ï¼ˆ`doc/08_cim_analog_interface.md`ï¼‰éœ€è¦éšå™¨ä»¶æ•°æ®ä¸åŠŸèƒ½å˜æ›´åŒæ­¥æ›´æ–°ã€‚
- å­¦ä»£ç å’Œå»ºæ¨¡å¯ä»¥å¹¶è¡Œï¼šä¸Šåˆçœ‹ä»£ç  + æ‰‹ç”»å›¾ï¼Œä¸‹åˆå†™ Pythonã€‚
- å™¨ä»¶ç»„çš„ Python æ¨¡å‹æ˜¯é‡å¤§åˆ©å¥½â€”â€”ä¹‹å‰æ‹…å¿ƒ SPICE ä¸èƒ½ç›´æ¥ç”¨äºç³»ç»Ÿå»ºæ¨¡ï¼Œç°åœ¨æœ‰ Python æ¨¡å‹å¯ä»¥ç›´æ¥é›†æˆåˆ°ç«¯åˆ°ç«¯ä»¿çœŸä¸­ã€‚

---

### IO Pad æ–¹æ¡ˆï¼ˆå·²ç¡®è®¤ï¼š48 padï¼Œ3 ESDï¼Œ45 å¯ç”¨ï¼‰

#### å™¨ä»¶æ¨¡å‹å…³é”®å‚æ•°ï¼ˆæ¥è‡ª memristor_plugin.pyï¼‰

| å‚æ•° | å€¼ | å¯¹æ•°å­—è®¾è®¡çš„å½±å“ |
|------|-----|-----------------|
| é˜µåˆ—è§„æ¨¡ | 128Ã—256 | ç¡®è®¤å·®åˆ†ç»“æ„ (128 row Ã— 256 col) |
| æƒé‡ç²¾åº¦ | 4-bit (16ç”µå¹³ï¼Œå¯¹æ•°åˆ†å¸ƒ) | ä¸å½±å“æ•°å­—ä¾§ï¼ˆæƒé‡åœ¨æ¨¡æ‹ŸåŸŸï¼‰ |
| D2D å˜åŒ–æ€§ | 5% | Pythonå»ºæ¨¡éœ€è€ƒè™‘ |
| C2C å˜åŒ–æ€§ | 3% | Pythonå»ºæ¨¡éœ€è€ƒè™‘ |
| HRS ç”µé˜» (è¯»1.5V) | ~1 TÎ© (ç”µæµ~1.5 pA) | è¯»å‡ºç”µæµæä½ï¼Œéœ€çµæ•TIA+ADCï¼ˆD4ç¡®è®¤1.5Vï¼‰ |
| LRS ç”µé˜» (è¯»1.5V) | ~200 MÎ© (ç”µæµ~7.5 nA) | 64è¾“å…¥å…¨1æ—¶åˆ—ç”µæµ~480 nAï¼ˆD4ç¡®è®¤1.5Vï¼‰ |
| å¼€å…³æ¯” | ~5000:1 | å¾ˆå¥½ï¼Œåˆ†ç±»ç²¾åº¦æœ‰ä¿éšœ |
| **æ¨¡å‹å†…éƒ¨ADC** | **8-bit** | é‡å¤§å‘ç°ï¼šå™¨ä»¶å›¢é˜Ÿç›®æ ‡å°±æ˜¯8-bitï¼Œä¸æ˜¯12-bit |
| IR drop | 0.5 Î©/cell | ç”±äºç”µé˜»æé«˜/ç”µæµæä½ï¼ŒIR dropå½±å“å° |

#### æ¨èæ–¹æ¡ˆï¼š8-bit ADC + ä¿ç•™ JTAG + WL æ—¶åˆ†å¤ç”¨ï¼ˆæ–¹æ¡ˆB æ•°å­—ä¾§å·®åˆ†ï¼Œä¼šè®®ç¡®è®¤ï¼‰

| ç±»åˆ« | ä¿¡å· | æ–¹å‘ | Pinæ•° |
|------|------|------|-------|
| æ—¶é’Ÿ/å¤ä½ | clk, rst_n | in | **2** |
| UART | uart_tx, uart_rx | out/in | **2** |
| SPI | spi_sclk, spi_mosi, spi_miso, spi_cs_n | out/in | **4** |
| JTAG | jtag_tck, jtag_tms, jtag_tdi, jtag_tdo | in/out | **4** |
| ç”µæº | VDDCOREÃ—2, VSSCOREÃ—2, VDDIO, VSSIO | pwr | **6** |
| WL æ—¶åˆ†å¤ç”¨ | wl_data[7:0] | out | 8 |
|  | wl_group_sel[2:0] | out | 3 |
|  | wl_latch | out | 1 |
| CIM æ§åˆ¶ | cim_start | out | 1 |
|  | cim_done | in | 1 |
| BL è¯»å‡º | bl_data[7:0] | in | 8 |
|  | bl_sel[4:0] | out | 5 |
| **åˆè®¡** | | | **45** |
| **å‰©ä½™** | æ— ï¼ˆScheme B ç”¨å®Œå…¨éƒ¨ 45 pinï¼‰ | | **0** |

> **ä¸ºä»€ä¹ˆèƒ½æ”¾ä¸‹**ï¼šå…³é”®èŠ‚çœâ€”â€”
> 1. **ADC 8-bit è€Œé 12-bit**ï¼ˆA2 ç¡®è®¤ï¼‰ï¼ŒèŠ‚çœ 4 pin
> 2. **æ–¹æ¡ˆB æ•°å­—ä¾§å·®åˆ†**ï¼ˆA1 ç¡®è®¤ï¼‰ï¼Œbl_sel éœ€ 5-bitï¼ˆ$clog2(20)=5ï¼‰
>
> 8-bit ADC èŠ‚çœ 4 pinï¼Œæ–¹æ¡ˆB æ¯”æ–¹æ¡ˆA å¤šç”¨ 1 pinï¼ˆbl_sel 4â†’5ï¼‰ï¼Œå‡€èŠ‚çœ 3 pinã€‚
> åŠ å› JTAG(4 pin) æ­£å¥½ç”¨å®Œ 45 pinï¼ˆæ—  spareï¼‰ã€‚

> **å¤‡é€‰æ–¹æ¡ˆ**ï¼ˆå¦‚æœåç»­å»ºæ¨¡è¯æ˜éœ€è¦ 12-bit ADCï¼‰ï¼šç æ‰ JTAG â†’ æ­£å¥½ 45 pinï¼ˆæ— ä½™é‡ï¼‰ã€‚
> ä½†ä»å™¨ä»¶æ¨¡å‹çš„ 4-bit æƒé‡ + 5000:1 å¼€å…³æ¯”æ¥çœ‹ï¼Œ8-bit ADC çš„åŠ¨æ€èŒƒå›´å®Œå…¨è¶³å¤Ÿã€‚

#### ç®€åŒ–æ¡æ‰‹åè®®ï¼ˆçœæ‰ dac_valid/ready/adc_start/adc_doneï¼Œå…±çœ 4 pinï¼‰

```
æ•°å­—ä¾§ï¼š                                æ¨¡æ‹Ÿä¾§ï¼š
  1. é€ç»„åŠ è½½ WLï¼ˆ8æ‹ï¼‰
     wl_data = spike[g*8+:8]
     wl_group_sel = g (0~7)
     wl_latch è„‰å†² â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  é”å­˜åˆ°å¯¹åº”ç»„çš„ WL é©±åŠ¨å™¨
  2. æ‹‰é«˜ cim_start â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  å¼€å§‹ CIM MAC è®¡ç®— + ADC è½¬æ¢
  3. ç­‰å¾… cim_done=1 â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  å…¨éƒ¨åˆ—è®¡ç®—+ADCå®Œæˆ
  4. é€æ­¥è®¾ç½® bl_sel = 0,1,...19ï¼ˆScheme B: 0~9=pos, 10~19=negï¼‰
     æ¯æ­¥ç­‰å›ºå®š settle å‘¨æœŸ
     é‡‡æ · bl_data[7:0] â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  MUX é€‰é€šå¯¹åº” BL çš„ ADC ç»“æœ
  5. å…¨éƒ¨è¯»å®Œï¼Œé‡Šæ”¾ cim_start
```

#### WL æ—¶åˆ†å¤ç”¨ FSM æ”¹é€ è¦ç‚¹

`cim_array_ctrl.sv` ä¸­åŸ `S_DRIVE_WL` çŠ¶æ€æ‹†åˆ†ä¸º 8 æ‹ï¼š
```
S_DRIVE_WL â†’ S_WL_MUX (å†…éƒ¨è®¡æ•° g=0..7)
æ¯æ‹: wl_data_out = wl_bitmap[g*8 +: 8]
      wl_group_sel_out = g
      wl_latch_out = 1
```

#### å¯¹å™¨ä»¶æ¨¡å‹çš„é¢å¤–è§‚å¯Ÿ

1. **ç”µæµæä½(pA~nA)** â†’ sneak path é—®é¢˜å¯èƒ½æ¯”é¢„æœŸè½»ï¼ˆå¥½æ¶ˆæ¯ï¼‰ï¼Œä½† ADC çµæ•åº¦è¦æ±‚é«˜ï¼ˆæ¨¡æ‹Ÿä¾§éœ€ TIAï¼‰
2. **IR drop å½±å“å°** â†’ æ¨¡å‹è™½ç„¶å»ºæ¨¡äº† IR dropï¼Œä½†ç”±äºç”µé˜»æé«˜ï¼Œå®é™…å½±å“å¯å¿½ç•¥
3. **æ¼‚ç§»ç³»æ•° 0.005** â†’ é•¿æ—¶é—´æ¨ç†å¯èƒ½æœ‰ç²¾åº¦é€€åŒ–ï¼ŒPython å»ºæ¨¡æ—¶éœ€è¯„ä¼°
4. **æ¨¡å‹å¯ç›´æ¥ import** â†’ `from memristor_plugin import MemristorArraySimulator` å³å¯åšç«¯åˆ°ç«¯ä»¿çœŸ

---

### æ›´æ–°åçš„æ‰§è¡Œè®¡åˆ’ï¼ˆèåˆ IO pad æ–¹æ¡ˆ + å™¨ä»¶æ•°æ®ï¼‰

> ä»¥ä¸‹ä¸ºç¡®è®¤ IO pad = 45 å¯ç”¨ã€è·å¾—å™¨ä»¶ Python æ¨¡å‹åçš„æ›´æ–°ç‰ˆã€‚å·²å®Œæˆçš„æ‰“ âœ…ã€‚

#### âœ… å·²å®Œæˆ
1. âœ… RTL å…¨é¢ code reviewï¼ˆ17 ä¸ªæ–‡ä»¶ï¼Œå…¨éƒ¨æ­£ç¡®ï¼‰
2. âœ… ç¡®è®¤ foundry pad æ•°ï¼ˆ48 padï¼Œ45 å¯ç”¨ï¼‰
3. âœ… ç¡®å®š IO æ–¹æ¡ˆï¼šWL 8ç»„Ã—8 æ—¶åˆ†å¤ç”¨ + 8-bit ADC + æ–¹æ¡ˆB å·®åˆ† + ä¿ç•™ JTAG = 45 pinï¼ˆä¼šè®®åæ›´æ–°ï¼‰
4. âœ… è·å–å™¨ä»¶ Python æ¨¡å‹ï¼ˆmemristor_plugin.py + I-V.xlsxï¼‰
5. âœ… åˆ†æå™¨ä»¶å‚æ•°ï¼š4-bit æƒé‡ã€5000:1 å¼€å…³æ¯”ã€8-bit ADCã€pA~nA çº§ç”µæµ
6. âœ… Python å…¨é‡å»ºæ¨¡å®Œæˆï¼ˆåˆç‰ˆ T=1, ratio=0.40, test=91.24%ï¼‰â†’ **å®šç‰ˆæ›´æ–°ï¼ˆ2026-02-27ï¼‰**: T=10, ratio_code=4, spike-only test=90.42%, zero-spike=0.00%
7. âœ… å™¨ä»¶/æ¨¡æ‹Ÿå›¢é˜Ÿä¼šè®®ç¡®è®¤ï¼šScheme B, 8-bit ADC, æ— è‡ªé€‚åº”é˜ˆå€¼, THRESHOLD_RATIO å¯„å­˜å™¨
8. âœ… RTL å‚æ•°æ›´æ–° + TB é€‚é… + æ–‡æ¡£åŒæ­¥ï¼ˆ2026-02-06ï¼‰
9. âœ… CIM Test Mode + Debug è®¡æ•°å™¨ + FIFO æ–­è¨€ï¼ˆ2026-02-08ï¼‰

#### æ¥ä¸‹æ¥è¦åšçš„ï¼ˆæŒ‰é¡ºåºï¼‰

| åºå· | ä»»åŠ¡ | å‰ç½®ä¾èµ– | è¯´æ˜ |
|------|------|----------|------|
| **0** | **Smoke Test** â€” è·‘é€šå½“å‰ RTL ä»¿çœŸï¼ˆVCSï¼‰ï¼Œç¡®è®¤æ— ç¼–è¯‘/è¿è¡Œé”™è¯¯ | æ—  | åŠå¤© |
| **1** | **å­¦ä»£ç ** â€” æŒ‰ `doc/06_learning_path.md` Part A é¡ºåº (Stage Aâ†’E) é˜…è¯»å¹¶ç†è§£æ‰€æœ‰ RTL | æ— ï¼ˆä¸0å¹¶è¡Œï¼‰ | 1-2å‘¨ |
| **2** | **Python å»ºæ¨¡** â€” é›†æˆ `memristor_plugin.py` åšç«¯åˆ°ç«¯ SNN æ¨ç†ç²¾åº¦è¯„ä¼° | ç†è§£ä»£ç åæ›´å¥½ | 1å‘¨ |
|  | 2a. 8Ã—8 è¾“å…¥ (64ç»´) + å·®åˆ†æƒé‡ + 8-bit ADC ç²¾åº¦éªŒè¯ | | |
|  | 2b. LIF é˜ˆå€¼æ¨èå€¼é‡æ–°è®¡ç®— | | |
|  | 2c. é˜ˆå€¼è‡ªé€‚åº”æ”¶ç›Šè¯„ä¼°ï¼ˆzys åˆ›æ–°ç‚¹ï¼‰ | | |
|  | 2d. sneak path å½±å“è¯„ä¼°ï¼ˆç”¨æ¨¡å‹çš„ variation + noise å‚æ•°ï¼‰ | | |
| **3** | **å™¨ä»¶ä¼šè®® follow-up** â€” âœ… ç¡®è®¤æ–¹æ¡ˆBï¼ˆæ•°å­—ä¾§å·®åˆ†ï¼‰ï¼›ç¡®è®¤ 8-bit ADC æ–¹æ¡ˆ | å»ºæ¨¡åˆæ­¥ç»“è®º | 1æ¬¡ä¼šè®® |
|  | 3a. âœ… å‘å™¨ä»¶ç»„ç¡®è®¤ï¼šADC é€šé“æ•°=20ï¼ˆæ–¹æ¡ˆBï¼‰| å·²ç¡®è®¤ | |
|  | 3b. å‘å™¨ä»¶ç»„ç¡®è®¤ï¼špin æ–¹æ¡ˆï¼ˆ44 pin + 1 spare çš„åˆ†é…è¡¨ï¼‰ | | |
|  | 3c. å‘å™¨ä»¶ç»„ç¡®è®¤ï¼šWL æ—¶åˆ†å¤ç”¨çš„æ—¶åºæ˜¯å¦å¯æ¥å— | | |
| **4** | âœ… **RTL å‚æ•°æ›´æ–°**ï¼ˆå·²å®Œæˆ 2026-02-06ï¼‰ | 2 + 3 | âœ… |
|  | âœ… 4a. `snn_soc_pkg.sv`: NUM_INPUTS=64, ADC_BITS=8, ADC_CHANNELS=20, NEURON_DATA_WIDTH=9 | | âœ… |
|  | âœ… 4b. `dma_engine.sv`: 64-bit æ•´æ‰“åŒ…ï¼ˆ2Ã—32ï¼‰ | | âœ… |
|  | âœ… 4c. `cim_macro_blackbox.sv`: 20é€šé“ Scheme B è¡Œä¸ºæ¨¡å‹ | | âœ… |
|  | âœ… 4d. `wl_mux_wrapper.sv` + `snn_soc_top.sv`: WL æ—¶åˆ†å¤ç”¨åè®®åŸå‹ï¼ˆ10 cyclesï¼‰å·²è½åœ°ï¼›`chip_top` pad çº§è¿æ¥å¾…åç«¯å‰æ”¶å£ | | âœ… |
|  | âœ… 4e. `adc_ctrl.sv`: 20é€šé“ MUX + æ•°å­—å·®åˆ†å‡æ³• | | âœ… |
|  | âœ… 4f. `lif_neurons.sv`: signed è†œç”µä½ + Scheme B æœ‰ç¬¦å·ç´¯åŠ  | | âœ… |
|  | âœ… 4g. `snn_soc_top.sv`: ç«¯å£ä½å®½é€‚é…ï¼ˆbl_sel=5, neuron_data=9ï¼‰ | | âœ… |
| **5** | âœ… **TB æ›´æ–°** â€” å·²é€‚é…æ–°å‚æ•° | 4 | âœ… |
| **6** | **å›å½’æµ‹è¯•** â€” å…¨æµç¨‹ smoke test + åŠŸèƒ½éªŒè¯ | 5 | 1å¤© |
| **7** | âœ… **æ–‡æ¡£åŒæ­¥** â€” å·²æ›´æ–° doc/00~05, 08 | 6 | âœ… |
| **8** | **é›†æˆå¯¹æ¥ä¼š** â€” ä¸å™¨ä»¶/æ¨¡æ‹Ÿç»„å¯¹é½æ¥å£æ–‡æ¡£ | 7 | 1æ¬¡ä¼šè®® |

#### å…³é”®å†³ç­–ç‚¹ï¼ˆå…¨éƒ¨å·²å®šç‰ˆ 2026-02-08ï¼‰

| å†³ç­– | å®šç‰ˆç»“æœ | ä¾æ® |
|------|----------|------|
| ADC ä½å®½ | **8-bit** | å»ºæ¨¡æœ€ä¼˜ (90.78%) + A2 ç¡®è®¤ |
| å·®åˆ†æ–¹æ¡ˆ | **Bï¼ˆæ•°å­—ä¾§å‡ï¼Œ20é€šé“ï¼‰** | A1 ç¡®è®¤ |
| é˜ˆå€¼è‡ªé€‚åº” | **ä¸åš** | å»ºæ¨¡ä¸‹é™ 1.80% + J1 ç¡®è®¤ |
| é˜ˆå€¼æ¯”ç‡ | **ratio_code=4ï¼ˆå¯„å­˜å™¨å€¼ 4ï¼Œ4/255â‰ˆ0.0157ï¼‰** | å»ºæ¨¡å®šç‰ˆï¼ˆçº¯spikeæ ‡å®šï¼‰+ J2 ç¡®è®¤ |
| é˜µåˆ—è§„æ¨¡ | **64Ã—20 å›ºå®šçª—å£**ï¼ˆV1ï¼‰ | å»ºæ¨¡ç¡®è®¤ + V2 å¯é… |
| å¸§æ•° | **T=10** | å»ºæ¨¡å®šç‰ˆï¼ˆspike-only 90.42%ï¼Œzero-spike=0.00%ï¼‰ |


*(æ—§çš„ IO pad è¡ŒåŠ¨é¡¹å·²åˆå¹¶åˆ°ä¸Šæ–¹â€œæ›´æ–°åçš„æ‰§è¡Œè®¡åˆ’â€ä¸­)*

## ä½ éœ€è¦é—®æ¨¡æ‹Ÿå›¢é˜Ÿçš„ä¿¡æ¯

æŒ‰ä¼˜å…ˆçº§æ’åºï¼š

### P0 â€” ç°åœ¨å°±éœ€è¦ç¡®è®¤ï¼ˆæœ¬å‘¨å†…ï¼‰

1. **ADC æ¥å£æ—¶åº**
    
    - `adc_start`Â â†’Â `adc_done`Â çš„å»¶è¿Ÿæ˜¯å¤šå°‘ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Ÿï¼ˆæˆ‘ä»¬ RTL å‡è®¾ 1 cycleï¼Œå¦‚æœæ¨¡æ‹Ÿ ADC éœ€è¦æ›´å¤šå‘¨æœŸï¼Œéœ€è¦è°ƒæ•´çŠ¶æ€æœºç­‰å¾…ï¼‰
    - ADC çš„é‡‡æ ·ä¿æŒæ—¶é—´è¦æ±‚ï¼Ÿï¼ˆ`bl_data`Â éœ€è¦åœ¨Â `adc_start`Â ä¹‹åç¨³å®šå¤šä¹…ï¼Ÿï¼‰
2. **CIM array å»ºç«‹æ—¶é—´**
    
    - WL æ–½åŠ ååˆ° BL ç”µæµç¨³å®šéœ€è¦å¤šå°‘ nsï¼Ÿï¼ˆè¿™å†³å®šÂ `cim_done`Â çš„å»¶è¿Ÿï¼‰
    - å½“å‰ blackbox å‡è®¾ CIM è®¡ç®—æ˜¯ç»„åˆé€»è¾‘ï¼ˆåŒæ‹å®Œæˆï¼‰ï¼Œå®é™…æ¨¡æ‹Ÿéœ€è¦å‡ ä¸ªå‘¨æœŸï¼Ÿ
3. **ç¡®è®¤å¼•è„šå®šä¹‰**
    
    - ç¡®è®¤Â `bl_sel[4:0]`Â é€‰é€š 20 ä¸ª BL é€šé“çš„æ˜ å°„å…³ç³»ï¼ˆå“ªä¸ª sel å¯¹åº”å“ªä¸ªç‰©ç†åˆ—ï¼‰
    - ç¡®è®¤ WL æ—¶åˆ†å¤ç”¨æ–¹æ¡ˆï¼ˆ8 groups Ã— 8 = 64 WLï¼Œ`group_sel[2:0]`Â +Â `data[7:0]`Â +Â `latch`ï¼‰
    - ç¡®è®¤å·®åˆ†åˆ—çš„ç‰©ç†æ’å¸ƒï¼ˆpos column 0-9 å’Œ neg column 10-19 çš„å¯¹åº”å…³ç³»ï¼‰

### P1 â€” ä¸¤å‘¨å†…éœ€è¦ï¼ˆRTL smoke test é€šè¿‡åï¼‰

4. **æ¨¡æ‹Ÿæ¨¡å‹äº¤ä»˜å½¢å¼**
    
    - ä»–ä»¬èƒ½æä¾›ä»€ä¹ˆçº§åˆ«çš„æ¨¡å‹ï¼ŸVerilog behavioral? Verilog-A? SPICE?
    - é¢„è®¡ä»€ä¹ˆæ—¶å€™èƒ½æä¾›ï¼Ÿï¼ˆè¿™å†³å®šè”åˆä»¿çœŸçš„æ—¶é—´ç‚¹ï¼‰
5. **ç”µæº/åç½®éœ€æ±‚**
    
    - CIM array çš„è¯»ç”µå‹ï¼ˆæˆ‘ä»¬å»ºæ¨¡ç”¨ 1.5Vï¼‰æ˜¯å¦ç”±ç‰‡ä¸Š LDO æä¾›è¿˜æ˜¯å¤–éƒ¨ padï¼Ÿ
    - ADC çš„å‚è€ƒç”µå‹ä»å“ªæ¥ï¼Ÿ

### P2 â€” Tapeout å‰éœ€è¦ï¼ˆ4 å‘¨å†…ï¼‰

6. **ç‰ˆå›¾çº¦æŸ**
    - CIM array çš„ç‰©ç†å°ºå¯¸å’Œä½ç½®çº¦æŸ
    - æ¨¡æ‹Ÿ-æ•°å­—ç•Œé¢çš„ placement è¦æ±‚

## æ¨¡æ‹Ÿå›¢é˜Ÿç°åœ¨èƒ½å¼€å·¥å—ï¼Ÿ

**å¯ä»¥åˆæ­¥å¼€å·¥ã€‚** ç›®å‰æ•°å­—ä¾§å·²ç»é”å®šçš„æ¥å£ä¿¡æ¯è¶³å¤Ÿæ¨¡æ‹Ÿå›¢é˜Ÿå¼€å§‹ï¼š

- **CIM array è®¾è®¡**ï¼š128Ã—256 RRAM é˜µåˆ—ï¼Œ0T1R ç»“æ„ï¼Œå·®åˆ†åˆ—é…ç½® â€” è¿™äº›æ˜¯å™¨ä»¶å±‚é¢çš„ï¼Œè·Ÿæ•°å­—æ¥å£æ— å…³ï¼Œå¯ä»¥ç›´æ¥å¼€å§‹
- **ADC è®¾è®¡**ï¼š8-bit SAR ADCï¼Œ20 é€šé“æ—¶åˆ†å¤ç”¨å…±äº« 1 ä¸ª ADC â€” å¯ä»¥å¼€å§‹ ADC å•å…ƒè®¾è®¡
- **WL é©±åŠ¨ç”µè·¯**ï¼š8 ç»„ Ã— 8 çš„æ—¶åˆ†å¤ç”¨ç»“æ„ â€” å¯ä»¥å¼€å§‹é©±åŠ¨å™¨è®¾è®¡

**ä½†æ˜¯**ï¼Œåœ¨ä¸Šé¢ P0 çš„ 3 ä¸ªé—®é¢˜ç¡®è®¤ä¹‹å‰ï¼Œä»–ä»¬ä¸åº”è¯¥é”å®šæ¥å£æ—¶åºã€‚å»ºè®®ä½ æŠŠ `doc/03_cim_if_protocol.md` å’Œ `doc/08_cim_analog_interface.md` å‘ç»™æ¨¡æ‹Ÿå›¢é˜Ÿï¼Œè®©ä»–ä»¬åŸºäºè¿™ä¸¤ä»½æ–‡æ¡£åšåˆæ­¥è®¾è®¡ï¼ŒåŒæ—¶æŠŠ P0 é—®é¢˜çš„ç­”æ¡ˆåé¦ˆç»™ä½ ï¼Œä½ è¿™è¾¹ç›¸åº”è°ƒæ•´ RTL æ—¶åºï¼ˆä¸»è¦æ˜¯ `cim_macro_blackbox` çš„è¡Œä¸ºæ¨¡å‹å’Œ `adc_ctrl` çš„çŠ¶æ€æœºç­‰å¾…å‘¨æœŸï¼‰ã€‚
## è®¡åˆ’è¯„ä»·

| é˜¶æ®µ                                        | è¯„ä»·                                                                     | å»ºè®®                                                                                            |
| ----------------------------------------- | ---------------------------------------------------------------------- | --------------------------------------------------------------------------------------------- |
| **1.ç»™æ–‡æ¡£ï¼Œè¦æ•°æ®ï¼Œ Smoke test + å­¦ä»£ç ï¼Œç„¶åæ ¹æ®æ•°æ®æ”¹ä»£ç ** | **å®Œå…¨æ­£ç¡®ã€‚**Â 06 æ–‡æ¡£å°±æ˜¯ä¸ºæ­¤å†™çš„ï¼ŒæŒ‰å®ƒèµ°å³å¯ã€‚ç­‰ P0/P1 ä¿¡æ¯æ˜¯åˆç†çš„å¹¶è¡Œç­–ç•¥ã€‚                        | å»ºè®®å…ˆè·‘ VCS ç¼–è¯‘ï¼ˆä¸è·‘ä»¿çœŸï¼‰ï¼Œçœ‹æœ‰æ²¡æœ‰ syntax/port mismatch é”™è¯¯ï¼Œè¿™æ˜¯æœ€å¿«çš„ sanity check                             |
| **2. åŠ  UART/SPI/E203/DMA/AXI-Lite**       | **æ ¸å¿ƒå·¥ä½œé‡åœ¨è¿™é‡Œã€‚**Â ç›®å‰ UART/SPI/JTAG éƒ½æ˜¯ stubï¼ŒDMA æ˜¯ç®€åŒ–ç‰ˆç›´è¿æ€»çº¿ã€‚å‡çº§ä¸ºçœŸå® IP æ˜¯ V1 å¿…é¡»çš„ã€‚ | å»ºè®®é¡ºåºï¼š**E203 CPU â†’ AXI-Lite bus â†’ DMA â†’ UART â†’ SPI**ã€‚CPU å’Œæ€»çº¿æ˜¯éª¨æ¶ï¼Œå…ˆæ­å¥½æ‰èƒ½æŒ‚å¤–è®¾ã€‚æ¯åŠ ä¸€ä¸ªæ¨¡å—å†™ä¸€ä¸ª unit TB éªŒè¯ã€‚ |
| **3. åˆ›æ–°ç‚¹**                                | åˆç†çš„"é”¦ä¸Šæ·»èŠ±"å®šä½                                                            | çœ‹æ—¶é—´å’Œç²¾åŠ›ï¼Œä¸è¦å½±å“ tapeout deadline                                                                  |
| **4. FPGA éªŒè¯**                            | **å¼ºçƒˆå»ºè®®ä¿ç•™æ­¤æ­¥ã€‚**Â è¿™æ˜¯ tapeout å‰æœ€åçš„å…¨ç³»ç»ŸéªŒè¯æœºä¼š                                   | éœ€è¦æå‰é€‰å¥½ FPGA æ¿å­ï¼ˆXilinx/Intelï¼‰ï¼ŒCIM macro åœ¨ FPGA ä¸Šç”¨ behavioral model æ›¿ä»£                          |
| **5. Backend**                            | æ ‡å‡†æµç¨‹                                                                   | é€šå¸¸éœ€è¦ foundry PDK + åç«¯å·¥å…·ï¼ˆInnovus/ICC2ï¼‰ï¼Œç¡®è®¤å­¦æ ¡/å®éªŒå®¤æœ‰ license                                       |

**æ€»ä½“åˆ¤æ–­ï¼šè®¡åˆ’å¯è¡Œï¼Œé¡ºåºåˆç†ã€‚** å”¯ä¸€çš„é£é™©ç‚¹æ˜¯é˜¶æ®µ 2 çš„å·¥ä½œé‡å¯èƒ½æ¯”é¢„æœŸå¤§ï¼ˆE203 é›†æˆä¸ç®€å•ï¼‰ï¼Œå»ºè®®åœ¨é˜¶æ®µ 1 å°±å¼€å§‹çœ‹ E203 çš„æ¥å£æ–‡æ¡£ã€‚

## å½“å‰ SNN SoC æ•°æ®æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        TB / CPU (æœªæ¥ E203)                         â”‚
â”‚  â‘  å†™ data_sramï¼ˆbit-plane æ ¼å¼ï¼‰                                   â”‚
â”‚  â‘¡ é…ç½®å¯„å­˜å™¨ï¼ˆthreshold, timesteps, etc.ï¼‰                         â”‚
â”‚  â‘¢ å¯åŠ¨ DMA â†’ å¯åŠ¨ CIM æ¨ç† â†’ è¯»å– spike ç»“æœ                      â”‚
â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚ bus_write     â”‚ bus_write                           â”‚ bus_read
   â–¼              â–¼                                     â–²
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚data_sram â”‚  â”‚ reg_bank â”‚ â—„â”€â”€ adc_sat_high/low â”€â”€ â”‚ adc_ctrl â”‚
â”‚ (8KB)    â”‚  â”‚ (0x4000) â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                              â–²
   â”‚ dma_rd      â”‚ threshold, timesteps,                â”‚
   â–¼             â”‚ start_pulse, reset_mode              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                                      â”‚
â”‚dma_engineâ”‚     â”‚                                      â”‚
â”‚ RD0â†’RD1  â”‚     â”‚                                      â”‚
â”‚ â†’PUSH    â”‚     â”‚                                      â”‚
â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                                      â”‚
   â”‚{word1,word0}â”‚                                      â”‚
   â”‚= 64-bit     â”‚                                      â”‚
   â–¼             â”‚                                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                                      â”‚
â”‚input_fifoâ”‚     â”‚                                      â”‚
â”‚ (64-bit  â”‚     â”‚                                      â”‚
â”‚  Ã—256)   â”‚     â”‚                                      â”‚
â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                                      â”‚
   â”‚in_fifo_rdataâ”‚                                      â”‚
   â–¼             â–¼                                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚         cim_array_ctrl (æ ¸å¿ƒ FSM)        â”‚             â”‚
â”‚                                         â”‚             â”‚
â”‚  IDLE â”€â”€startâ”€â”€â–º FETCH â”€â”€â–º DAC â”€â”€â–º CIM â”€â”€â–º ADC â”€â”€â–º INCâ”‚
â”‚   â–²                                                â”‚  â”‚
â”‚   â””â”€â”€ DONE â—„â”€â”€ (all planes & frames done) â—„â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                       â”‚
â”‚  æ§åˆ¶ä¿¡å·è¾“å‡º:                                          â”‚
â”‚  â€¢ wl_bitmap + wl_valid_pulse â†’ dac_ctrl              â”‚
â”‚  â€¢ cim_start_pulse â†’ cim_macro                        â”‚
â”‚  â€¢ adc_kick_pulse â†’ adc_ctrl â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â€¢ bitplane_shift â†’ lif_neurons (åŠ æƒç§»ä½é‡)            â”‚
â”‚  â€¢ busy / done_pulse â†’ reg_bank                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚              â”‚              â”‚
   â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚dac_ctrlâ”‚  â”‚cim_macro  â”‚  â”‚ adc_ctrl â”‚
â”‚        â”‚  â”‚(blackbox) â”‚  â”‚          â”‚
â”‚ latch  â”‚  â”‚           â”‚  â”‚ æ‰«æ20ch â”‚
â”‚wl_bitmapâ”‚  â”‚ wl_spike â”‚  â”‚bl_sel:   â”‚
â”‚        â”‚  â”‚  Ã— weightsâ”‚  â”‚ 0â†’19     â”‚
â”‚dac_validâ”‚â”€â–ºâ”‚dac_ready â”‚  â”‚          â”‚
â”‚        â”‚  â”‚           â”‚  â”‚adc_start â”‚
â”‚dac_doneâ”‚  â”‚cim_start  â”‚  â”‚â”€â–ºadc_doneâ”‚
â”‚  â—„â”€â”€â”€â”€â”€â”‚  â”‚â”€â”€â–ºcim_doneâ”‚  â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚  â”‚ raw_data â”‚
            â”‚adc_start  â”‚  â”‚  [0..19] â”‚
            â”‚â”€â”€â–ºadc_doneâ”‚  â”‚          â”‚
            â”‚bl_selâ”€â–º   â”‚  â”‚ Scheme B â”‚
            â”‚  bl_data  â”‚â”€â”€â–ºâ”‚ diff:    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚pos-neg   â”‚
                           â”‚=signed   â”‚
                           â”‚ 9-bitÃ—10 â”‚
                           â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚neuron_in_valid
                              â”‚neuron_in_data[9:0]
                              â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚lif_neuronsâ”‚
                        â”‚ (10è·¯å¹¶è¡Œ) â”‚
                        â”‚           â”‚
                        â”‚ membrane[i] += â”‚
                        â”‚  sign_ext(in[i])â”‚
                        â”‚   <<< bitplane  â”‚
                        â”‚                 â”‚
                        â”‚ if mem >= threshâ”‚
                        â”‚   â†’ spike!      â”‚
                        â”‚   â†’ spike_queue â”‚
                        â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚out_fifo_push
                           â”‚spike_id[3:0]
                           â–¼
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚output_fifoâ”‚
                     â”‚ (4-bit    â”‚
                     â”‚  Ã—256)    â”‚
                     â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ out_fifo_rdata
                        â–¼
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚ reg_bank â”‚  â”€â”€â–º TB/CPU è¯»å–
                     â”‚OUT_FIFO_ â”‚      spike_id
                     â”‚DATA 0x1C â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å…·ä½“æ•°æ®å˜æ¢è¿‡ç¨‹ï¼ˆä»¥å•å¸§ T=1 å­æµç¨‹ç¤ºä¾‹ï¼Œéå®šç‰ˆé»˜è®¤å€¼ï¼‰

|é˜¶æ®µ|æ•°æ®å½¢æ€|ä½å®½|è¯´æ˜|
|---|---|---|---|
|**1. TB å†™ SRAM**|8-bit pixel Ã— 64 â†’ æ‹†æˆ 8 ä¸ª bit-planeï¼Œæ¯ plane 64-bit = 2Ã—32-bit word|32-bit Ã— 16 words|MSB plane å…ˆå†™|
|**2. DMA æ¬è¿**|æ¯æ¬¡è¯» 2 ä¸ª 32-bit word â†’ æ‹¼æˆÂ `{word1, word0}`Â = 64-bit|64-bit|push åˆ° input_fifoï¼Œå…± 8 æ¬¡ï¼ˆ8 planesï¼‰|
|**3. FETCH**|ä» input_fifo pop ä¸€ä¸ª 64-bit wl_bitmap|64-bit|1 = è¯¥åƒç´ è¯¥ bit ä¸º 1|
|**4. DAC**|wl_bitmap â†’ dac_ctrl é”å­˜ â†’ wl_spike è¾“å‡ºåˆ° CIM macro|64-bit|æ•°å­—ä¿¡å·ï¼Œå®é™…èŠ¯ç‰‡ä¼šè½¬æˆæ¨¡æ‹Ÿ WL è„‰å†²|
|**5. CIM è®¡ç®—**|64 æ¡ WL Ã— 256 æ¡ BLï¼ˆRRAM æƒé‡ï¼‰â†’ BL ç”µæµ|æ¨¡æ‹Ÿé‡|è¡Œä¸ºæ¨¡å‹ç”¨Â `popcount * scale + offset`Â è¿‘ä¼¼|
|**6. ADC æ‰«æ**|20 ä¸ª BL é€šé“é€ä¸ªé‡‡æ ·ï¼Œbl_sel 0â†’19|8-bit Ã— 20|æ¯æ¬¡ adc_start â†’ adc_done é‡‡ä¸€ä¸ªé€šé“|
|**7. å·®åˆ†è¿ç®—**|`diff[i] = raw_data[i] - raw_data[i+10]`ï¼Œi=0..9|**signed 9-bit**Â Ã— 10|Scheme B æ ¸å¿ƒï¼šæ­£åˆ—å‡è´Ÿåˆ—|
|**8. LIF ç´¯åŠ **|`membrane[i] += sign_ext(diff[i]) <<< bitplane_shift`|signed 32-bit|bit-plane 7 æƒé‡æœ€å¤§ï¼ˆÃ—128ï¼‰ï¼Œbit 0 æƒé‡æœ€å°ï¼ˆÃ—1ï¼‰|
|**9. é˜ˆå€¼åˆ¤æ–­**|`if membrane[i] >= threshold â†’ spike`|1-bit Ã— 10|spike å soft/hard reset membrane|
|**10. è¾“å‡º**|spike_id (0~9) å…¥ output_fifo â†’ CPU è¯»å–|4-bit|å“ªä¸ªç¥ç»å…ƒ fire = åˆ†ç±»ç»“æœ|

### å…³é”®æ—¶åºï¼šä¸€æ¬¡å®Œæ•´æ¨ç†å¾ªç¯

```
ç¤ºä¾‹é‡‡ç”¨ T=1, PIXEL_BITS=8ï¼šå…± 8 ä¸ª bit-plane å­æ­¥ï¼ˆä»…ç”¨äºè§£é‡Šç¼–ç æµç¨‹ï¼›å®šç‰ˆå®é™…ä¸º T=10ï¼‰

bitplane_shift:  7 â†’ 6 â†’ 5 â†’ 4 â†’ 3 â†’ 2 â†’ 1 â†’ 0
                 â†‘                                â†‘
              MSB(Ã—128)                        LSB(Ã—1)

æ¯ä¸ªå­æ­¥:
  FETCH(1clk) â†’ DAC(~2clk) â†’ CIM(~2clk) â†’ ADC(20Ã—~2=~40clk) â†’ INC(1clk)
  â‰ˆ 46 clk/sub-step Ã— 8 planes â‰ˆ 368 clk total â‰ˆ 7.4Î¼s @50MHz
```

è¿™å°±æ˜¯å½“å‰ä»£ç ä»è¾“å…¥åˆ°è¾“å‡ºçš„å®Œæ•´æ•°æ®æµã€‚æ ¸å¿ƒç‰¹ç‚¹æ˜¯ **bit-plane æ—¶åˆ†å¤ç”¨**ï¼šä¸ä¸€æ¬¡é€ 8-bit åƒç´ ï¼Œè€Œæ˜¯æ‹†æˆ 8 ä¸ª 1-bit å¹³é¢åˆ†åˆ«é€å…¥ CIM é˜µåˆ—ï¼ŒLIF ç¥ç»å…ƒé€šè¿‡ `<<< bitplane_shift` ç»™æ¯ä¸ªå¹³é¢çš„ç»“æœåŠ ä¸Šå¯¹åº”çš„äºŒè¿›åˆ¶æƒé‡ã€‚

## GPT ä¿®æ”¹å®¡è®¡ç»“æœ

### æ”¹äº†ä»€ä¹ˆ

GPT åšäº† 5 ä¸ªæ–‡ä»¶çš„ä¿®æ”¹ï¼š

|æ–‡ä»¶|ä¿®æ”¹å†…å®¹|
|---|---|
|`snn_soc_pkg.sv`|+2 è¡Œï¼š`WL_GROUP_WIDTH=8`,Â `WL_GROUP_COUNT=8`|
|`wl_mux_wrapper.sv`|**æ–°å»º**ï¼Œ118 è¡Œï¼ŒWL æ—¶åˆ†å¤ç”¨ FSM|
|`snn_soc_top.sv`|æ–°å¢ wire å£°æ˜ + wrapper å®ä¾‹ + dac_ctrl æ”¹æ¥ wrapped ä¿¡å·|
|`sim.f`|åŠ äº†Â `wl_mux_wrapper.sv`|
|`08_cim_analog_interface.md`|åŠ äº†åè®®å†»ç»“æ¡æ¬¾ã€è´£ä»»å½’å±ã€æ—¶åºæ›´æ–°|

### é€é¡¹æ£€æŸ¥

**1. wl_mux_wrapper.sv â€” FSM é€»è¾‘**

åŠŸèƒ½æ­£ç¡®ï¼Œä½†æœ‰ä¸€ä¸ª**æ—¶åºé—®é¢˜éœ€è¦ä½ æ³¨æ„**ï¼ˆä¸æ˜¯ bugï¼Œæ˜¯è®¾è®¡é€‰æ‹©ï¼‰ï¼š

```
ST_IDLE â†’ æ”¶åˆ° wl_valid_pulse_in â†’ é”å­˜ wl_buf â†’ ST_SEND
ST_SEND â†’ è¿ç»­ 8 æ‹ï¼ˆgrp_idx 0â†’7ï¼‰ï¼Œæ¯æ‹ wl_latch=1 â†’ ST_DONE  
ST_DONE â†’ å‘å‡º wl_valid_pulse_out â†’ ST_IDLE
```

å®é™…æ‹æ•°ï¼š`1(é”å­˜) + 8(å‘é€) + 1(DONE) = 10 æ‹`ï¼Œä¸æ˜¯æ–‡æ¡£å†™çš„ 8 æ‹ã€‚è¿™æ˜¯å› ä¸º ST_IDLEâ†’ST_SEND è¿‡æ¸¡ 1 æ‹ + ST_DONE 1 æ‹ã€‚æ–‡æ¡£å†™"8 cycles"æŒ‡çš„æ˜¯ ST_SEND é˜¶æ®µæœ¬èº«ï¼Œä½†æ€» overhead æ˜¯ 10 cyclesã€‚**è¿™ä¸å½±å“åŠŸèƒ½æ­£ç¡®æ€§**ï¼Œåªæ˜¯æ–‡æ¡£è¯´çš„ `123 cycles/sub-step` å®é™…åº”è¯¥æ˜¯ `125 cycles`ï¼Œå·® 2 æ‹ï¼Œå¯ä»¥å¿½ç•¥ã€‚

**2. snn_soc_top.sv â€” æ•°æ®é€šè·¯æ¥å…¥**

```
åŸæ¥ï¼šcim_array_ctrl â†’ wl_bitmap â†’ dac_ctrl
ç°åœ¨ï¼šcim_array_ctrl â†’ wl_bitmap â†’ wl_mux_wrapper â†’ wl_bitmap_wrapped â†’ dac_ctrl
```

æ¥å…¥æ­£ç¡®ã€‚wrapper çš„è¾“å‡º `wl_bitmap_out` å°±æ˜¯å†…éƒ¨ç¼“å­˜çš„ `wl_buf`ï¼ˆ= åŸå§‹ `wl_bitmap_in` çš„é”å­˜å‰¯æœ¬ï¼‰ï¼Œæ‰€ä»¥ dac_ctrl æ”¶åˆ°çš„æ•°æ®å†…å®¹ä¸å˜ï¼Œåªæ˜¯å»¶è¿Ÿäº† ~10 æ‹ã€‚

å¤–éƒ¨å¤ç”¨ä¿¡å·ï¼ˆ`wl_data`, `wl_group_sel`, `wl_latch`, `wl_mux_busy`ï¼‰å½“å‰è¢« `_unused_wl_mux` æ¶ˆæ‰äº† lint è­¦å‘Š â€” åˆç†ï¼Œå› ä¸ºç°åœ¨è¿˜æ²¡æœ‰ chip_top æ¥æ¶ˆè´¹å®ƒä»¬ã€‚

**3. snn_soc_pkg.sv â€” æ–°å‚æ•°**

```systemverilog
parameter int WL_GROUP_WIDTH = 8;
parameter int WL_GROUP_COUNT = (NUM_INPUTS / WL_GROUP_WIDTH);  // = 8
```

å¹²å‡€ï¼Œæ— å‰¯ä½œç”¨ã€‚

**4. sim.f â€” ç¼–è¯‘é¡ºåº**

`wl_mux_wrapper.sv` æ’åœ¨ `cim_macro_blackbox.sv` å‰é¢ã€`cim_array_ctrl.sv` åé¢ã€‚é¡ºåºæ­£ç¡®ï¼ˆwrapper ä¾èµ– pkgï¼Œè¢« snn_soc_top ä½¿ç”¨ï¼‰ã€‚

**5. 08_cim_analog_interface.md â€” æ–‡æ¡£**

æ–°å¢çš„ 1.3 èŠ‚ï¼ˆåè®®å†»ç»“ï¼‰ã€1.3.1ï¼ˆå­—æ®µè¡¨ï¼‰ã€1.3.2ï¼ˆè´£ä»»å½’å±ï¼‰å†…å®¹å‡†ç¡®ï¼Œä¸ RTL ä¸€è‡´ã€‚

### æœ‰æ²¡æœ‰å¼•å…¥æ–°é—®é¢˜ï¼Ÿ

|æ£€æŸ¥é¡¹|ç»“æœ|
|---|---|
|ç«¯å£åŒ¹é…|OK â€” wrapper çš„è¾“å…¥/è¾“å‡ºä¸ snn_soc_top å£°æ˜çš„ wire ä½å®½å®Œå…¨åŒ¹é…|
|åŠŸèƒ½ç­‰ä»·æ€§|OK â€” wrapper æ˜¯é€ä¼ ï¼ˆwl_bitmap_out = wl_buf = wl_bitmap_in çš„é”å­˜ï¼‰ï¼Œå¯¹å†…éƒ¨æ•°æ®é€šè·¯**åªåŠ äº†å»¶è¿Ÿï¼Œä¸æ”¹æ•°æ®**|
|lint å…¼å®¹|OK â€” æœªä½¿ç”¨çš„å¤–éƒ¨å¤ç”¨ä¿¡å·å·²åšÂ `_unused`Â å¤„ç†|
|ç¼–è¯‘é¡ºåº|OK â€” sim.f å·²åŒ…å«æ–°æ¨¡å—|
|TB å…¼å®¹æ€§|**éœ€æ³¨æ„**Â â€” TB æ²¡æ”¹ï¼Œä½†ç”±äº wrapper å¢åŠ äº†çº¦ 10 æ‹å»¶è¿Ÿï¼Œæ¨ç†æ€»å»¶è¿Ÿä¼šå˜é•¿ã€‚TB æ˜¯è½®è¯¢ DONE çš„ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºé”™ï¼Œåªæ˜¯ä»¿çœŸæ—¶é—´å¤šäº†ä¸€äº›ã€‚OKã€‚|

---

## Appendix: Analog Handoff Entry (Final)

To keep this main document focused on architecture and fixed parameters,
use the following docs for analog-team handoff and meeting execution:

- `é¡¹ç›®ç›¸å…³æ–‡ä»¶/09_analog_team_handoff.md`
- `doc/08_cim_analog_interface.md`
- `doc/03_cim_if_protocol.md`
- `doc/02_reg_map.md`
